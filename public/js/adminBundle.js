parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"nb4k":[function(require,module,exports) {
"use strict";module.exports=function(r,n){return function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];return r.apply(n,t)}};
},{}],"zIVT":[function(require,module,exports) {
"use strict";var r=require("./helpers/bind"),t=Object.prototype.toString;function n(r){return"[object Array]"===t.call(r)}function e(r){return void 0===r}function o(r){return null!==r&&!e(r)&&null!==r.constructor&&!e(r.constructor)&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)}function i(r){return"[object ArrayBuffer]"===t.call(r)}function u(r){return"undefined"!=typeof FormData&&r instanceof FormData}function c(r){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer&&r.buffer instanceof ArrayBuffer}function f(r){return"string"==typeof r}function a(r){return"number"==typeof r}function l(r){return null!==r&&"object"==typeof r}function s(r){if("[object Object]"!==t.call(r))return!1;var n=Object.getPrototypeOf(r);return null===n||n===Object.prototype}function p(r){return"[object Date]"===t.call(r)}function d(r){return"[object File]"===t.call(r)}function y(r){return"[object Blob]"===t.call(r)}function b(r){return"[object Function]"===t.call(r)}function j(r){return l(r)&&b(r.pipe)}function m(r){return"undefined"!=typeof URLSearchParams&&r instanceof URLSearchParams}function v(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function B(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function g(r,t){if(null!=r)if("object"!=typeof r&&(r=[r]),n(r))for(var e=0,o=r.length;e<o;e++)t.call(null,r[e],e,r);else for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.call(null,r[i],i,r)}function A(){var r={};function t(t,e){s(r[e])&&s(t)?r[e]=A(r[e],t):s(t)?r[e]=A({},t):n(t)?r[e]=t.slice():r[e]=t}for(var e=0,o=arguments.length;e<o;e++)g(arguments[e],t);return r}function O(t,n,e){return g(n,function(n,o){t[o]=e&&"function"==typeof n?r(n,e):n}),t}function h(r){return 65279===r.charCodeAt(0)&&(r=r.slice(1)),r}module.exports={isArray:n,isArrayBuffer:i,isBuffer:o,isFormData:u,isArrayBufferView:c,isString:f,isNumber:a,isObject:l,isPlainObject:s,isUndefined:e,isDate:p,isFile:d,isBlob:y,isFunction:b,isStream:j,isURLSearchParams:m,isStandardBrowserEnv:B,forEach:g,merge:A,extend:O,trim:v,stripBOM:h};
},{"./helpers/bind":"nb4k"}],"RS1v":[function(require,module,exports) {
"use strict";var e=require("./../utils");function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}module.exports=function(i,n,t){if(!n)return i;var a;if(t)a=t(n);else if(e.isURLSearchParams(n))a=n.toString();else{var c=[];e.forEach(n,function(i,n){null!=i&&(e.isArray(i)?n+="[]":i=[i],e.forEach(i,function(i){e.isDate(i)?i=i.toISOString():e.isObject(i)&&(i=JSON.stringify(i)),c.push(r(n)+"="+r(i))}))}),a=c.join("&")}if(a){var o=i.indexOf("#");-1!==o&&(i=i.slice(0,o)),i+=(-1===i.indexOf("?")?"?":"&")+a}return i};
},{"./../utils":"zIVT"}],"GGkJ":[function(require,module,exports) {
"use strict";var n=require("./../utils");function e(){this.handlers=[]}e.prototype.use=function(n,e,t){return this.handlers.push({fulfilled:n,rejected:e,synchronous:!!t&&t.synchronous,runWhen:t?t.runWhen:null}),this.handlers.length-1},e.prototype.eject=function(n){this.handlers[n]&&(this.handlers[n]=null)},e.prototype.forEach=function(e){n.forEach(this.handlers,function(n){null!==n&&e(n)})},module.exports=e;
},{"./../utils":"zIVT"}],"TOXd":[function(require,module,exports) {
"use strict";var e=require("../utils");module.exports=function(t,r){e.forEach(t,function(e,o){o!==r&&o.toUpperCase()===r.toUpperCase()&&(t[r]=e,delete t[o])})};
},{"../utils":"zIVT"}],"obgR":[function(require,module,exports) {
"use strict";module.exports=function(e,i,s,t,n){return e.config=i,s&&(e.code=s),e.request=t,e.response=n,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e};
},{}],"lGrg":[function(require,module,exports) {
"use strict";var r=require("./enhanceError");module.exports=function(e,n,o,t,u){var a=new Error(e);return r(a,n,o,t,u)};
},{"./enhanceError":"obgR"}],"wZW9":[function(require,module,exports) {
"use strict";var t=require("./createError");module.exports=function(e,s,u){var a=u.config.validateStatus;u.status&&a&&!a(u.status)?s(t("Request failed with status code "+u.status,u.config,null,u.request,u)):e(u)};
},{"./createError":"lGrg"}],"OhlP":[function(require,module,exports) {
"use strict";var e=require("./../utils");module.exports=e.isStandardBrowserEnv()?{write:function(n,t,o,r,i,u){var s=[];s.push(n+"="+encodeURIComponent(t)),e.isNumber(o)&&s.push("expires="+new Date(o).toGMTString()),e.isString(r)&&s.push("path="+r),e.isString(i)&&s.push("domain="+i),!0===u&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};
},{"./../utils":"zIVT"}],"ExB0":[function(require,module,exports) {
"use strict";module.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)};
},{}],"BTlr":[function(require,module,exports) {
"use strict";module.exports=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e};
},{}],"d0lp":[function(require,module,exports) {
"use strict";var e=require("../helpers/isAbsoluteURL"),r=require("../helpers/combineURLs");module.exports=function(s,u){return s&&!e(u)?r(s,u):u};
},{"../helpers/isAbsoluteURL":"ExB0","../helpers/combineURLs":"BTlr"}],"T8HP":[function(require,module,exports) {
"use strict";var e=require("./../utils"),t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];module.exports=function(r){var i,o,n,s={};return r?(e.forEach(r.split("\n"),function(r){if(n=r.indexOf(":"),i=e.trim(r.substr(0,n)).toLowerCase(),o=e.trim(r.substr(n+1)),i){if(s[i]&&t.indexOf(i)>=0)return;s[i]="set-cookie"===i?(s[i]?s[i]:[]).concat([o]):s[i]?s[i]+", "+o:o}}),s):s};
},{"./../utils":"zIVT"}],"DmB6":[function(require,module,exports) {
"use strict";var t=require("./../utils");module.exports=t.isStandardBrowserEnv()?function(){var r,e=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");function a(t){var r=t;return e&&(o.setAttribute("href",r),r=o.href),o.setAttribute("href",r),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}return r=a(window.location.href),function(e){var o=t.isString(e)?a(e):e;return o.protocol===r.protocol&&o.host===r.host}}():function(){return!0};
},{"./../utils":"zIVT"}],"LYEs":[function(require,module,exports) {
"use strict";var e=require("./../utils"),r=require("./../core/settle"),t=require("./../helpers/cookies"),o=require("./../helpers/buildURL"),s=require("../core/buildFullPath"),n=require("./../helpers/parseHeaders"),a=require("./../helpers/isURLSameOrigin"),i=require("../core/createError");module.exports=function(u){return new Promise(function(l,d){var p=u.data,c=u.headers,f=u.responseType;e.isFormData(p)&&delete c["Content-Type"];var m=new XMLHttpRequest;if(u.auth){var h=u.auth.username||"",E=u.auth.password?unescape(encodeURIComponent(u.auth.password)):"";c.Authorization="Basic "+btoa(h+":"+E)}var T=s(u.baseURL,u.url);function R(){if(m){var e="getAllResponseHeaders"in m?n(m.getAllResponseHeaders()):null,t={data:f&&"text"!==f&&"json"!==f?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:e,config:u,request:m};r(l,d,t),m=null}}if(m.open(u.method.toUpperCase(),o(T,u.params,u.paramsSerializer),!0),m.timeout=u.timeout,"onloadend"in m?m.onloadend=R:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(R)},m.onabort=function(){m&&(d(i("Request aborted",u,"ECONNABORTED",m)),m=null)},m.onerror=function(){d(i("Network Error",u,null,m)),m=null},m.ontimeout=function(){var e="timeout of "+u.timeout+"ms exceeded";u.timeoutErrorMessage&&(e=u.timeoutErrorMessage),d(i(e,u,u.transitional&&u.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",m)),m=null},e.isStandardBrowserEnv()){var g=(u.withCredentials||a(T))&&u.xsrfCookieName?t.read(u.xsrfCookieName):void 0;g&&(c[u.xsrfHeaderName]=g)}"setRequestHeader"in m&&e.forEach(c,function(e,r){void 0===p&&"content-type"===r.toLowerCase()?delete c[r]:m.setRequestHeader(r,e)}),e.isUndefined(u.withCredentials)||(m.withCredentials=!!u.withCredentials),f&&"json"!==f&&(m.responseType=u.responseType),"function"==typeof u.onDownloadProgress&&m.addEventListener("progress",u.onDownloadProgress),"function"==typeof u.onUploadProgress&&m.upload&&m.upload.addEventListener("progress",u.onUploadProgress),u.cancelToken&&u.cancelToken.promise.then(function(e){m&&(m.abort(),d(e),m=null)}),p||(p=null),m.send(p)})};
},{"./../utils":"zIVT","./../core/settle":"wZW9","./../helpers/cookies":"OhlP","./../helpers/buildURL":"RS1v","../core/buildFullPath":"d0lp","./../helpers/parseHeaders":"T8HP","./../helpers/isURLSameOrigin":"DmB6","../core/createError":"lGrg"}],"rH1J":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"T2kP":[function(require,module,exports) {
var process = require("process");
var e=require("process"),r=require("./utils"),t=require("./helpers/normalizeHeaderName"),n=require("./core/enhanceError"),i={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function o(){var r;return"undefined"!=typeof XMLHttpRequest?r=require("./adapters/xhr"):void 0!==e&&"[object process]"===Object.prototype.toString.call(e)&&(r=require("./adapters/http")),r}function s(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(e)}var c={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:o(),transformRequest:[function(e,n){return t(n,"Accept"),t(n,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(a(n,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||n&&"application/json"===n["Content-Type"]?(a(n,"application/json"),s(e)):e}],transformResponse:[function(e){var t=this.transitional,i=t&&t.silentJSONParsing,a=t&&t.forcedJSONParsing,o=!i&&"json"===this.responseType;if(o||a&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(o){if("SyntaxError"===s.name)throw n(s,this,"E_JSON_PARSE");throw s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],function(e){c.headers[e]={}}),r.forEach(["post","put","patch"],function(e){c.headers[e]=r.merge(i)}),module.exports=c;
},{"./utils":"zIVT","./helpers/normalizeHeaderName":"TOXd","./core/enhanceError":"obgR","./adapters/xhr":"LYEs","./adapters/http":"LYEs","process":"rH1J"}],"i7gz":[function(require,module,exports) {
"use strict";var r=require("./../utils"),e=require("./../defaults");module.exports=function(t,u,i){var s=this||e;return r.forEach(i,function(r){t=r.call(s,t,u)}),t};
},{"./../utils":"zIVT","./../defaults":"T2kP"}],"C9l1":[function(require,module,exports) {
"use strict";module.exports=function(t){return!(!t||!t.__CANCEL__)};
},{}],"U2VI":[function(require,module,exports) {
"use strict";var e=require("./../utils"),r=require("./transformData"),a=require("../cancel/isCancel"),t=require("../defaults");function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}module.exports=function(n){return s(n),n.headers=n.headers||{},n.data=r.call(n,n.data,n.headers,n.transformRequest),n.headers=e.merge(n.headers.common||{},n.headers[n.method]||{},n.headers),e.forEach(["delete","get","head","post","put","patch","common"],function(e){delete n.headers[e]}),(n.adapter||t.adapter)(n).then(function(e){return s(n),e.data=r.call(n,e.data,e.headers,n.transformResponse),e},function(e){return a(e)||(s(n),e&&e.response&&(e.response.data=r.call(n,e.response.data,e.response.headers,n.transformResponse))),Promise.reject(e)})};
},{"./../utils":"zIVT","./transformData":"i7gz","../cancel/isCancel":"C9l1","../defaults":"T2kP"}],"Qj6T":[function(require,module,exports) {
"use strict";var e=require("../utils");module.exports=function(n,t){t=t||{};var r={},o=["url","method","data"],i=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function c(n,t){return e.isPlainObject(n)&&e.isPlainObject(t)?e.merge(n,t):e.isPlainObject(t)?e.merge({},t):e.isArray(t)?t.slice():t}function d(o){e.isUndefined(t[o])?e.isUndefined(n[o])||(r[o]=c(void 0,n[o])):r[o]=c(n[o],t[o])}e.forEach(o,function(n){e.isUndefined(t[n])||(r[n]=c(void 0,t[n]))}),e.forEach(i,d),e.forEach(a,function(o){e.isUndefined(t[o])?e.isUndefined(n[o])||(r[o]=c(void 0,n[o])):r[o]=c(void 0,t[o])}),e.forEach(s,function(e){e in t?r[e]=c(n[e],t[e]):e in n&&(r[e]=c(void 0,n[e]))});var f=o.concat(i).concat(a).concat(s),u=Object.keys(n).concat(Object.keys(t)).filter(function(e){return-1===f.indexOf(e)});return e.forEach(u,d),r};
},{"../utils":"zIVT"}],"fSpb":[function(require,module,exports) {
module.exports={_from:"axios@0.21.4",_id:"axios@0.21.4",_inBundle:!1,_integrity:"sha512-ut5vewkiu8jjGBdqpM44XxjuCjq9LAKeHVmoVfHVzy8eHgxxq8SbAVQNovDA8mVi05kP0Ea/n/UzcSHcTJQfNg==",_location:"/axios",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"axios@0.21.4",name:"axios",escapedName:"axios",rawSpec:"0.21.4",saveSpec:null,fetchSpec:"0.21.4"},_requiredBy:["#USER","/"],_resolved:"https://registry.npmjs.org/axios/-/axios-0.21.4.tgz",_shasum:"c67b90dc0568e5c1cf2b0b858c43ba28e2eda575",_spec:"axios@0.21.4",_where:"C:\\Users\\ANIKET\\Documents\\Web_Dev WorkSpace\\NodeJS Projects\\audiofy",author:{name:"Matt Zabriskie"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},bugs:{url:"https://github.com/axios/axios/issues"},bundleDependencies:!1,bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}],dependencies:{"follow-redirects":"^1.14.0"},deprecated:!1,description:"Promise based HTTP client for the browser and node.js",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},homepage:"https://axios-http.com",jsdelivr:"dist/axios.min.js",keywords:["xhr","http","ajax","promise","node"],license:"MIT",main:"index.js",name:"axios",repository:{type:"git",url:"git+https://github.com/axios/axios.git"},scripts:{build:"NODE_ENV=production grunt build",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",examples:"node ./examples/server.js",fix:"eslint --fix lib/**/*.js",postversion:"git push && git push --tags",preversion:"npm test",start:"node ./sandbox/server.js",test:"grunt test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},typings:"./index.d.ts",unpkg:"dist/axios.min.js",version:"0.21.4"};
},{}],"lMdc":[function(require,module,exports) {
"use strict";var r=require("./../../package.json"),n={};["object","boolean","number","function","string","symbol"].forEach(function(r,e){n[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});var e={},o=r.version.split(".");function t(r,n){for(var e=n?n.split("."):o,t=r.split("."),i=0;i<3;i++){if(e[i]>t[i])return!0;if(e[i]<t[i])return!1}return!1}function i(r,n,e){if("object"!=typeof r)throw new TypeError("options must be an object");for(var o=Object.keys(r),t=o.length;t-- >0;){var i=o[t],s=n[i];if(s){var a=r[i],u=void 0===a||s(a,i,r);if(!0!==u)throw new TypeError("option "+i+" must be "+u)}else if(!0!==e)throw Error("Unknown option "+i)}}n.transitional=function(n,o,i){var s=o&&t(o);function a(n,e){return"[Axios v"+r.version+"] Transitional option '"+n+"'"+e+(i?". "+i:"")}return function(r,t,i){if(!1===n)throw new Error(a(t," has been removed in "+o));return s&&!e[t]&&(e[t]=!0,console.warn(a(t," has been deprecated since v"+o+" and will be removed in the near future"))),!n||n(r,t,i)}},module.exports={isOlderVersion:t,assertOptions:i,validators:n};
},{"./../../package.json":"fSpb"}],"RB6n":[function(require,module,exports) {
"use strict";var t=require("./../utils"),e=require("../helpers/buildURL"),r=require("./InterceptorManager"),o=require("./dispatchRequest"),i=require("./mergeConfig"),n=require("../helpers/validator"),s=n.validators;function a(t){this.defaults=t,this.interceptors={request:new r,response:new r}}a.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=i(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=t.transitional;void 0!==e&&n.assertOptions(e,{silentJSONParsing:s.transitional(s.boolean,"1.0.0"),forcedJSONParsing:s.transitional(s.boolean,"1.0.0"),clarifyTimeoutError:s.transitional(s.boolean,"1.0.0")},!1);var r=[],a=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,r.unshift(e.fulfilled,e.rejected))});var u,h=[];if(this.interceptors.response.forEach(function(t){h.push(t.fulfilled,t.rejected)}),!a){var f=[o,void 0];for(Array.prototype.unshift.apply(f,r),f=f.concat(h),u=Promise.resolve(t);f.length;)u=u.then(f.shift(),f.shift());return u}for(var l=t;r.length;){var c=r.shift(),p=r.shift();try{l=c(l)}catch(d){p(d);break}}try{u=o(l)}catch(d){return Promise.reject(d)}for(;h.length;)u=u.then(h.shift(),h.shift());return u},a.prototype.getUri=function(t){return t=i(this.defaults,t),e(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},t.forEach(["delete","get","head","options"],function(t){a.prototype[t]=function(e,r){return this.request(i(r||{},{method:t,url:e,data:(r||{}).data}))}}),t.forEach(["post","put","patch"],function(t){a.prototype[t]=function(e,r,o){return this.request(i(o||{},{method:t,url:e,data:r}))}}),module.exports=a;
},{"./../utils":"zIVT","../helpers/buildURL":"RS1v","./InterceptorManager":"GGkJ","./dispatchRequest":"U2VI","./mergeConfig":"Qj6T","../helpers/validator":"lMdc"}],"RlDD":[function(require,module,exports) {
"use strict";function t(t){this.message=t}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,module.exports=t;
},{}],"VWBb":[function(require,module,exports) {
"use strict";var e=require("./Cancel");function n(n){if("function"!=typeof n)throw new TypeError("executor must be a function.");var o;this.promise=new Promise(function(e){o=e});var r=this;n(function(n){r.reason||(r.reason=new e(n),o(r.reason))})}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var e;return{token:new n(function(n){e=n}),cancel:e}},module.exports=n;
},{"./Cancel":"RlDD"}],"Kbjq":[function(require,module,exports) {
"use strict";module.exports=function(n){return function(t){return n.apply(null,t)}};
},{}],"NLsH":[function(require,module,exports) {
"use strict";module.exports=function(o){return"object"==typeof o&&!0===o.isAxiosError};
},{}],"HXpE":[function(require,module,exports) {
"use strict";var e=require("./utils"),r=require("./helpers/bind"),i=require("./core/Axios"),n=require("./core/mergeConfig"),u=require("./defaults");function o(n){var u=new i(n),o=r(i.prototype.request,u);return e.extend(o,i.prototype,u),e.extend(o,u),o}var l=o(u);l.Axios=i,l.create=function(e){return o(n(l.defaults,e))},l.Cancel=require("./cancel/Cancel"),l.CancelToken=require("./cancel/CancelToken"),l.isCancel=require("./cancel/isCancel"),l.all=function(e){return Promise.all(e)},l.spread=require("./helpers/spread"),l.isAxiosError=require("./helpers/isAxiosError"),module.exports=l,module.exports.default=l;
},{"./utils":"zIVT","./helpers/bind":"nb4k","./core/Axios":"RB6n","./core/mergeConfig":"Qj6T","./defaults":"T2kP","./cancel/Cancel":"RlDD","./cancel/CancelToken":"VWBb","./cancel/isCancel":"C9l1","./helpers/spread":"Kbjq","./helpers/isAxiosError":"NLsH"}],"uj17":[function(require,module,exports) {
module.exports=require("./lib/axios");
},{"./lib/axios":"HXpE"}],"LVu9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.API=void 0;var e=r(require("axios"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e,r,n,t,u,a,o){try{var c=e[a](o),s=c.value}catch(i){return void n(i)}c.done?r(s):Promise.resolve(s).then(t,u)}function t(e){return function(){var r=this,t=arguments;return new Promise(function(u,a){var o=e.apply(r,t);function c(e){n(o,u,a,c,s,"next",e)}function s(e){n(o,u,a,c,s,"throw",e)}c(void 0)})}}function u(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function a(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var o=function e(){u(this,e)};exports.API=o,a(o,"albumEndpoint","/api/v1/albums"),a(o,"trackEndpoint","/api/v1/tracks"),a(o,"userEndpoint","/api/v1/users"),a(o,"adminEndpoint","/admin"),a(o,"requestAPI",function(r,n,t){return(0,e.default)({url:r,method:n,data:t})}),a(o,"getAlbums",function(){var e=t(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.requestAPI("".concat(o.albumEndpoint,"?page=").concat(r),"GET",null);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}()),a(o,"getAlbumSearchResult",function(){var e=t(regeneratorRuntime.mark(function e(r,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.requestAPI("".concat(o.albumEndpoint,"/search?").concat(r,"&page=").concat(n),"GET",null);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(r,n){return e.apply(this,arguments)}}()),a(o,"getAlbum",function(){var e=t(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.requestAPI("".concat(o.albumEndpoint,"/").concat(r),"GET",null);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}()),a(o,"getForgotPassword",function(){var e=t(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.requestAPI("".concat(o.userEndpoint,"/forgotPassword"),"POST",{email:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}()),a(o,"getResetPassword",function(){var e=t(regeneratorRuntime.mark(function e(r,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.requestAPI("".concat(o.userEndpoint,"/resetPassword/").concat(r),"POST",{password:n[0],passwordConfirm:n[1]});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(r,n){return e.apply(this,arguments)}}()),a(o,"getLogin",function(){var e=t(regeneratorRuntime.mark(function e(r,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.requestAPI("".concat(o.userEndpoint,"/login"),"POST",{email:r,password:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(r,n){return e.apply(this,arguments)}}()),a(o,"getLogout",t(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.requestAPI("".concat(o.userEndpoint,"/logout"),"GET",null);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))),a(o,"getSignupVerify",function(){var e=t(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.requestAPI("".concat(o.userEndpoint,"/signup"),"POST",{email:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}()),a(o,"getSignup",function(){var e=t(regeneratorRuntime.mark(function e(r,n,t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o.requestAPI("".concat(o.userEndpoint,"/signup/").concat(r,"/").concat(n),"POST",{name:t[0],password:t[1],passwordConfirm:t[2]});case 1:case"end":return e.stop()}},e)}));return function(r,n,t){return e.apply(this,arguments)}}()),a(o,"getSignAndUpload",function(){var e=t(regeneratorRuntime.mark(function e(r,n,t){var u,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.requestAPI("".concat(o.adminEndpoint,"/auth/sign-s3"),"POST",{fileName:n,fileType:t});case 3:return u=e.sent,a=JSON.parse(u.data.signedResponse),e.next=7,o.requestAPI(a.signedUrl,"PUT",r);case 7:return e.abrupt("return",a.fileUrl);case 10:throw e.prev=10,e.t0=e.catch(0),new Error("Failed to upload the file!");case 13:case"end":return e.stop()}},e,null,[[0,10]])}));return function(r,n,t){return e.apply(this,arguments)}}()),a(o,"getUploadTrack",function(){var e=t(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.requestAPI(o.trackEndpoint,"POST",r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}()),a(o,"getUploadAlbum",function(){var e=t(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.getUploadTrack(r.tracks);case 3:return r.tracks=e.sent.data.data.doc.map(function(e){return e._id}),e.next=6,o.requestAPI(o.albumEndpoint,"POST",r);case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),new Error("Failed to update the database!");case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(r){return e.apply(this,arguments)}}());
},{"axios":"uj17"}],"FOZT":[function(require,module,exports) {
"use strict";function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function n(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Utils=void 0;var r=function n(){t(this,n)};exports.Utils=r,n(r,"formatTrackTitleString",function(t){var n=t.split("Audiofy")[0];return n.length>15&&("-"===(n=n.substr(0,15)).charAt(n.length-1)&&(n=n.substr(0,n.length-1)),n+="..."),n}),n(r,"formatArtistString",function(t){return t.length>20&&("-"===(t=t.substr(0,20)).charAt(t.length-1)&&(t=t.substr(0,t.length-1)),t+="..."),t}),n(r,"parseDuration",function(t){var n=Math.floor(t),r=Math.floor(n/60),e=n%60;return 1==="".concat(r).length&&(r="0".concat(r)),1==="".concat(e).length&&(e="0".concat(e)),"".concat(r,":").concat(e)}),n(r,"dispatchTimer",function(t,n){return setTimeout(t,n)}),n(r,"formatAlbumTitle",function(t){var n=t.split("-")[0];return n.length>15?"".concat(n.substr(0,15),"..."):n}),n(r,"getPaginationRange",function(t){for(var n=t,r=t;n%5!=1;)n--;for(;r%5!=0;)r++;return[n,r]}),n(r,"calcPercent",function(t,n){return Math.floor(t/n*100)}),n(r,"getPageId",{index:0,albums:1,tracks:2,user_account:3,search:4});
},{}],"cGmI":[function(require,module,exports) {
"use strict";function e(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function o(e,o,r){return o in e?Object.defineProperty(e,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[o]=r,e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Loader=void 0;var r=function o(){e(this,o)};exports.Loader=r,o(r,"showLoader",function(e){$("#loader-text").text(e),$("#loader").modal("show")}),o(r,"hideLoader",function(){$("#loader").modal("hide")});
},{}],"acK6":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Alert=void 0;var r=function t(){e(this,t)};exports.Alert=r,t(r,"showAlert",function(e,t){r.hideAlert(),document.querySelector("#alert-body").classList.value=document.querySelector("#alert-body").classList.toString().replace(/bg-[\w]+/g,""),"success"===e?document.querySelector("#alert-body").classList.add("bg-success"):"error"===e&&document.querySelector("#alert-body").classList.add("bg-danger"),$("#alert-text").text(t),$("#alert").modal("show")}),t(r,"hideAlert",function(){$("#alert").modal("hide")});
},{}],"guJX":[function(require,module,exports) {
"use strict";function r(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function e(r,e,o){return e in r?Object.defineProperty(r,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[e]=o,r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ProgressBar=void 0;var o=function e(){r(this,e)};exports.ProgressBar=o,e(o,"showProgress",function(r,e){$("#progress-text").text(r),$(".progress-bar").attr("style","width: ".concat(e,"%")),$(".progress-bar").text("".concat(e,"%")),$("#progress").modal("show")}),e(o,"hideProgress",function(){$("#progress").modal("hide")});
},{}],"Y7xD":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function n(t){var e=i();return function(){var r,n=l(t);if(e){var u=l(this).constructor;r=Reflect.construct(n,arguments,u)}else r=n.apply(this,arguments);return o(this,r)}}function o(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?u(e):r}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){var e="function"==typeof Map?new Map:void 0;return(c=function(t){if(null===t||!s(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return f(t,arguments,l(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),a(r,t)})(t)}function f(t,e,r){return(f=i()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&a(o,r.prototype),o}).apply(null,arguments)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function s(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.EndOfStreamError=exports.defaultMessages=void 0,exports.defaultMessages="End-Of-Stream";var p=function(t){r(u,c(Error));var o=n(u);function u(){return e(this,u),o.call(this,exports.defaultMessages)}return u}();exports.EndOfStreamError=p;
},{}],"IQaa":[function(require,module,exports) {
"use strict";function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Deferred=void 0;var r=function r(){var t=this;e(this,r),this.resolve=function(){return null},this.reject=function(){return null},this.promise=new Promise(function(e,r){t.reject=r,t.resolve=e})};exports.Deferred=r;
},{}],"aKzk":[function(require,module,exports) {
"use strict";function e(e,r,t,n,a,u,i){try{var s=e[u](i),o=s.value}catch(f){return void t(f)}s.done?r(o):Promise.resolve(o).then(n,a)}function r(r){return function(){var t=this,n=arguments;return new Promise(function(a,u){var i=r.apply(t,n);function s(r){e(i,a,u,s,o,"next",r)}function o(r){e(i,a,u,s,o,"throw",r)}s(void 0)})}}function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function n(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.StreamReader=exports.EndOfStreamError=void 0;var u=require("./EndOfFileStream"),i=require("./Deferred"),s=require("./EndOfFileStream");Object.defineProperty(exports,"EndOfStreamError",{enumerable:!0,get:function(){return s.EndOfStreamError}});var o=1048576,f=function(){function e(r){var n=this;if(t(this,e),this.s=r,this.deferred=null,this.endOfStream=!1,this.peekQueue=[],!r.read||!r.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",function(){return n.reject(new u.EndOfStreamError)}),this.s.once("error",function(e){return n.reject(e)}),this.s.once("close",function(){return n.reject(new Error("Stream closed"))})}return a(e,[{key:"peek",value:function(){var e=r(regeneratorRuntime.mark(function e(r,t,n){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.read(r,t,n);case 2:return a=e.sent,this.peekQueue.push(r.subarray(t,t+a)),e.abrupt("return",a);case 5:case"end":return e.stop()}},e,this)}));return function(r,t,n){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=r(regeneratorRuntime.mark(function e(r,t,n){var a,i,s,f,c,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n){e.next=2;break}return e.abrupt("return",0);case 2:if(0!==this.peekQueue.length||!this.endOfStream){e.next=4;break}throw new u.EndOfStreamError;case 4:a=n,i=0;case 6:if(!(this.peekQueue.length>0&&a>0)){e.next=17;break}if(s=this.peekQueue.pop()){e.next=10;break}throw new Error("peekData should be defined");case 10:f=Math.min(s.length,a),r.set(s.subarray(0,f),t+i),i+=f,a-=f,f<s.length&&this.peekQueue.push(s.subarray(f)),e.next=6;break;case 17:if(!(a>0)||this.endOfStream){e.next=28;break}return c=Math.min(a,o),e.next=21,this.readFromStream(r,t+i,c);case 21:if(d=e.sent,i+=d,!(d<c)){e.next=25;break}return e.abrupt("break",28);case 25:a-=d,e.next=17;break;case 28:return e.abrupt("return",i);case 29:case"end":return e.stop()}},e,this)}));return function(r,t,n){return e.apply(this,arguments)}}()},{key:"readFromStream",value:function(){var e=r(regeneratorRuntime.mark(function e(r,t,n){var a,u,s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=this.s.read(n))){e.next=6;break}return r.set(a,t),e.abrupt("return",a.length);case 6:return u={buffer:r,offset:t,length:n,deferred:new i.Deferred},this.deferred=u.deferred,this.s.once("readable",function(){s.readDeferred(u)}),e.abrupt("return",u.deferred.promise);case 10:case"end":return e.stop()}},e,this)}));return function(r,t,n){return e.apply(this,arguments)}}()},{key:"readDeferred",value:function(e){var r=this,t=this.s.read(e.length);t?(e.buffer.set(t,e.offset),e.deferred.resolve(t.length),this.deferred=null):this.s.once("readable",function(){r.readDeferred(e)})}},{key:"reject",value:function(e){this.endOfStream=!0,this.deferred&&(this.deferred.reject(e),this.deferred=null)}}]),e}();exports.StreamReader=f;
},{"./EndOfFileStream":"Y7xD","./Deferred":"IQaa"}],"p0xv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StreamReader=exports.EndOfStreamError=void 0;var e=require("./EndOfFileStream");Object.defineProperty(exports,"EndOfStreamError",{enumerable:!0,get:function(){return e.EndOfStreamError}});var r=require("./StreamReader");Object.defineProperty(exports,"StreamReader",{enumerable:!0,get:function(){return r.StreamReader}});
},{"./EndOfFileStream":"Y7xD","./StreamReader":"aKzk"}],"QAnv":[function(require,module,exports) {
"use strict";exports.byteLength=u,exports.toByteArray=i,exports.fromByteArray=d;for(var r=[],t=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function h(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}function u(r){var t=h(r),e=t[0],n=t[1];return 3*(e+n)/4-n}function c(r,t,e){return 3*(t+e)/4-e}function i(r){var n,o,a=h(r),u=a[0],i=a[1],f=new e(c(r,u,i)),A=0,d=i>0?u-4:u;for(o=0;o<d;o+=4)n=t[r.charCodeAt(o)]<<18|t[r.charCodeAt(o+1)]<<12|t[r.charCodeAt(o+2)]<<6|t[r.charCodeAt(o+3)],f[A++]=n>>16&255,f[A++]=n>>8&255,f[A++]=255&n;return 2===i&&(n=t[r.charCodeAt(o)]<<2|t[r.charCodeAt(o+1)]>>4,f[A++]=255&n),1===i&&(n=t[r.charCodeAt(o)]<<10|t[r.charCodeAt(o+1)]<<4|t[r.charCodeAt(o+2)]>>2,f[A++]=n>>8&255,f[A++]=255&n),f}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function A(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return o.join("")}function d(t){for(var e,n=t.length,o=n%3,a=[],h=0,u=n-o;h<u;h+=16383)a.push(A(t,h,h+16383>u?u:h+16383));return 1===o?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;
},{}],"O1Qa":[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],"ZCp3":[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],"fe91":[function(require,module,exports) {

var global = arguments[3];
var t=arguments[3],r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(r){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?g(t,r,e,n):"string"==typeof r?l(t,r,e):y(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,r,e,n){return h(r),r<=0?u(t,r):void 0!==e?"string"==typeof n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function c(t,r){if(h(r),t=u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(r,e),i=(t=u(t,n)).write(r,e);return i!==n&&(t=t.slice(0,i)),t}function p(t,r){var e=r.length<0?0:0|w(r.length);t=u(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function g(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=p(t,r),t}function y(t,r){if(f.isBuffer(r)){var e=0|w(r.length);return 0===(t=u(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||W(r.length)?u(t,0):p(t,r);if("Buffer"===r.type&&n(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=f.from(r,n)),f.isBuffer(r))return 0===r.length?-1:_(t,r,e,n,i);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,n,i){var o,u=1,f=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function h(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(i){var a=-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*u}else-1!==a&&(o-=o-a),a=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function A(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var f=parseInt(r.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,r,e,n){return Q($(r,t.length-e),t,e,n)}function P(t,r,e,n){return Q(G(r),t,e,n)}function T(t,r,e,n){return P(t,r,e,n)}function B(t,r,e,n){return Q(K(r),t,e,n)}function U(t,r,e,n){return Q(H(r,t.length-e),t,e,n)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function Y(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,u,f,s,h=t[i],a=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)b(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)b(this,r,r+3),b(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)b(this,r,r+7),b(this,r+1,r+6),b(this,r+2,r+5),b(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Y(this,0,t):E.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return o<u?-1:u<o?1:0},f.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return R(this,t,r,e,!0)},f.prototype.lastIndexOf=function(t,r,e){return R(this,t,r,e,!1)},f.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function x(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Z(t[o]);return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,n,i,o){return o||F(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function q(t,r,n,i,o){return o||F(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice=function(t,r){var e,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i=r-t;e=new f(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},f.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},f.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||M(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(t,r){r||M(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(t,r){return r||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},f.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},f.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u=f.isBuffer(t)?t:$(new f(t,n).toString()),s=u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function H(t,r){for(var e,n,i,o=[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))>>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":"QAnv","ieee754":"O1Qa","isarray":"ZCp3","buffer":"fe91"}],"wPP6":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function r(e,r,t,n,i,o,u){try{var a=e[o](u),s=a.value}catch(f){return void t(f)}a.done?r(s):Promise.resolve(s).then(n,i)}function t(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var u=e.apply(t,n);function a(e){r(u,i,o,a,s,"next",e)}function s(e){r(u,i,o,a,s,"throw",e)}a(void 0)})}}function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function i(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,r,t){return r&&i(e.prototype,r),t&&i(e,t),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AbstractTokenizer=void 0;var u=require("peek-readable"),a=function(){function r(e){n(this,r),this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=e||{}}return o(r,[{key:"readToken",value:function(){var r=t(regeneratorRuntime.mark(function r(t){var n,i,o=arguments;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:this.position,i=e.alloc(t.len),r.next=4,this.readBuffer(i,{position:n});case 4:if(!(r.sent<t.len)){r.next=7;break}throw new u.EndOfStreamError;case 7:return r.abrupt("return",t.get(i,0));case 8:case"end":return r.stop()}},r,this)}));return function(e){return r.apply(this,arguments)}}()},{key:"peekToken",value:function(){var r=t(regeneratorRuntime.mark(function r(t){var n,i,o=arguments;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:this.position,i=e.alloc(t.len),r.next=4,this.peekBuffer(i,{position:n});case 4:if(!(r.sent<t.len)){r.next=7;break}throw new u.EndOfStreamError;case 7:return r.abrupt("return",t.get(i,0));case 8:case"end":return r.stop()}},r,this)}));return function(e){return r.apply(this,arguments)}}()},{key:"readNumber",value:function(){var e=t(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.readBuffer(this.numBuffer,{length:r.len});case 2:if(!(e.sent<r.len)){e.next=5;break}throw new u.EndOfStreamError;case 5:return e.abrupt("return",r.get(this.numBuffer,0));case 6:case"end":return e.stop()}},e,this)}));return function(r){return e.apply(this,arguments)}}()},{key:"peekNumber",value:function(){var e=t(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.peekBuffer(this.numBuffer,{length:r.len});case 2:if(!(e.sent<r.len)){e.next=5;break}throw new u.EndOfStreamError;case 5:return e.abrupt("return",r.get(this.numBuffer,0));case 6:case"end":return e.stop()}},e,this)}));return function(r){return e.apply(this,arguments)}}()},{key:"ignore",value:function(){var e=t(regeneratorRuntime.mark(function e(r){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.fileInfo.size){e.next=5;break}if(t=this.fileInfo.size-this.position,!(r>t)){e.next=5;break}return this.position+=t,e.abrupt("return",t);case 5:return this.position+=r,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,this)}));return function(r){return e.apply(this,arguments)}}()},{key:"close",value:function(){var e=t(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"normalizeOptions",value:function(e,r){if(r&&void 0!==r.position&&r.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return r?{mayBeLess:!0===r.mayBeLess,offset:r.offset?r.offset:0,length:r.length?r.length:e.length-(r.offset?r.offset:0),position:r.position?r.position:this.position}:{mayBeLess:!1,offset:0,length:e.length,position:this.position}}}]),r}();exports.AbstractTokenizer=a;
},{"peek-readable":"p0xv","buffer":"fe91"}],"X1ri":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,r,n,o,a,i){try{var u=e[a](i),s=u.value}catch(c){return void r(c)}u.done?t(s):Promise.resolve(s).then(n,o)}function r(e){return function(){var r=this,n=arguments;return new Promise(function(o,a){var i=e.apply(r,n);function u(e){t(i,o,a,u,s,"next",e)}function s(e){t(i,o,a,u,s,"throw",e)}u(void 0)})}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=p();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?f(t):r}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReadStreamTokenizer=void 0;var h=require("./AbstractTokenizer"),b=require("peek-readable"),y=256e3,m=function(e){i(o,h.AbstractTokenizer);var t=s(o);function o(e,r){var a;return n(this,o),(a=t.call(this,r)).streamReader=new b.StreamReader(e),a}return a(o,[{key:"getFileInfo",value:function(){var e=r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fileInfo);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"readBuffer",value:function(){var e=r(regeneratorRuntime.mark(function e(t,r){var n,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.normalizeOptions(t,r),!((o=n.position-this.position)>0)){e.next=8;break}return e.next=5,this.ignore(o);case 5:return e.abrupt("return",this.readBuffer(t,r));case 8:if(!(o<0)){e.next=10;break}throw new Error("`options.position` must be equal or greater than `tokenizer.position`");case 10:if(0!==n.length){e.next=12;break}return e.abrupt("return",0);case 12:return e.next=14,this.streamReader.read(t,n.offset,n.length);case 14:if(a=e.sent,this.position+=a,r&&r.mayBeLess||!(a<n.length)){e.next=18;break}throw new b.EndOfStreamError;case 18:return e.abrupt("return",a);case 19:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"peekBuffer",value:function(){var e=r(regeneratorRuntime.mark(function e(t,r){var n,o,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.normalizeOptions(t,r),o=0,!n.position){e.next=15;break}if(!((a=n.position-this.position)>0)){e.next=13;break}return i=new Uint8Array(n.length+a),e.next=8,this.peekBuffer(i,{mayBeLess:n.mayBeLess});case 8:return o=e.sent,t.set(i.subarray(a),n.offset),e.abrupt("return",o-a);case 13:if(!(a<0)){e.next=15;break}throw new Error("Cannot peek from a negative offset in a stream");case 15:if(!(n.length>0)){e.next=29;break}return e.prev=16,e.next=19,this.streamReader.peek(t,n.offset,n.length);case 19:o=e.sent,e.next=27;break;case 22:if(e.prev=22,e.t0=e.catch(16),!(r&&r.mayBeLess&&e.t0 instanceof b.EndOfStreamError)){e.next=26;break}return e.abrupt("return",0);case 26:throw e.t0;case 27:if(n.mayBeLess||!(o<n.length)){e.next=29;break}throw new b.EndOfStreamError;case 29:return e.abrupt("return",o);case 30:case"end":return e.stop()}},e,this,[[16,22]])}));return function(t,r){return e.apply(this,arguments)}}()},{key:"ignore",value:function(){var e=r(regeneratorRuntime.mark(function e(t){var r,n,o,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=Math.min(y,t),n=new Uint8Array(r),o=0;case 3:if(!(o<t)){e.next=13;break}return a=t-o,e.next=7,this.readBuffer(n,{length:Math.min(r,a)});case 7:if(!((i=e.sent)<0)){e.next=10;break}return e.abrupt("return",i);case 10:o+=i,e.next=3;break;case 13:return e.abrupt("return",o);case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),o}();exports.ReadStreamTokenizer=m;
},{"./AbstractTokenizer":"wPP6","peek-readable":"p0xv"}],"lait":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,r,n,o,i,u){try{var c=e[i](u),f=c.value}catch(a){return void r(a)}c.done?t(f):Promise.resolve(f).then(n,o)}function r(e){return function(){var r=this,n=arguments;return new Promise(function(o,i){var u=e.apply(r,n);function c(e){t(u,o,i,c,f,"next",e)}function f(e){t(u,o,i,c,f,"throw",e)}c(void 0)})}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=p();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?s(t):r}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.BufferTokenizer=void 0;var y=require("peek-readable"),h=require("./AbstractTokenizer"),b=function(e){u(o,h.AbstractTokenizer);var t=f(o);function o(e,r){var i;return n(this,o),(i=t.call(this,r)).uint8Array=e,i.fileInfo.size=i.fileInfo.size?i.fileInfo.size:e.length,i}return i(o,[{key:"readBuffer",value:function(){var e=r(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r||!r.position){e.next=4;break}if(!(r.position<this.position)){e.next=3;break}throw new Error("`options.position` must be equal or greater than `tokenizer.position`");case 3:this.position=r.position;case 4:return e.next=6,this.peekBuffer(t,r);case 6:return n=e.sent,this.position+=n,e.abrupt("return",n);case 9:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"peekBuffer",value:function(){var e=r(regeneratorRuntime.mark(function e(t,r){var n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.normalizeOptions(t,r),o=Math.min(this.uint8Array.length-n.position,n.length),n.mayBeLess||!(o<n.length)){e.next=6;break}throw new y.EndOfStreamError;case 6:return t.set(this.uint8Array.subarray(n.position,n.position+o),n.offset),e.abrupt("return",o);case 8:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"close",value:function(){var e=r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}]),o}();exports.BufferTokenizer=b;
},{"peek-readable":"p0xv","./AbstractTokenizer":"wPP6"}],"R0T4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromBuffer=exports.fromStream=exports.EndOfStreamError=void 0;var e=require("./ReadStreamTokenizer"),r=require("./BufferTokenizer"),t=require("peek-readable");function o(r,t){return t=t||{},new e.ReadStreamTokenizer(r,t)}function n(e,t){return new r.BufferTokenizer(e,t)}Object.defineProperty(exports,"EndOfStreamError",{enumerable:!0,get:function(){return t.EndOfStreamError}}),exports.fromStream=o,exports.fromBuffer=n;
},{"./ReadStreamTokenizer":"X1ri","./BufferTokenizer":"lait","peek-readable":"p0xv"}],"No44":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var t=require("buffer").Buffer;function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AnsiStringType=exports.StringType=exports.BufferType=exports.Uint8ArrayType=exports.IgnoreType=exports.Float80_LE=exports.Float80_BE=exports.Float64_LE=exports.Float64_BE=exports.Float32_LE=exports.Float32_BE=exports.Float16_LE=exports.Float16_BE=exports.INT64_BE=exports.UINT64_BE=exports.INT64_LE=exports.UINT64_LE=exports.INT32_LE=exports.INT32_BE=exports.INT24_BE=exports.INT24_LE=exports.INT16_LE=exports.INT16_BE=exports.INT8=exports.UINT32_BE=exports.UINT32_LE=exports.UINT24_BE=exports.UINT24_LE=exports.UINT16_BE=exports.UINT16_LE=exports.UINT8=void 0;var o=require("ieee754");function u(t){return new DataView(t.buffer,t.byteOffset)}exports.UINT8={len:1,get:function(t,e){return u(t).getUint8(e)},put:function(t,e,n){return u(t).setUint8(e,n),e+1}},exports.UINT16_LE={len:2,get:function(t,e){return u(t).getUint16(e,!0)},put:function(t,e,n){return u(t).setUint16(e,n,!0),e+2}},exports.UINT16_BE={len:2,get:function(t,e){return u(t).getUint16(e)},put:function(t,e,n){return u(t).setUint16(e,n),e+2}},exports.UINT24_LE={len:3,get:function(t,e){var n=u(t);return n.getUint8(e)+(n.getUint16(e+1,!0)<<8)},put:function(t,e,n){var r=u(t);return r.setUint8(e,255&n),r.setUint16(e+1,n>>8,!0),e+3}},exports.UINT24_BE={len:3,get:function(t,e){var n=u(t);return(n.getUint16(e)<<8)+n.getUint8(e+2)},put:function(t,e,n){var r=u(t);return r.setUint16(e,n>>8),r.setUint8(e+2,255&n),e+3}},exports.UINT32_LE={len:4,get:function(t,e){return u(t).getUint32(e,!0)},put:function(t,e,n){return u(t).setUint32(e,n,!0),e+4}},exports.UINT32_BE={len:4,get:function(t,e){return u(t).getUint32(e)},put:function(t,e,n){return u(t).setUint32(e,n),e+4}},exports.INT8={len:1,get:function(t,e){return u(t).getInt8(e)},put:function(t,e,n){return u(t).setInt8(e,n),e+2}},exports.INT16_BE={len:2,get:function(t,e){return u(t).getInt16(e)},put:function(t,e,n){return u(t).setInt16(e,n),e+2}},exports.INT16_LE={len:2,get:function(t,e){return u(t).getInt16(e,!0)},put:function(t,e,n){return u(t).setInt16(e,n,!0),e+2}},exports.INT24_LE={len:3,get:function(t,e){var n=exports.UINT24_LE.get(t,e);return n>8388607?n-16777216:n},put:function(t,e,n){var r=u(t);return r.setUint8(e,255&n),r.setUint16(e+1,n>>8,!0),e+3}},exports.INT24_BE={len:3,get:function(t,e){var n=exports.UINT24_BE.get(t,e);return n>8388607?n-16777216:n},put:function(t,e,n){var r=u(t);return r.setUint16(e,n>>8),r.setUint8(e+2,255&n),e+3}},exports.INT32_BE={len:4,get:function(t,e){return u(t).getInt32(e)},put:function(t,e,n){return u(t).setInt32(e,n),e+4}},exports.INT32_LE={len:4,get:function(t,e){return u(t).getInt32(e,!0)},put:function(t,e,n){return u(t).setInt32(e,n,!0),e+4}},exports.UINT64_LE={len:8,get:function(t,e){return u(t).getBigUint64(e,!0)},put:function(t,e,n){return u(t).setBigUint64(e,n,!0),e+8}},exports.INT64_LE={len:8,get:function(t,e){return u(t).getBigInt64(e,!0)},put:function(t,e,n){return u(t).setBigInt64(e,n,!0),e+8}},exports.UINT64_BE={len:8,get:function(t,e){return u(t).getBigUint64(e)},put:function(t,e,n){return u(t).setBigUint64(e,n),e+8}},exports.INT64_BE={len:8,get:function(t,e){return u(t).getBigInt64(e)},put:function(t,e,n){return u(t).setBigInt64(e,n),e+8}},exports.Float16_BE={len:2,get:function(t,e){return o.read(t,e,!1,10,this.len)},put:function(t,e,n){return o.write(t,n,e,!1,10,this.len),e+this.len}},exports.Float16_LE={len:2,get:function(t,e){return o.read(t,e,!0,10,this.len)},put:function(t,e,n){return o.write(t,n,e,!0,10,this.len),e+this.len}},exports.Float32_BE={len:4,get:function(t,e){return u(t).getFloat32(e)},put:function(t,e,n){return u(t).setFloat32(e,n),e+4}},exports.Float32_LE={len:4,get:function(t,e){return u(t).getFloat32(e,!0)},put:function(t,e,n){return u(t).setFloat32(e,n,!0),e+4}},exports.Float64_BE={len:8,get:function(t,e){return u(t).getFloat64(e)},put:function(t,e,n){return u(t).setFloat64(e,n),e+8}},exports.Float64_LE={len:8,get:function(t,e){return u(t).getFloat64(e,!0)},put:function(t,e,n){return u(t).setFloat64(e,n,!0),e+8}},exports.Float80_BE={len:10,get:function(t,e){return o.read(t,e,!1,63,this.len)},put:function(t,e,n){return o.write(t,n,e,!1,63,this.len),e+this.len}},exports.Float80_LE={len:10,get:function(t,e){return o.read(t,e,!0,63,this.len)},put:function(t,e,n){return o.write(t,n,e,!0,63,this.len),e+this.len}};var i=function(){function t(n){e(this,t),this.len=n}return r(t,[{key:"get",value:function(t,e){}}]),t}();exports.IgnoreType=i;var s=function(){function t(n){e(this,t),this.len=n}return r(t,[{key:"get",value:function(t,e){return t.subarray(e,e+this.len)}}]),t}();exports.Uint8ArrayType=s;var p=function(){function n(t){e(this,n),this.len=t}return r(n,[{key:"get",value:function(e,n){return t.from(e.subarray(n,n+this.len))}}]),n}();exports.BufferType=p;var f=function(){function n(t,r){e(this,n),this.len=t,this.encoding=r}return r(n,[{key:"get",value:function(e,n){return t.from(e).toString(this.encoding,n,n+this.len)}}]),n}();exports.StringType=f;var l=function(){function t(n){e(this,t),this.len=n}return r(t,[{key:"get",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.decode(e,n,n+this.len)}}],[{key:"decode",value:function(e,n,r){for(var o="",u=n;u<r;++u)o+=t.codePointToString(t.singleByteDecoder(e[u]));return o}},{key:"inRange",value:function(t,e,n){return e<=t&&t<=n}},{key:"codePointToString",value:function(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}},{key:"singleByteDecoder",value:function(e){if(t.inRange(e,0,127))return e;var n=t.windows1252[e-128];if(null===n)throw Error("invaliding encoding");return n}}]),t}();exports.AnsiStringType=l,l.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255];
},{"ieee754":"O1Qa","buffer":"fe91"}],"djAR":[function(require,module,exports) {
"use strict";function r(r){return o(r)||e(r)||n(r)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(r,t){if(r){if("string"==typeof r)return a(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(r,t):void 0}}function e(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}function o(r){if(Array.isArray(r))return a(r)}function a(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}exports.stringToBytes=function(t){return r(t).map(function(r){return r.charCodeAt(0)})},exports.tarHeaderChecksumMatches=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=parseInt(r.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(isNaN(n))return!1;for(var e=256,o=t;o<t+148;o++)e+=r[o];for(var a=t+156;a<t+512;a++)e+=r[a];return n===e},exports.uint32SyncSafeToken={get:function(r,t){return 127&r[t+3]|r[t+2]<<7|r[t+1]<<14|r[t]<<21},len:4};
},{}],"tFVr":[function(require,module,exports) {
"use strict";module.exports={extensions:["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd"]};
},{}],"fUph":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var Buffer=require("buffer").Buffer;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _slicedToArray(e,r){return _arrayWithHoles(e)||_iterableToArrayLimit(e,r)||_unsupportedIterableToArray(e,r)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,a,i=[],u=!0,o=!1;try{for(t=t.call(e);!(u=(n=t.next()).done)&&(i.push(n.value),!r||i.length!==r);u=!0);}catch(s){o=!0,a=s}finally{try{u||null==t.return||t.return()}finally{if(o)throw a}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _createForOfIteratorHelper(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=_unsupportedIterableToArray(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,o=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return u=e.done,e},e:function(e){o=!0,i=e},f:function(){try{u||null==t.return||t.return()}finally{if(o)throw i}}}}function _unsupportedIterableToArray(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,r):void 0}}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function asyncGeneratorStep(e,r,t,n,a,i,u){try{var o=e[i](u),s=o.value}catch(f){return void t(f)}o.done?r(s):Promise.resolve(s).then(n,a)}function _asyncToGenerator(e){return function(){var r=this,t=arguments;return new Promise(function(n,a){var i=e.apply(r,t);function u(e){asyncGeneratorStep(i,n,a,u,o,"next",e)}function o(e){asyncGeneratorStep(i,n,a,u,o,"throw",e)}u(void 0)})}}var Token=require("token-types"),strtok3=require("strtok3/lib/core"),_require=require("./util"),stringToBytes=_require.stringToBytes,tarHeaderChecksumMatches=_require.tarHeaderChecksumMatches,uint32SyncSafeToken=_require.uint32SyncSafeToken,supported=require("./supported"),minimumBytes=4100;function fromStream(e){return _fromStream.apply(this,arguments)}function _fromStream(){return(_fromStream=_asyncToGenerator(regeneratorRuntime.mark(function e(r){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,strtok3.fromStream(r);case 2:return t=e.sent,e.prev=3,e.next=6,fromTokenizer(t);case 6:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.next=10,t.close();case 10:return e.finish(7);case 11:case"end":return e.stop()}},e,null,[[3,,7,11]])}))).apply(this,arguments)}function fromBuffer(e){return _fromBuffer.apply(this,arguments)}function _fromBuffer(){return(_fromBuffer=_asyncToGenerator(regeneratorRuntime.mark(function e(r){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r instanceof Uint8Array||r instanceof ArrayBuffer||Buffer.isBuffer(r)){e.next=2;break}throw new TypeError("Expected the `input` argument to be of type `Uint8Array` or `Buffer` or `ArrayBuffer`, got `".concat(_typeof(r),"`"));case 2:if((t=r instanceof Buffer?r:Buffer.from(r))&&t.length>1){e.next=5;break}return e.abrupt("return");case 5:return n=strtok3.fromBuffer(t),e.abrupt("return",fromTokenizer(n));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _check(e,r,t){t=_objectSpread({offset:0},t);var n,a=_createForOfIteratorHelper(r.entries());try{for(a.s();!(n=a.n()).done;){var i=_slicedToArray(n.value,2),u=i[0],o=i[1];if(t.mask){if(o!==(t.mask[u]&e[u+t.offset]))return!1}else if(o!==e[u+t.offset])return!1}}catch(s){a.e(s)}finally{a.f()}return!0}function fromTokenizer(e){return _fromTokenizer2.apply(this,arguments)}function _fromTokenizer2(){return(_fromTokenizer2=_asyncToGenerator(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",_fromTokenizer(r));case 4:if(e.prev=4,e.t0=e.catch(0),e.t0 instanceof strtok3.EndOfStreamError){e.next=8;break}throw e.t0;case 8:case"end":return e.stop()}},e,null,[[0,4]])}))).apply(this,arguments)}function _fromTokenizer(e){return _fromTokenizer3.apply(this,arguments)}function _fromTokenizer3(){return(_fromTokenizer3=_asyncToGenerator(regeneratorRuntime.mark(function e(r){var t,n,a,i,u,o,s,f,m,c,p,x,b,l,k,d,g,h,y,v,T,w,S,_,B;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Buffer.alloc(minimumBytes),12,n=function(e,r){return _check(t,e,r)},a=function(e,r){return n(stringToBytes(e),r)},r.fileInfo.size||(r.fileInfo.size=Number.MAX_SAFE_INTEGER),e.next=7,r.peekBuffer(t,{length:12,mayBeLess:!0});case 7:if(!n([66,77])){e.next=9;break}return e.abrupt("return",{ext:"bmp",mime:"image/bmp"});case 9:if(!n([11,119])){e.next=11;break}return e.abrupt("return",{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"});case 11:if(!n([120,1])){e.next=13;break}return e.abrupt("return",{ext:"dmg",mime:"application/x-apple-diskimage"});case 13:if(!n([77,90])){e.next=15;break}return e.abrupt("return",{ext:"exe",mime:"application/x-msdownload"});case 15:if(!n([37,33])){e.next=21;break}return e.next=18,r.peekBuffer(t,{length:24,mayBeLess:!0});case 18:if(!a("PS-Adobe-",{offset:2})||!a(" EPSF-",{offset:14})){e.next=20;break}return e.abrupt("return",{ext:"eps",mime:"application/eps"});case 20:return e.abrupt("return",{ext:"ps",mime:"application/postscript"});case 21:if(!n([31,160])&&!n([31,157])){e.next=23;break}return e.abrupt("return",{ext:"Z",mime:"application/x-compress"});case 23:if(!n([255,216,255])){e.next=25;break}return e.abrupt("return",{ext:"jpg",mime:"image/jpeg"});case 25:if(!n([73,73,188])){e.next=27;break}return e.abrupt("return",{ext:"jxr",mime:"image/vnd.ms-photo"});case 27:if(!n([31,139,8])){e.next=29;break}return e.abrupt("return",{ext:"gz",mime:"application/gzip"});case 29:if(!n([66,90,104])){e.next=31;break}return e.abrupt("return",{ext:"bz2",mime:"application/x-bzip2"});case 31:if(!a("ID3")){e.next=42;break}return e.next=34,r.ignore(6);case 34:return e.next=36,r.readToken(uint32SyncSafeToken);case 36:if(i=e.sent,!(r.position+i>r.fileInfo.size)){e.next=39;break}return e.abrupt("return",{ext:"mp3",mime:"audio/mpeg"});case 39:return e.next=41,r.ignore(i);case 41:return e.abrupt("return",fromTokenizer(r));case 42:if(!a("MP+")){e.next=44;break}return e.abrupt("return",{ext:"mpc",mime:"audio/x-musepack"});case 44:if(67!==t[0]&&70!==t[0]||!n([87,83],{offset:1})){e.next=46;break}return e.abrupt("return",{ext:"swf",mime:"application/x-shockwave-flash"});case 46:if(!n([71,73,70])){e.next=48;break}return e.abrupt("return",{ext:"gif",mime:"image/gif"});case 48:if(!a("FLIF")){e.next=50;break}return e.abrupt("return",{ext:"flif",mime:"image/flif"});case 50:if(!a("8BPS")){e.next=52;break}return e.abrupt("return",{ext:"psd",mime:"image/vnd.adobe.photoshop"});case 52:if(!a("WEBP",{offset:8})){e.next=54;break}return e.abrupt("return",{ext:"webp",mime:"image/webp"});case 54:if(!a("MPCK")){e.next=56;break}return e.abrupt("return",{ext:"mpc",mime:"audio/x-musepack"});case 56:if(!a("FORM")){e.next=58;break}return e.abrupt("return",{ext:"aif",mime:"audio/aiff"});case 58:if(!a("icns",{offset:0})){e.next=60;break}return e.abrupt("return",{ext:"icns",mime:"image/icns"});case 60:if(!n([80,75,3,4])){e.next=121;break}e.prev=61;case 62:if(!(r.position+30<r.fileInfo.size)){e.next=114;break}return e.next=65,r.readBuffer(t,{length:30});case 65:return u={compressedSize:t.readUInt32LE(18),uncompressedSize:t.readUInt32LE(22),filenameLength:t.readUInt16LE(26),extraFieldLength:t.readUInt16LE(28)},e.next=68,r.readToken(new Token.StringType(u.filenameLength,"utf-8"));case 68:return u.filename=e.sent,e.next=71,r.ignore(u.extraFieldLength);case 71:if("META-INF/mozilla.rsa"!==u.filename){e.next=73;break}return e.abrupt("return",{ext:"xpi",mime:"application/x-xpinstall"});case 73:if(!u.filename.endsWith(".rels")&&!u.filename.endsWith(".xml")){e.next=83;break}o=u.filename.split("/")[0],e.t0=o,e.next="_rels"===e.t0?78:"word"===e.t0?79:"ppt"===e.t0?80:"xl"===e.t0?81:82;break;case 78:return e.abrupt("break",83);case 79:return e.abrupt("return",{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"});case 80:return e.abrupt("return",{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"});case 81:return e.abrupt("return",{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});case 82:return e.abrupt("break",83);case 83:if(!u.filename.startsWith("xl/")){e.next=85;break}return e.abrupt("return",{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});case 85:if(!u.filename.startsWith("3D/")||!u.filename.endsWith(".model")){e.next=87;break}return e.abrupt("return",{ext:"3mf",mime:"model/3mf"});case 87:if("mimetype"!==u.filename||u.compressedSize!==u.uncompressedSize){e.next=98;break}return e.next=90,r.readToken(new Token.StringType(u.compressedSize,"utf-8"));case 90:s=e.sent,e.t1=s,e.next="application/epub+zip"===e.t1?94:"application/vnd.oasis.opendocument.text"===e.t1?95:"application/vnd.oasis.opendocument.spreadsheet"===e.t1?96:"application/vnd.oasis.opendocument.presentation"===e.t1?97:98;break;case 94:return e.abrupt("return",{ext:"epub",mime:"application/epub+zip"});case 95:return e.abrupt("return",{ext:"odt",mime:"application/vnd.oasis.opendocument.text"});case 96:return e.abrupt("return",{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"});case 97:return e.abrupt("return",{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"});case 98:if(0!==u.compressedSize){e.next=110;break}f=-1;case 100:if(!(f<0&&r.position<r.fileInfo.size)){e.next=108;break}return e.next=103,r.peekBuffer(t,{mayBeLess:!0});case 103:return f=t.indexOf("504B0304",0,"hex"),e.next=106,r.ignore(f>=0?f:t.length);case 106:e.next=100;break;case 108:e.next=112;break;case 110:return e.next=112,r.ignore(u.compressedSize);case 112:e.next=62;break;case 114:e.next=120;break;case 116:if(e.prev=116,e.t2=e.catch(61),e.t2 instanceof strtok3.EndOfStreamError){e.next=120;break}throw e.t2;case 120:return e.abrupt("return",{ext:"zip",mime:"application/zip"});case 121:if(!a("OggS")){e.next=140;break}return e.next=124,r.ignore(28);case 124:return m=Buffer.alloc(8),e.next=127,r.readBuffer(m);case 127:if(!_check(m,[79,112,117,115,72,101,97,100])){e.next=129;break}return e.abrupt("return",{ext:"opus",mime:"audio/opus"});case 129:if(!_check(m,[128,116,104,101,111,114,97])){e.next=131;break}return e.abrupt("return",{ext:"ogv",mime:"video/ogg"});case 131:if(!_check(m,[1,118,105,100,101,111,0])){e.next=133;break}return e.abrupt("return",{ext:"ogm",mime:"video/ogg"});case 133:if(!_check(m,[127,70,76,65,67])){e.next=135;break}return e.abrupt("return",{ext:"oga",mime:"audio/ogg"});case 135:if(!_check(m,[83,112,101,101,120,32,32])){e.next=137;break}return e.abrupt("return",{ext:"spx",mime:"audio/ogg"});case 137:if(!_check(m,[1,118,111,114,98,105,115])){e.next=139;break}return e.abrupt("return",{ext:"ogg",mime:"audio/ogg"});case 139:return e.abrupt("return",{ext:"ogx",mime:"application/ogg"});case 140:if(!n([80,75])||3!==t[2]&&5!==t[2]&&7!==t[2]||4!==t[3]&&6!==t[3]&&8!==t[3]){e.next=142;break}return e.abrupt("return",{ext:"zip",mime:"application/zip"});case 142:if(!a("ftyp",{offset:4})||0==(96&t[8])){e.next=167;break}c=t.toString("binary",8,12).replace("\0"," ").trim(),e.t3=c,e.next="avif"===e.t3?147:"mif1"===e.t3?148:"msf1"===e.t3?149:"heic"===e.t3?150:"heix"===e.t3?150:"hevc"===e.t3?151:"hevx"===e.t3?151:"qt"===e.t3?152:"M4V"===e.t3?153:"M4VH"===e.t3?153:"M4VP"===e.t3?153:"M4P"===e.t3?154:"M4B"===e.t3?155:"M4A"===e.t3?156:"F4V"===e.t3?157:"F4P"===e.t3?158:"F4A"===e.t3?159:"F4B"===e.t3?160:"crx"===e.t3?161:162;break;case 147:return e.abrupt("return",{ext:"avif",mime:"image/avif"});case 148:return e.abrupt("return",{ext:"heic",mime:"image/heif"});case 149:return e.abrupt("return",{ext:"heic",mime:"image/heif-sequence"});case 150:return e.abrupt("return",{ext:"heic",mime:"image/heic"});case 151:return e.abrupt("return",{ext:"heic",mime:"image/heic-sequence"});case 152:return e.abrupt("return",{ext:"mov",mime:"video/quicktime"});case 153:return e.abrupt("return",{ext:"m4v",mime:"video/x-m4v"});case 154:return e.abrupt("return",{ext:"m4p",mime:"video/mp4"});case 155:return e.abrupt("return",{ext:"m4b",mime:"audio/mp4"});case 156:return e.abrupt("return",{ext:"m4a",mime:"audio/x-m4a"});case 157:return e.abrupt("return",{ext:"f4v",mime:"video/mp4"});case 158:return e.abrupt("return",{ext:"f4p",mime:"video/mp4"});case 159:return e.abrupt("return",{ext:"f4a",mime:"audio/mp4"});case 160:return e.abrupt("return",{ext:"f4b",mime:"audio/mp4"});case 161:return e.abrupt("return",{ext:"cr3",mime:"image/x-canon-cr3"});case 162:if(!c.startsWith("3g")){e.next=166;break}if(!c.startsWith("3g2")){e.next=165;break}return e.abrupt("return",{ext:"3g2",mime:"video/3gpp2"});case 165:return e.abrupt("return",{ext:"3gp",mime:"video/3gpp"});case 166:return e.abrupt("return",{ext:"mp4",mime:"video/mp4"});case 167:if(!a("MThd")){e.next=169;break}return e.abrupt("return",{ext:"mid",mime:"audio/midi"});case 169:if(!a("wOFF")||!n([0,1,0,0],{offset:4})&&!a("OTTO",{offset:4})){e.next=171;break}return e.abrupt("return",{ext:"woff",mime:"font/woff"});case 171:if(!a("wOF2")||!n([0,1,0,0],{offset:4})&&!a("OTTO",{offset:4})){e.next=173;break}return e.abrupt("return",{ext:"woff2",mime:"font/woff2"});case 173:if(!n([212,195,178,161])&&!n([161,178,195,212])){e.next=175;break}return e.abrupt("return",{ext:"pcap",mime:"application/vnd.tcpdump.pcap"});case 175:if(!a("DSD ")){e.next=177;break}return e.abrupt("return",{ext:"dsf",mime:"audio/x-dsf"});case 177:if(!a("LZIP")){e.next=179;break}return e.abrupt("return",{ext:"lz",mime:"application/x-lzip"});case 179:if(!a("fLaC")){e.next=181;break}return e.abrupt("return",{ext:"flac",mime:"audio/x-flac"});case 181:if(!n([66,80,71,251])){e.next=183;break}return e.abrupt("return",{ext:"bpg",mime:"image/bpg"});case 183:if(!a("wvpk")){e.next=185;break}return e.abrupt("return",{ext:"wv",mime:"audio/wavpack"});case 185:if(!a("%PDF")){e.next=195;break}return e.next=188,r.ignore(1350);case 188:return 10485760,p=Buffer.alloc(Math.min(10485760,r.fileInfo.size)),e.next=192,r.readBuffer(p,{mayBeLess:!0});case 192:if(!p.includes(Buffer.from("AIPrivateData"))){e.next=194;break}return e.abrupt("return",{ext:"ai",mime:"application/postscript"});case 194:return e.abrupt("return",{ext:"pdf",mime:"application/pdf"});case 195:if(!n([0,97,115,109])){e.next=197;break}return e.abrupt("return",{ext:"wasm",mime:"application/wasm"});case 197:if(!n([73,73,42,0])){e.next=210;break}if(!a("CR",{offset:8})){e.next=200;break}return e.abrupt("return",{ext:"cr2",mime:"image/x-canon-cr2"});case 200:if(!n([28,0,254,0],{offset:8})&&!n([31,0,11,0],{offset:8})){e.next=202;break}return e.abrupt("return",{ext:"nef",mime:"image/x-nikon-nef"});case 202:if(!n([8,0,0,0],{offset:4})||!n([45,0,254,0],{offset:8})&&!n([39,0,254,0],{offset:8})){e.next=204;break}return e.abrupt("return",{ext:"dng",mime:"image/x-adobe-dng"});case 204:return t=Buffer.alloc(24),e.next=207,r.peekBuffer(t);case 207:if(!n([16,251,134,1],{offset:4})&&!n([8,0,0,0],{offset:4})||!n([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})){e.next=209;break}return e.abrupt("return",{ext:"arw",mime:"image/x-sony-arw"});case 209:return e.abrupt("return",{ext:"tif",mime:"image/tiff"});case 210:if(!n([77,77,0,42])){e.next=212;break}return e.abrupt("return",{ext:"tif",mime:"image/tiff"});case 212:if(!a("MAC ")){e.next=214;break}return e.abrupt("return",{ext:"ape",mime:"audio/ape"});case 214:if(!n([26,69,223,163])){e.next=230;break}return x=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.peekNumber(Token.UINT8);case 2:for(t=e.sent,n=128,a=0;0==(t&n);)++a,n>>=1;return i=Buffer.alloc(a+1),e.next=9,r.readBuffer(i);case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),b=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var r,t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:return r=e.sent,e.next=5,x();case 5:return(t=e.sent)[0]^=128>>t.length-1,n=Math.min(6,t.length),e.abrupt("return",{id:r.readUIntBE(0,r.length),len:t.readUIntBE(t.length-n,n)});case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),l=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t,n){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n>0)){e.next=11;break}return e.next=3,b();case 3:if(17026!==(a=e.sent).id){e.next=6;break}return e.abrupt("return",r.readToken(new Token.StringType(a.len,"utf-8")));case 6:return e.next=8,r.ignore(a.len);case 8:--n,e.next=0;break;case 11:case"end":return e.stop()}},e)}));return function(r,t){return e.apply(this,arguments)}}(),e.next=220,b();case 220:return k=e.sent,e.next=223,l(1,k.len);case 223:d=e.sent,e.t4=d,e.next="webm"===e.t4?227:"matroska"===e.t4?228:229;break;case 227:return e.abrupt("return",{ext:"webm",mime:"video/webm"});case 228:return e.abrupt("return",{ext:"mkv",mime:"video/x-matroska"});case 229:return e.abrupt("return");case 230:if(!n([82,73,70,70])){e.next=237;break}if(!n([65,86,73],{offset:8})){e.next=233;break}return e.abrupt("return",{ext:"avi",mime:"video/vnd.avi"});case 233:if(!n([87,65,86,69],{offset:8})){e.next=235;break}return e.abrupt("return",{ext:"wav",mime:"audio/vnd.wave"});case 235:if(!n([81,76,67,77],{offset:8})){e.next=237;break}return e.abrupt("return",{ext:"qcp",mime:"audio/qcelp"});case 237:if(!a("SQLi")){e.next=239;break}return e.abrupt("return",{ext:"sqlite",mime:"application/x-sqlite3"});case 239:if(!n([78,69,83,26])){e.next=241;break}return e.abrupt("return",{ext:"nes",mime:"application/x-nintendo-nes-rom"});case 241:if(!a("Cr24")){e.next=243;break}return e.abrupt("return",{ext:"crx",mime:"application/x-google-chrome-extension"});case 243:if(!a("MSCF")&&!a("ISc(")){e.next=245;break}return e.abrupt("return",{ext:"cab",mime:"application/vnd.ms-cab-compressed"});case 245:if(!n([237,171,238,219])){e.next=247;break}return e.abrupt("return",{ext:"rpm",mime:"application/x-rpm"});case 247:if(!n([197,208,211,198])){e.next=249;break}return e.abrupt("return",{ext:"eps",mime:"application/eps"});case 249:if(!n([40,181,47,253])){e.next=251;break}return e.abrupt("return",{ext:"zst",mime:"application/zstd"});case 251:if(!n([79,84,84,79,0])){e.next=253;break}return e.abrupt("return",{ext:"otf",mime:"font/otf"});case 253:if(!a("#!AMR")){e.next=255;break}return e.abrupt("return",{ext:"amr",mime:"audio/amr"});case 255:if(!a("{\\rtf")){e.next=257;break}return e.abrupt("return",{ext:"rtf",mime:"application/rtf"});case 257:if(!n([70,76,86,1])){e.next=259;break}return e.abrupt("return",{ext:"flv",mime:"video/x-flv"});case 259:if(!a("IMPM")){e.next=261;break}return e.abrupt("return",{ext:"it",mime:"audio/x-it"});case 261:if(!(a("-lh0-",{offset:2})||a("-lh1-",{offset:2})||a("-lh2-",{offset:2})||a("-lh3-",{offset:2})||a("-lh4-",{offset:2})||a("-lh5-",{offset:2})||a("-lh6-",{offset:2})||a("-lh7-",{offset:2})||a("-lzs-",{offset:2})||a("-lz4-",{offset:2})||a("-lz5-",{offset:2})||a("-lhd-",{offset:2}))){e.next=263;break}return e.abrupt("return",{ext:"lzh",mime:"application/x-lzh-compressed"});case 263:if(!n([0,0,1,186])){e.next=268;break}if(!n([33],{offset:4,mask:[241]})){e.next=266;break}return e.abrupt("return",{ext:"mpg",mime:"video/MP1S"});case 266:if(!n([68],{offset:4,mask:[196]})){e.next=268;break}return e.abrupt("return",{ext:"mpg",mime:"video/MP2P"});case 268:if(!a("ITSF")){e.next=270;break}return e.abrupt("return",{ext:"chm",mime:"application/vnd.ms-htmlhelp"});case 270:if(!n([253,55,122,88,90,0])){e.next=272;break}return e.abrupt("return",{ext:"xz",mime:"application/x-xz"});case 272:if(!a("<?xml ")){e.next=274;break}return e.abrupt("return",{ext:"xml",mime:"application/xml"});case 274:if(!n([55,122,188,175,39,28])){e.next=276;break}return e.abrupt("return",{ext:"7z",mime:"application/x-7z-compressed"});case 276:if(!n([82,97,114,33,26,7])||0!==t[6]&&1!==t[6]){e.next=278;break}return e.abrupt("return",{ext:"rar",mime:"application/x-rar-compressed"});case 278:if(!a("solid ")){e.next=280;break}return e.abrupt("return",{ext:"stl",mime:"model/stl"});case 280:if(!a("BLENDER")){e.next=282;break}return e.abrupt("return",{ext:"blend",mime:"application/x-blender"});case 282:if(!a("!<arch>")){e.next=291;break}return e.next=285,r.ignore(8);case 285:return e.next=287,r.readToken(new Token.StringType(13,"ascii"));case 287:if("debian-binary"!==e.sent){e.next=290;break}return e.abrupt("return",{ext:"deb",mime:"application/x-deb"});case 290:return e.abrupt("return",{ext:"ar",mime:"application/x-unix-archive"});case 291:if(!n([137,80,78,71,13,10,26,10])){e.next=309;break}return g=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.readToken(Token.INT32_BE);case 2:return e.t0=e.sent,e.next=5,r.readToken(new Token.StringType(4,"binary"));case 5:return e.t1=e.sent,e.abrupt("return",{length:e.t0,type:e.t1});case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),e.next=295,r.ignore(8);case 295:return e.next=297,g();case 297:if(!((h=e.sent).length<0)){e.next=300;break}return e.abrupt("return");case 300:e.t5=h.type,e.next="IDAT"===e.t5?303:"acTL"===e.t5?304:305;break;case 303:return e.abrupt("return",{ext:"png",mime:"image/png"});case 304:return e.abrupt("return",{ext:"apng",mime:"image/apng"});case 305:return e.next=307,r.ignore(h.length+4);case 307:if(r.position+8<r.fileInfo.size){e.next=295;break}case 308:return e.abrupt("return",{ext:"png",mime:"image/png"});case 309:if(!n([65,82,82,79,87,49,0,0])){e.next=311;break}return e.abrupt("return",{ext:"arrow",mime:"application/x-apache-arrow"});case 311:if(!n([103,108,84,70,2,0,0,0])){e.next=313;break}return e.abrupt("return",{ext:"glb",mime:"model/gltf-binary"});case 313:if(!(n([102,114,101,101],{offset:4})||n([109,100,97,116],{offset:4})||n([109,111,111,118],{offset:4})||n([119,105,100,101],{offset:4}))){e.next=315;break}return e.abrupt("return",{ext:"mov",mime:"video/quicktime"});case 315:if(!n([73,73,82,79,8,0,0,0,24])){e.next=317;break}return e.abrupt("return",{ext:"orf",mime:"image/x-olympus-orf"});case 317:if(!a("gimp xcf ")){e.next=319;break}return e.abrupt("return",{ext:"xcf",mime:"image/x-xcf"});case 319:if(!n([73,73,85,0,24,0,0,0,136,231,116,216])){e.next=321;break}return e.abrupt("return",{ext:"rw2",mime:"image/x-panasonic-rw2"});case 321:if(!n([48,38,178,117,142,102,207,17,166,217])){e.next=346;break}return y=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Buffer.alloc(16),e.next=3,r.readBuffer(t);case 3:return e.t0=t,e.t1=Number,e.next=7,r.readToken(Token.UINT64_LE);case 7:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.abrupt("return",{id:e.t0,size:e.t3});case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),e.next=325,r.ignore(30);case 325:if(!(r.position+24<r.fileInfo.size)){e.next=345;break}return e.next=328,y();case 328:if(v=e.sent,T=v.size-24,!_check(v.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){e.next=341;break}return w=Buffer.alloc(16),e.t6=T,e.next=335,r.readBuffer(w);case 335:if(T=e.t6-=e.sent,!_check(w,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43])){e.next=338;break}return e.abrupt("return",{ext:"asf",mime:"audio/x-ms-asf"});case 338:if(!_check(w,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43])){e.next=340;break}return e.abrupt("return",{ext:"asf",mime:"video/x-ms-asf"});case 340:return e.abrupt("break",345);case 341:return e.next=343,r.ignore(T);case 343:e.next=325;break;case 345:return e.abrupt("return",{ext:"asf",mime:"application/vnd.ms-asf"});case 346:if(!n([171,75,84,88,32,49,49,187,13,10,26,10])){e.next=348;break}return e.abrupt("return",{ext:"ktx",mime:"image/ktx"});case 348:if(!n([126,16,4])&&!n([126,24,4])||!n([48,77,73,69],{offset:4})){e.next=350;break}return e.abrupt("return",{ext:"mie",mime:"application/x-mie"});case 350:if(!n([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2})){e.next=352;break}return e.abrupt("return",{ext:"shp",mime:"application/x-esri-shape"});case 352:if(!n([0,0,0,12,106,80,32,32,13,10,135,10])){e.next=366;break}return e.next=355,r.ignore(20);case 355:return e.next=357,r.readToken(new Token.StringType(4,"ascii"));case 357:S=e.sent,e.t7=S,e.next="jp2 "===e.t7?361:"jpx "===e.t7?362:"jpm "===e.t7?363:"mjp2"===e.t7?364:365;break;case 361:return e.abrupt("return",{ext:"jp2",mime:"image/jp2"});case 362:return e.abrupt("return",{ext:"jpx",mime:"image/jpx"});case 363:return e.abrupt("return",{ext:"jpm",mime:"image/jpm"});case 364:return e.abrupt("return",{ext:"mj2",mime:"image/mj2"});case 365:return e.abrupt("return");case 366:if(!n([255,10])&&!n([0,0,0,12,74,88,76,32,13,10,135,10])){e.next=368;break}return e.abrupt("return",{ext:"jxl",mime:"image/jxl"});case 368:if(!n([0,0,1,186])&&!n([0,0,1,179])){e.next=370;break}return e.abrupt("return",{ext:"mpg",mime:"video/mpeg"});case 370:if(!n([0,1,0,0,0])){e.next=372;break}return e.abrupt("return",{ext:"ttf",mime:"font/ttf"});case 372:if(!n([0,0,1,0])){e.next=374;break}return e.abrupt("return",{ext:"ico",mime:"image/x-icon"});case 374:if(!n([0,0,2,0])){e.next=376;break}return e.abrupt("return",{ext:"cur",mime:"image/x-icon"});case 376:if(!n([208,207,17,224,161,177,26,225])){e.next=378;break}return e.abrupt("return",{ext:"cfb",mime:"application/x-cfb"});case 378:return e.next=380,r.peekBuffer(t,{length:Math.min(256,r.fileInfo.size),mayBeLess:!0});case 380:if(!a("BEGIN:")){e.next=385;break}if(!a("VCARD",{offset:6})){e.next=383;break}return e.abrupt("return",{ext:"vcf",mime:"text/vcard"});case 383:if(!a("VCALENDAR",{offset:6})){e.next=385;break}return e.abrupt("return",{ext:"ics",mime:"text/calendar"});case 385:if(!a("FUJIFILMCCD-RAW")){e.next=387;break}return e.abrupt("return",{ext:"raf",mime:"image/x-fujifilm-raf"});case 387:if(!a("Extended Module:")){e.next=389;break}return e.abrupt("return",{ext:"xm",mime:"audio/x-xm"});case 389:if(!a("Creative Voice File")){e.next=391;break}return e.abrupt("return",{ext:"voc",mime:"audio/x-voc"});case 391:if(!(n([4,0,0,0])&&t.length>=16)){e.next=403;break}if(!((_=t.readUInt32LE(12))>12&&t.length>=_+16)){e.next=403;break}if(e.prev=394,B=t.slice(16,_+16).toString(),!JSON.parse(B).files){e.next=399;break}return e.abrupt("return",{ext:"asar",mime:"application/x-asar"});case 399:e.next=403;break;case 401:e.prev=401,e.t8=e.catch(394);case 403:if(!n([6,14,43,52,2,5,1,1,13,1,2,1,1,2])){e.next=405;break}return e.abrupt("return",{ext:"mxf",mime:"application/mxf"});case 405:if(!a("SCRM",{offset:44})){e.next=407;break}return e.abrupt("return",{ext:"s3m",mime:"audio/x-s3m"});case 407:if(!n([71],{offset:4})||!n([71],{offset:192})&&!n([71],{offset:196})){e.next=409;break}return e.abrupt("return",{ext:"mts",mime:"video/mp2t"});case 409:if(!n([66,79,79,75,77,79,66,73],{offset:60})){e.next=411;break}return e.abrupt("return",{ext:"mobi",mime:"application/x-mobipocket-ebook"});case 411:if(!n([68,73,67,77],{offset:128})){e.next=413;break}return e.abrupt("return",{ext:"dcm",mime:"application/dicom"});case 413:if(!n([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70])){e.next=415;break}return e.abrupt("return",{ext:"lnk",mime:"application/x.ms.shortcut"});case 415:if(!n([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0])){e.next=417;break}return e.abrupt("return",{ext:"alias",mime:"application/x.apple.alias"});case 417:if(!n([76,80],{offset:34})||!(n([0,0,1],{offset:8})||n([1,0,2],{offset:8})||n([2,0,2],{offset:8}))){e.next=419;break}return e.abrupt("return",{ext:"eot",mime:"application/vnd.ms-fontobject"});case 419:if(!n([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29])){e.next=421;break}return e.abrupt("return",{ext:"indd",mime:"application/x-indesign"});case 421:return e.next=423,r.peekBuffer(t,{length:Math.min(512,r.fileInfo.size),mayBeLess:!0});case 423:if(!tarHeaderChecksumMatches(t)){e.next=425;break}return e.abrupt("return",{ext:"tar",mime:"application/x-tar"});case 425:if(!n([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0])){e.next=427;break}return e.abrupt("return",{ext:"skp",mime:"application/vnd.sketchup.skp"});case 427:if(!a("-----BEGIN PGP MESSAGE-----")){e.next=429;break}return e.abrupt("return",{ext:"pgp",mime:"application/pgp-encrypted"});case 429:if(!(t.length>=2&&n([255,224],{offset:0,mask:[255,224]}))){e.next=440;break}if(!n([16],{offset:1,mask:[22]})){e.next=434;break}if(!n([8],{offset:1,mask:[8]})){e.next=433;break}return e.abrupt("return",{ext:"aac",mime:"audio/aac"});case 433:return e.abrupt("return",{ext:"aac",mime:"audio/aac"});case 434:if(!n([2],{offset:1,mask:[6]})){e.next=436;break}return e.abrupt("return",{ext:"mp3",mime:"audio/mpeg"});case 436:if(!n([4],{offset:1,mask:[6]})){e.next=438;break}return e.abrupt("return",{ext:"mp2",mime:"audio/mpeg"});case 438:if(!n([6],{offset:1,mask:[6]})){e.next=440;break}return e.abrupt("return",{ext:"mp1",mime:"audio/mpeg"});case 440:case"end":return e.stop()}},e,null,[[61,116],[394,401]])}))).apply(this,arguments)}var stream=function stream(readableStream){return new Promise(function(resolve,reject){var stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",_asyncToGenerator(regeneratorRuntime.mark(function e(){var r,t,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new stream.PassThrough,t=stream.pipeline?stream.pipeline(readableStream,r,function(){}):readableStream.pipe(r),n=readableStream.read(minimumBytes)||readableStream.read()||Buffer.alloc(0),e.prev=3,e.next=6,fromBuffer(n);case 6:a=e.sent,r.fileType=a,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),reject(e.t0);case 13:resolve(t);case 14:case"end":return e.stop()}},e,null,[[3,10]])})))})},fileType={fromStream:fromStream,fromTokenizer:fromTokenizer,fromBuffer:fromBuffer,stream:stream};Object.defineProperty(fileType,"extensions",{get:function(){return new Set(supported.extensions)}}),Object.defineProperty(fileType,"mimeTypes",{get:function(){return new Set(supported.mimeTypes)}}),module.exports=fileType;
},{"token-types":"No44","strtok3/lib/core":"R0T4","./util":"djAR","./supported":"tFVr","buffer":"fe91"}],"U2cM":[function(require,module,exports) {
"use strict";var e=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,r=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,t=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,n=/\\([\u000b\u0020-\u00ff])/g,a=/([\\"])/g,o=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;function i(e){if(!e||"object"!=typeof e)throw new TypeError("argument obj is required");var r=e.parameters,n=e.type;if(!n||!o.test(n))throw new TypeError("invalid type");var a=n;if(r&&"object"==typeof r)for(var i,u=Object.keys(r).sort(),f=0;f<u.length;f++){if(i=u[f],!t.test(i))throw new TypeError("invalid parameter name");a+="; "+i+"="+s(r[i])}return a}function u(r){if(!r)throw new TypeError("argument string is required");var t="object"==typeof r?f(r):r;if("string"!=typeof t)throw new TypeError("argument string is required to be a string");var a=t.indexOf(";"),i=-1!==a?t.substr(0,a).trim():t.trim();if(!o.test(i))throw new TypeError("invalid media type");var u=new p(i.toLowerCase());if(-1!==a){var s,y,w;for(e.lastIndex=a;y=e.exec(t);){if(y.index!==a)throw new TypeError("invalid parameter format");a+=y[0].length,s=y[1].toLowerCase(),'"'===(w=y[2])[0]&&(w=w.substr(1,w.length-2).replace(n,"$1")),u.parameters[s]=w}if(a!==t.length)throw new TypeError("invalid parameter format")}return u}function f(e){var r;if("function"==typeof e.getHeader?r=e.getHeader("content-type"):"object"==typeof e.headers&&(r=e.headers&&e.headers["content-type"]),"string"!=typeof r)throw new TypeError("content-type header is missing from object");return r}function s(e){var n=String(e);if(t.test(n))return n;if(n.length>0&&!r.test(n))throw new TypeError("invalid parameter value");return'"'+n.replace(a,"\\$1")+'"'}function p(e){this.parameters=Object.create(null),this.type=e}exports.format=i,exports.parse=u;
},{}],"hVwv":[function(require,module,exports) {
"use strict";var r=/^[A-Za-z0-9][A-Za-z0-9!#$&^_.-]{0,126}$/,e=/^[A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126}$/,t=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/;function i(t){if(!t||"object"!=typeof t)throw new TypeError("argument obj is required");var i=t.subtype,s=t.suffix,n=t.type;if(!n||!e.test(n))throw new TypeError("invalid type");if(!i||!r.test(i))throw new TypeError("invalid subtype");var o=n+"/"+i;if(s){if(!e.test(s))throw new TypeError("invalid suffix");o+="+"+s}return o}function s(r){if(!r)throw new TypeError("argument string is required");if("string"!=typeof r)throw new TypeError("argument string is required to be a string");return t.test(r.toLowerCase())}function n(r){if(!r)throw new TypeError("argument string is required");if("string"!=typeof r)throw new TypeError("argument string is required to be a string");var e=t.exec(r.toLowerCase());if(!e)throw new TypeError("invalid media type");var i,s=e[1],n=e[2],a=n.lastIndexOf("+");return-1!==a&&(i=n.substr(a+1),n=n.substr(0,a)),new o(s,n,i)}function o(r,e,t){this.type=r,this.subtype=e,this.suffix=t}exports.format=i,exports.parse=n,exports.test=s;
},{}],"Oe5x":[function(require,module,exports) {
var s=1e3,e=60*s,r=60*e,a=24*r,n=7*a,c=365.25*a;function t(t){if(!((t=String(t)).length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(u){var i=parseFloat(u[1]);switch((u[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return i*c;case"weeks":case"week":case"w":return i*n;case"days":case"day":case"d":return i*a;case"hours":case"hour":case"hrs":case"hr":case"h":return i*r;case"minutes":case"minute":case"mins":case"min":case"m":return i*e;case"seconds":case"second":case"secs":case"sec":case"s":return i*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}function u(n){var c=Math.abs(n);return c>=a?Math.round(n/a)+"d":c>=r?Math.round(n/r)+"h":c>=e?Math.round(n/e)+"m":c>=s?Math.round(n/s)+"s":n+"ms"}function i(n){var c=Math.abs(n);return c>=a?o(n,c,a,"day"):c>=r?o(n,c,r,"hour"):c>=e?o(n,c,e,"minute"):c>=s?o(n,c,s,"second"):n+" ms"}function o(s,e,r,a){var n=e>=1.5*r;return Math.round(s/r)+" "+a+(n?"s":"")}module.exports=function(s,e){e=e||{};var r=typeof s;if("string"===r&&s.length>0)return t(s);if("number"===r&&isFinite(s))return e.long?i(s):u(s);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(s))};
},{}],"ECPu":[function(require,module,exports) {
function e(e){return o(e)||t(e)||r(e)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,n){if(e){if("string"==typeof e)return a(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,n):void 0}}function t(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function o(e){if(Array.isArray(e))return a(e)}function a(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function i(n){function r(e){var n,o,a,i=null;function s(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];if(s.enabled){var a=s,i=Number(new Date),u=i-(n||i);a.diff=u,a.prev=n,a.curr=i,n=i,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var l=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(e,n){if("%%"===e)return"%";l++;var o=r.formatters[n];if("function"==typeof o){var i=t[l];e=o.call(a,i),t.splice(l,1),l--}return e}),r.formatArgs.call(a,t),(a.log||r.log).apply(a,t)}}return s.namespace=e,s.useColors=r.useColors(),s.color=r.selectColor(e),s.extend=t,s.destroy=r.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==i?i:(o!==r.namespaces&&(o=r.namespaces,a=r.enabled(e)),a)},set:function(e){i=e}}),"function"==typeof r.init&&r.init(s),s}function t(e,n){var t=r(this.namespace+(void 0===n?":":n)+e);return t.log=this.log,t}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){var n=[].concat(e(r.names.map(o)),e(r.skips.map(o).map(function(e){return"-"+e}))).join(",");return r.enable(""),n},r.enable=function(e){var n;r.save(e),r.namespaces=e,r.names=[],r.skips=[];var t=("string"==typeof e?e:"").split(/[\s,]+/),o=t.length;for(n=0;n<o;n++)t[n]&&("-"===(e=t[n].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.slice(1)+"$")):r.names.push(new RegExp("^"+e+"$")))},r.enabled=function(e){if("*"===e[e.length-1])return!0;var n,t;for(n=0,t=r.skips.length;n<t;n++)if(r.skips[n].test(e))return!1;for(n=0,t=r.names.length;n<t;n++)if(r.names[n].test(e))return!0;return!1},r.humanize=require("ms"),r.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(n).forEach(function(e){r[e]=n[e]}),r.names=[],r.skips=[],r.formatters={},r.selectColor=function(e){for(var n=0,t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return r.colors[Math.abs(n)%r.colors.length]},r.enable(r.load()),r}module.exports=i;
},{"ms":"Oe5x"}],"t61f":[function(require,module,exports) {
var process = require("process");
var e=require("process");function o(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function C(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+module.exports.humanize(this.diff),this.useColors){var o="color: "+this.color;e.splice(1,0,o,"color: inherit");var C=0,t=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(C++,"%c"===e&&(t=C))}),e.splice(t,0,o)}}function t(e){try{e?exports.storage.setItem("debug",e):exports.storage.removeItem("debug")}catch(o){}}function r(){var o;try{o=exports.storage.getItem("debug")}catch(C){}return!o&&void 0!==e&&"env"in e&&(o=void 0),o}function n(){try{return localStorage}catch(e){}}exports.formatArgs=C,exports.save=t,exports.load=r,exports.useColors=o,exports.storage=n(),exports.destroy=function(){var e=!1;return function(){e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}}(),exports.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],exports.log=console.debug||console.log||function(){},module.exports=require("./common")(exports);var{formatters:s}=module.exports;s.j=function(e){try{return JSON.stringify(e)}catch(o){return"[UnexpectedJSONParseError]: "+o.message}};
},{"./common":"ECPu","process":"rH1J"}],"Jv4E":[function(require,module,exports) {
"use strict";var t,o,e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.TrackType=exports.TargetType=exports.DataType=void 0,function(t){t[t.string=0]="string",t[t.uint=1]="uint",t[t.uid=2]="uid",t[t.bool=3]="bool",t[t.binary=4]="binary",t[t.float=5]="float"}(t=exports.DataType||(exports.DataType={})),function(t){t[t.shot=10]="shot",t[t.scene=20]="scene",t[t.track=30]="track",t[t.part=40]="part",t[t.album=50]="album",t[t.edition=60]="edition",t[t.collection=70]="collection"}(o=exports.TargetType||(exports.TargetType={})),function(t){t[t.video=1]="video",t[t.audio=2]="audio",t[t.complex=3]="complex",t[t.logo=4]="logo",t[t.subtitle=17]="subtitle",t[t.button=18]="button",t[t.control=32]="control"}(e=exports.TrackType||(exports.TrackType={}));
},{}],"E5wx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TrackType=void 0;var e=require("./matroska/types");Object.defineProperty(exports,"TrackType",{enumerable:!0,get:function(){return e.TrackType}});
},{"./matroska/types":"Jv4E"}],"zMc0":[function(require,module,exports) {
"use strict";function l(l){return exports.commonTags.hasOwnProperty(l)&&!exports.commonTags[l].multiple}function i(l){return!exports.commonTags[l].multiple||exports.commonTags[l].unique}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isUnique=exports.isSingleton=exports.commonTags=void 0,exports.commonTags={year:{multiple:!1},track:{multiple:!1},disk:{multiple:!1},title:{multiple:!1},artist:{multiple:!1},artists:{multiple:!0,unique:!0},albumartist:{multiple:!1},album:{multiple:!1},date:{multiple:!1},originaldate:{multiple:!1},originalyear:{multiple:!1},comment:{multiple:!0,unique:!1},genre:{multiple:!0,unique:!0},picture:{multiple:!0,unique:!0},composer:{multiple:!0,unique:!0},lyrics:{multiple:!0,unique:!1},albumsort:{multiple:!1,unique:!0},titlesort:{multiple:!1,unique:!0},work:{multiple:!1,unique:!0},artistsort:{multiple:!1,unique:!0},albumartistsort:{multiple:!1,unique:!0},composersort:{multiple:!1,unique:!0},lyricist:{multiple:!0,unique:!0},writer:{multiple:!0,unique:!0},conductor:{multiple:!0,unique:!0},remixer:{multiple:!0,unique:!0},arranger:{multiple:!0,unique:!0},engineer:{multiple:!0,unique:!0},producer:{multiple:!0,unique:!0},technician:{multiple:!0,unique:!0},djmixer:{multiple:!0,unique:!0},mixer:{multiple:!0,unique:!0},label:{multiple:!0,unique:!0},grouping:{multiple:!1},subtitle:{multiple:!0},discsubtitle:{multiple:!1},totaltracks:{multiple:!1},totaldiscs:{multiple:!1},compilation:{multiple:!1},rating:{multiple:!0},bpm:{multiple:!1},mood:{multiple:!1},media:{multiple:!1},catalognumber:{multiple:!0,unique:!0},tvShow:{multiple:!1},tvShowSort:{multiple:!1},tvSeason:{multiple:!1},tvEpisode:{multiple:!1},tvEpisodeId:{multiple:!1},tvNetwork:{multiple:!1},podcast:{multiple:!1},podcasturl:{multiple:!1},releasestatus:{multiple:!1},releasetype:{multiple:!0},releasecountry:{multiple:!1},script:{multiple:!1},language:{multiple:!1},copyright:{multiple:!1},license:{multiple:!1},encodedby:{multiple:!1},encodersettings:{multiple:!1},gapless:{multiple:!1},barcode:{multiple:!1},isrc:{multiple:!0},asin:{multiple:!1},musicbrainz_recordingid:{multiple:!1},musicbrainz_trackid:{multiple:!1},musicbrainz_albumid:{multiple:!1},musicbrainz_artistid:{multiple:!0},musicbrainz_albumartistid:{multiple:!0},musicbrainz_releasegroupid:{multiple:!1},musicbrainz_workid:{multiple:!1},musicbrainz_trmid:{multiple:!1},musicbrainz_discid:{multiple:!1},acoustid_id:{multiple:!1},acoustid_fingerprint:{multiple:!1},musicip_puid:{multiple:!1},musicip_fingerprint:{multiple:!1},website:{multiple:!1},"performer:instrument":{multiple:!0,unique:!0},averageLevel:{multiple:!1},peakLevel:{multiple:!1},notes:{multiple:!0,unique:!1},key:{multiple:!1},originalalbum:{multiple:!1},originalartist:{multiple:!1},discogs_artist_id:{multiple:!0,unique:!0},discogs_release_id:{multiple:!1},discogs_label_id:{multiple:!1},discogs_master_release_id:{multiple:!1},discogs_votes:{multiple:!1},discogs_rating:{multiple:!1},replaygain_track_peak:{multiple:!1},replaygain_track_gain:{multiple:!1},replaygain_album_peak:{multiple:!1},replaygain_album_gain:{multiple:!1},replaygain_track_minmax:{multiple:!1},replaygain_album_minmax:{multiple:!1},replaygain_undo:{multiple:!1},description:{multiple:!0},longDescription:{multiple:!1},category:{multiple:!0},hdVideo:{multiple:!1},keywords:{multiple:!0},movement:{multiple:!1},movementIndex:{multiple:!1},movementTotal:{multiple:!1},podcastId:{multiple:!1},showMovement:{multiple:!1},stik:{multiple:!1}},exports.isSingleton=l,exports.isUnique=i;
},{}],"hw2z":[function(require,module,exports) {
"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function t(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.CommonTagMapper=void 0;var a=function(){function n(t,a){e(this,n),this.tagTypes=t,this.tagMap=a}return t(n,[{key:"mapGenericTag",value:function(e,n){e={id:e.id,value:e.value},this.postMap(e,n);var t=this.getCommonName(e.id);return t?{id:t,value:e.value}:null}},{key:"getCommonName",value:function(e){return this.tagMap[e]}},{key:"postMap",value:function(e,n){}}],[{key:"toIntOrNull",value:function(e){var n=parseInt(e,10);return isNaN(n)?null:n}},{key:"normalizeTrack",value:function(e){var n=e.toString().split("/");return{no:parseInt(n[0],10)||null,of:parseInt(n[1],10)||null}}}]),n}();exports.CommonTagMapper=a,a.maxRatingScore=1;
},{}],"ArPV":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t){var e=i();return function(){var r,n=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?u(e):r}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ID3v1TagMapper=void 0;var a=require("../common/GenericTagMapper"),p={title:"title",artist:"artist",album:"album",year:"year",comment:"comment",track:"track",genre:"genre"},l=function(t){r(c,a.CommonTagMapper);var n=o(c);function c(){return e(this,c),n.call(this,["ID3v1"],p)}return c}();exports.ID3v1TagMapper=l;
},{"../common/GenericTagMapper":"hw2z"}],"HvNi":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=a();return function(){var n,r=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return i(this,n)}}function i(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?f(e):n}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.CaseInsensitiveTagMap=void 0;var s=require("./GenericTagMapper"),l=function(t){o(u,s.CommonTagMapper);var n=c(u);function u(t,r){e(this,u);for(var o={},c=0,i=Object.keys(r);c<i.length;c++){var f=i[c];o[f.toUpperCase()]=r[f]}return n.call(this,t,o)}return r(u,[{key:"getCommonName",value:function(t){return this.tagMap[t.toUpperCase()]}}]),u}();exports.CaseInsensitiveTagMap=l;
},{"./GenericTagMapper":"hw2z"}],"SkgS":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var r=require("buffer").Buffer;function t(r,t,e){return 0!=(r[t]&1<<e)}function e(r,t,e,o){var n=t;if("utf16le"===o){for(;0!==r[n]||0!==r[n+1];){if(n>=e)return e;n+=2}return n}for(;0!==r[n];){if(n>=e)return e;n++}return n}function o(r){var t=r.indexOf("\0");return-1===t?r:r.substr(0,t)}function n(r){var t=r.length;if(0!=(1&t))throw new Error("Buffer length must be even");for(var e=0;e<t;e+=2){var o=r[e];r[e]=r[e+1],r[e+1]=o}return r}function i(t,e){if(255===t[0]&&254===t[1])return i(t.subarray(2),e);if("utf16le"===e&&254===t[0]&&255===t[1]){if(0!=(1&t.length))throw new Error("Expected even number of octets for 16-bit unicode string");return i(n(t),e)}return r.from(t).toString(e)}function u(r){return r=(r=r.replace(/^\x00+/g,"")).replace(/\x00+$/g,"")}function f(r,t,e,o){var n=e%8,i=r[t+~~(e/8)];i&=255>>n;var u=8-n,s=o-u;return s<0?i>>=8-n-o:s>0&&(i<<=s,i|=f(r,t,e+u,s)),i}function s(r,t,e){return 1===f(r,t,e,1)}function a(r){for(var t=[],e=0,o=r.length;e<o;e++){var n=Number(r.charCodeAt(e)).toString(16);t.push(1===n.length?"0"+n:n)}return t.join(" ")}function p(r){return 10*Math.log10(r)}function x(r){return Math.pow(10,r/10)}function l(r){var t=r.split(" ").map(function(r){return r.trim().toLowerCase()});if(t.length>=1){var e=parseFloat(t[0]);return 2===t.length&&"db"===t[1]?{dB:e,ratio:x(e)}:{dB:p(e),ratio:e}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.toRatio=exports.dbToRatio=exports.ratioToDb=exports.a2hex=exports.isBitSet=exports.getBitAllignedNumber=exports.stripNulls=exports.decodeString=exports.trimRightNull=exports.findZero=exports.getBit=void 0,exports.getBit=t,exports.findZero=e,exports.trimRightNull=o,exports.decodeString=i,exports.stripNulls=u,exports.getBitAllignedNumber=f,exports.isBitSet=s,exports.a2hex=a,exports.ratioToDb=p,exports.dbToRatio=x,exports.toRatio=l;
},{"buffer":"fe91"}],"K0VX":[function(require,module,exports) {
"use strict";function e(r){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}function r(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function i(e,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function t(e,r,t){return r&&i(e.prototype,r),t&&i(e,t),e}function a(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&n(e,r)}function n(e,r){return(n=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}function o(e){var r=s();return function(){var i,t=X(e);if(r){var a=X(this).constructor;i=Reflect.construct(t,arguments,a)}else i=t.apply(this,arguments);return u(this,i)}}function u(r,i){return!i||"object"!==e(i)&&"function"!=typeof i?c(r):i}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ID3v24TagMapper=void 0;var l=require("../common/GenericTagMapper"),T=require("../common/CaseInsensitiveTagMap"),d=require("../common/Util"),p={TIT2:"title",TPE1:"artist","TXXX:Artists":"artists",TPE2:"albumartist",TALB:"album",TDRV:"date",TORY:"originalyear",TPOS:"disk",TCON:"genre",APIC:"picture",TCOM:"composer","USLT:description":"lyrics",TSOA:"albumsort",TSOT:"titlesort",TOAL:"originalalbum",TSOP:"artistsort",TSO2:"albumartistsort",TSOC:"composersort",TEXT:"lyricist","TXXX:Writer":"writer",TPE3:"conductor",TPE4:"remixer","IPLS:arranger":"arranger","IPLS:engineer":"engineer","IPLS:producer":"producer","IPLS:DJ-mix":"djmixer","IPLS:mix":"mixer",TPUB:"label",TIT1:"grouping",TIT3:"subtitle",TRCK:"track",TCMP:"compilation",POPM:"rating",TBPM:"bpm",TMED:"media","TXXX:CATALOGNUMBER":"catalognumber","TXXX:MusicBrainz Album Status":"releasestatus","TXXX:MusicBrainz Album Type":"releasetype","TXXX:MusicBrainz Album Release Country":"releasecountry","TXXX:RELEASECOUNTRY":"releasecountry","TXXX:SCRIPT":"script",TLAN:"language",TCOP:"copyright",WCOP:"license",TENC:"encodedby",TSSE:"encodersettings","TXXX:BARCODE":"barcode","TXXX:ISRC":"isrc",TSRC:"isrc","TXXX:ASIN":"asin","TXXX:originalyear":"originalyear","UFID:http://musicbrainz.org":"musicbrainz_recordingid","TXXX:MusicBrainz Release Track Id":"musicbrainz_trackid","TXXX:MusicBrainz Album Id":"musicbrainz_albumid","TXXX:MusicBrainz Artist Id":"musicbrainz_artistid","TXXX:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","TXXX:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","TXXX:MusicBrainz Work Id":"musicbrainz_workid","TXXX:MusicBrainz TRM Id":"musicbrainz_trmid","TXXX:MusicBrainz Disc Id":"musicbrainz_discid","TXXX:ACOUSTID_ID":"acoustid_id","TXXX:Acoustid Id":"acoustid_id","TXXX:Acoustid Fingerprint":"acoustid_fingerprint","TXXX:MusicIP PUID":"musicip_puid","TXXX:MusicMagic Fingerprint":"musicip_fingerprint",WOAR:"website",TDRC:"date",TYER:"year",TDOR:"originaldate","TIPL:arranger":"arranger","TIPL:engineer":"engineer","TIPL:producer":"producer","TIPL:DJ-mix":"djmixer","TIPL:mix":"mixer",TMOO:"mood",SYLT:"lyrics",TSST:"discsubtitle",TKEY:"key",COMM:"comment",TOPE:"originalartist","PRIV:AverageLevel":"averageLevel","PRIV:PeakLevel":"peakLevel","TXXX:DISCOGS_ARTIST_ID":"discogs_artist_id","TXXX:DISCOGS_ARTISTS":"artists","TXXX:DISCOGS_ARTIST_NAME":"artists","TXXX:DISCOGS_ALBUM_ARTISTS":"albumartist","TXXX:DISCOGS_CATALOG":"catalognumber","TXXX:DISCOGS_COUNTRY":"releasecountry","TXXX:DISCOGS_DATE":"originaldate","TXXX:DISCOGS_LABEL":"label","TXXX:DISCOGS_LABEL_ID":"discogs_label_id","TXXX:DISCOGS_MASTER_RELEASE_ID":"discogs_master_release_id","TXXX:DISCOGS_RATING":"discogs_rating","TXXX:DISCOGS_RELEASED":"date","TXXX:DISCOGS_RELEASE_ID":"discogs_release_id","TXXX:DISCOGS_VOTES":"discogs_votes","TXXX:CATALOGID":"catalognumber","TXXX:STYLE":"genre","TXXX:REPLAYGAIN_TRACK_PEAK":"replaygain_track_peak","TXXX:REPLAYGAIN_TRACK_GAIN":"replaygain_track_gain","TXXX:REPLAYGAIN_ALBUM_PEAK":"replaygain_album_peak","TXXX:REPLAYGAIN_ALBUM_GAIN":"replaygain_album_gain","TXXX:MP3GAIN_MINMAX":"replaygain_track_minmax","TXXX:MP3GAIN_ALBUM_MINMAX":"replaygain_album_minmax","TXXX:MP3GAIN_UNDO":"replaygain_undo",MVNM:"movement",MVIN:"movementIndex",PCST:"podcast",TCAT:"category",TDES:"description",TDRL:"date",TGID:"podcastId",TKWD:"keywords",WFED:"podcasturl"},_=function(e){a(n,T.CaseInsensitiveTagMap);var i=o(n);function n(){return r(this,n),i.call(this,["ID3v2.3","ID3v2.4"],p)}return t(n,[{key:"postMap",value:function(e,r){switch(e.id){case"UFID":"http://musicbrainz.org"===e.value.owner_identifier&&(e.id+=":"+e.value.owner_identifier,e.value=d.decodeString(e.value.identifier,"latin1"));break;case"PRIV":switch(e.value.owner_identifier){case"AverageLevel":case"PeakValue":e.id+=":"+e.value.owner_identifier,e.value=4===e.value.data.length?e.value.data.readUInt32LE(0):null,null===e.value&&r.addWarning("Failed to parse PRIV:PeakValue");break;default:r.addWarning("Unknown PRIV owner-identifier: ".concat(e.value.owner_identifier))}break;case"COMM":e.value=e.value?e.value.text:null;break;case"POPM":e.value=n.toRating(e.value)}}}],[{key:"toRating",value:function(e){return{source:e.email,rating:e.rating>0?(e.rating-1)/254*l.CommonTagMapper.maxRatingScore:void 0}}}]),n}();exports.ID3v24TagMapper=_;
},{"../common/GenericTagMapper":"hw2z","../common/CaseInsensitiveTagMap":"HvNi","../common/Util":"SkgS"}],"acM9":[function(require,module,exports) {
"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(e)}function e(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function t(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}function i(r,e,i){return e&&t(r.prototype,e),i&&t(r,i),r}function n(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&o(r,e)}function o(r,e){return(o=Object.setPrototypeOf||function(r,e){return r.__proto__=e,r})(r,e)}function u(r){var e=s();return function(){var t,i=l(r);if(e){var n=l(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return a(this,t)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}function l(r){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AsfTagMapper=void 0;var p=require("../common/GenericTagMapper"),M={Title:"title",Author:"artist","WM/AlbumArtist":"albumartist","WM/AlbumTitle":"album","WM/Year":"date","WM/OriginalReleaseTime":"originaldate","WM/OriginalReleaseYear":"originalyear",Description:"comment","WM/TrackNumber":"track","WM/PartOfSet":"disk","WM/Genre":"genre","WM/Composer":"composer","WM/Lyrics":"lyrics","WM/AlbumSortOrder":"albumsort","WM/TitleSortOrder":"titlesort","WM/ArtistSortOrder":"artistsort","WM/AlbumArtistSortOrder":"albumartistsort","WM/ComposerSortOrder":"composersort","WM/Writer":"lyricist","WM/Conductor":"conductor","WM/ModifiedBy":"remixer","WM/Engineer":"engineer","WM/Producer":"producer","WM/DJMixer":"djmixer","WM/Mixer":"mixer","WM/Publisher":"label","WM/ContentGroupDescription":"grouping","WM/SubTitle":"subtitle","WM/SetSubTitle":"discsubtitle","WM/IsCompilation":"compilation","WM/SharedUserRating":"rating","WM/BeatsPerMinute":"bpm","WM/Mood":"mood","WM/Media":"media","WM/CatalogNo":"catalognumber","MusicBrainz/Album Status":"releasestatus","MusicBrainz/Album Type":"releasetype","MusicBrainz/Album Release Country":"releasecountry","WM/Script":"script","WM/Language":"language",Copyright:"copyright",LICENSE:"license","WM/EncodedBy":"encodedby","WM/EncodingSettings":"encodersettings","WM/Barcode":"barcode","WM/ISRC":"isrc","MusicBrainz/Track Id":"musicbrainz_recordingid","MusicBrainz/Release Track Id":"musicbrainz_trackid","MusicBrainz/Album Id":"musicbrainz_albumid","MusicBrainz/Artist Id":"musicbrainz_artistid","MusicBrainz/Album Artist Id":"musicbrainz_albumartistid","MusicBrainz/Release Group Id":"musicbrainz_releasegroupid","MusicBrainz/Work Id":"musicbrainz_workid","MusicBrainz/TRM Id":"musicbrainz_trmid","MusicBrainz/Disc Id":"musicbrainz_discid","Acoustid/Id":"acoustid_id","Acoustid/Fingerprint":"acoustid_fingerprint","MusicIP/PUID":"musicip_puid","WM/ARTISTS":"artists","WM/InitialKey":"key",ASIN:"asin","WM/Work":"work","WM/AuthorURL":"website","WM/Picture":"picture"},d=function(r){n(o,p.CommonTagMapper);var t=u(o);function o(){return e(this,o),t.call(this,["asf"],M)}return i(o,[{key:"postMap",value:function(r){switch(r.id){case"WM/SharedUserRating":var e=r.id.split(":");r.value=o.toRating(r.value),r.id=e[0]}}}],[{key:"toRating",value:function(r){return{rating:parseFloat(r+1)/5}}}]),o}();exports.AsfTagMapper=d;
},{"../common/GenericTagMapper":"hw2z"}],"Q9F5":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function n(t){var e=u();return function(){var r,o=a(t);if(e){var n=a(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return i(this,r)}}function i(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?c(e):r}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ID3v22TagMapper=exports.id3v22TagMap=void 0;var s=require("../common/CaseInsensitiveTagMap");exports.id3v22TagMap={TT2:"title",TP1:"artist",TP2:"albumartist",TAL:"album",TYE:"year",COM:"comment",TRK:"track",TPA:"disk",TCO:"genre",PIC:"picture",TCM:"composer",TOR:"originaldate",TOT:"originalalbum",TXT:"lyricist",TP3:"conductor",TPB:"label",TT1:"grouping",TT3:"subtitle",TLA:"language",TCR:"copyright",WCP:"license",TEN:"encodedby",TSS:"encodersettings",WAR:"website","COM:iTunPGAP":"gapless",PCS:"podcast",TCP:"compilation",TDR:"date",TS2:"albumartistsort",TSA:"albumsort",TSC:"composersort",TSP:"artistsort",TST:"titlesort",WFD:"podcasturl",TBP:"bpm"};var p=function(t){r(i,s.CaseInsensitiveTagMap);var o=n(i);function i(){return e(this,i),o.call(this,["ID3v2.2"],exports.id3v22TagMap)}return i}();exports.ID3v22TagMapper=p;
},{"../common/CaseInsensitiveTagMap":"HvNi"}],"jBp9":[function(require,module,exports) {
"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function r(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function e(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&i(t,r)}function i(t,r){return(i=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function n(t){var r=c();return function(){var e,i=u(t);if(r){var n=u(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return o(this,e)}}function o(r,e){return!e||"object"!==t(e)&&"function"!=typeof e?a(r):e}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.APEv2TagMapper=void 0;var s=require("../common/CaseInsensitiveTagMap"),l={Title:"title",Artist:"artist",Artists:"artists","Album Artist":"albumartist",Album:"album",Year:"date",Originalyear:"originalyear",Originaldate:"originaldate",Comment:"comment",Track:"track",Disc:"disk",DISCNUMBER:"disk",Genre:"genre","Cover Art (Front)":"picture","Cover Art (Back)":"picture",Composer:"composer",Lyrics:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",Lyricist:"lyricist",Writer:"writer",Conductor:"conductor",MixArtist:"remixer",Arranger:"arranger",Engineer:"engineer",Producer:"producer",DJMixer:"djmixer",Mixer:"mixer",Label:"label",Grouping:"grouping",Subtitle:"subtitle",DiscSubtitle:"discsubtitle",Compilation:"compilation",BPM:"bpm",Mood:"mood",Media:"media",CatalogNumber:"catalognumber",MUSICBRAINZ_ALBUMSTATUS:"releasestatus",MUSICBRAINZ_ALBUMTYPE:"releasetype",RELEASECOUNTRY:"releasecountry",Script:"script",Language:"language",Copyright:"copyright",LICENSE:"license",EncodedBy:"encodedby",EncoderSettings:"encodersettings",Barcode:"barcode",ISRC:"isrc",ASIN:"asin",musicbrainz_trackid:"musicbrainz_recordingid",musicbrainz_releasetrackid:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",Acoustid_Id:"acoustid_id",ACOUSTID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",Weblink:"website",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",MP3GAIN_MINMAX:"replaygain_track_minmax",MP3GAIN_UNDO:"replaygain_undo"},p=function(t){e(o,s.CaseInsensitiveTagMap);var i=n(o);function o(){return r(this,o),i.call(this,["APEv2"],l)}return o}();exports.APEv2TagMapper=p;
},{"../common/CaseInsensitiveTagMap":"HvNi"}],"qGcm":[function(require,module,exports) {
"use strict";function e(i){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(i)}function i(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function n(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(i&&i.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),i&&t(e,i)}function t(e,i){return(t=Object.setPrototypeOf||function(e,i){return e.__proto__=i,e})(e,i)}function a(e){var i=p();return function(){var n,t=s(e);if(i){var a=s(this).constructor;n=Reflect.construct(t,arguments,a)}else n=t.apply(this,arguments);return r(this,n)}}function r(i,n){return!n||"object"!==e(n)&&"function"!=typeof n?o(i):n}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.MP4TagMapper=exports.tagType=void 0;var c=require("../common/CaseInsensitiveTagMap"),u={"nam":"title","ART":"artist",aART:"albumartist","----:com.apple.iTunes:Band":"albumartist","alb":"album","day":"date","cmt":"comment","com":"comment",trkn:"track",disk:"disk","gen":"genre",covr:"picture","wrt":"composer","lyr":"lyrics",soal:"albumsort",sonm:"titlesort",soar:"artistsort",soaa:"albumartistsort",soco:"composersort","----:com.apple.iTunes:LYRICIST":"lyricist","----:com.apple.iTunes:CONDUCTOR":"conductor","----:com.apple.iTunes:REMIXER":"remixer","----:com.apple.iTunes:ENGINEER":"engineer","----:com.apple.iTunes:PRODUCER":"producer","----:com.apple.iTunes:DJMIXER":"djmixer","----:com.apple.iTunes:MIXER":"mixer","----:com.apple.iTunes:LABEL":"label","grp":"grouping","----:com.apple.iTunes:SUBTITLE":"subtitle","----:com.apple.iTunes:DISCSUBTITLE":"discsubtitle",cpil:"compilation",tmpo:"bpm","----:com.apple.iTunes:MOOD":"mood","----:com.apple.iTunes:MEDIA":"media","----:com.apple.iTunes:CATALOGNUMBER":"catalognumber",tvsh:"tvShow",tvsn:"tvSeason",tves:"tvEpisode",sosn:"tvShowSort",tven:"tvEpisodeId",tvnn:"tvNetwork",pcst:"podcast",purl:"podcasturl","----:com.apple.iTunes:MusicBrainz Album Status":"releasestatus","----:com.apple.iTunes:MusicBrainz Album Type":"releasetype","----:com.apple.iTunes:MusicBrainz Album Release Country":"releasecountry","----:com.apple.iTunes:SCRIPT":"script","----:com.apple.iTunes:LANGUAGE":"language",cprt:"copyright","cpy":"copyright","----:com.apple.iTunes:LICENSE":"license","too":"encodedby",pgap:"gapless","----:com.apple.iTunes:BARCODE":"barcode","----:com.apple.iTunes:ISRC":"isrc","----:com.apple.iTunes:ASIN":"asin","----:com.apple.iTunes:NOTES":"comment","----:com.apple.iTunes:MusicBrainz Track Id":"musicbrainz_recordingid","----:com.apple.iTunes:MusicBrainz Release Track Id":"musicbrainz_trackid","----:com.apple.iTunes:MusicBrainz Album Id":"musicbrainz_albumid","----:com.apple.iTunes:MusicBrainz Artist Id":"musicbrainz_artistid","----:com.apple.iTunes:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","----:com.apple.iTunes:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","----:com.apple.iTunes:MusicBrainz Work Id":"musicbrainz_workid","----:com.apple.iTunes:MusicBrainz TRM Id":"musicbrainz_trmid","----:com.apple.iTunes:MusicBrainz Disc Id":"musicbrainz_discid","----:com.apple.iTunes:Acoustid Id":"acoustid_id","----:com.apple.iTunes:Acoustid Fingerprint":"acoustid_fingerprint","----:com.apple.iTunes:MusicIP PUID":"musicip_puid","----:com.apple.iTunes:fingerprint":"musicip_fingerprint","----:com.apple.iTunes:replaygain_track_gain":"replaygain_track_gain","----:com.apple.iTunes:replaygain_track_peak":"replaygain_track_peak","----:com.apple.iTunes:replaygain_album_gain":"replaygain_album_gain","----:com.apple.iTunes:replaygain_album_peak":"replaygain_album_peak","----:com.apple.iTunes:replaygain_track_minmax":"replaygain_track_minmax","----:com.apple.iTunes:replaygain_album_minmax":"replaygain_album_minmax","----:com.apple.iTunes:replaygain_undo":"replaygain_undo",gnre:"genre","----:com.apple.iTunes:ALBUMARTISTSORT":"albumartistsort","----:com.apple.iTunes:ARTISTS":"artists","----:com.apple.iTunes:ORIGINALDATE":"originaldate","----:com.apple.iTunes:ORIGINALYEAR":"originalyear",desc:"description",ldes:"longDescription","mvn":"movement","mvi":"movementIndex","mvc":"movementTotal","wrk":"work",catg:"category",egid:"podcastId",hdvd:"hdVideo",keyw:"keywords",shwm:"showMovement",stik:"stik"};exports.tagType="iTunes";var l=function(e){n(r,c.CaseInsensitiveTagMap);var t=a(r);function r(){return i(this,r),t.call(this,[exports.tagType],u)}return r}();exports.MP4TagMapper=l;
},{"../common/CaseInsensitiveTagMap":"HvNi"}],"lmpr":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=u();return function(){var r,i=I(t);if(e){var n=I(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return c(this,r)}}function c(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?s(e):r}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function I(t){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.VorbisTagMapper=void 0;var A=require("../../common/GenericTagMapper"),S={TITLE:"title",ARTIST:"artist",ARTISTS:"artists",ALBUMARTIST:"albumartist","ALBUM ARTIST":"albumartist",ALBUM:"album",DATE:"date",ORIGINALDATE:"originaldate",ORIGINALYEAR:"originalyear",COMMENT:"comment",TRACKNUMBER:"track",DISCNUMBER:"disk",GENRE:"genre",METADATA_BLOCK_PICTURE:"picture",COMPOSER:"composer",LYRICS:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",LYRICIST:"lyricist",WRITER:"writer",CONDUCTOR:"conductor",REMIXER:"remixer",ARRANGER:"arranger",ENGINEER:"engineer",PRODUCER:"producer",DJMIXER:"djmixer",MIXER:"mixer",LABEL:"label",GROUPING:"grouping",SUBTITLE:"subtitle",DISCSUBTITLE:"discsubtitle",TRACKTOTAL:"totaltracks",DISCTOTAL:"totaldiscs",COMPILATION:"compilation",RATING:"rating",BPM:"bpm",KEY:"key",MOOD:"mood",MEDIA:"media",CATALOGNUMBER:"catalognumber",RELEASESTATUS:"releasestatus",RELEASETYPE:"releasetype",RELEASECOUNTRY:"releasecountry",SCRIPT:"script",LANGUAGE:"language",COPYRIGHT:"copyright",LICENSE:"license",ENCODEDBY:"encodedby",ENCODERSETTINGS:"encodersettings",BARCODE:"barcode",ISRC:"isrc",ASIN:"asin",MUSICBRAINZ_TRACKID:"musicbrainz_recordingid",MUSICBRAINZ_RELEASETRACKID:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",ACOUSTID_ID:"acoustid_id",ACOUSTID_ID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",WEBSITE:"website",NOTES:"notes",TOTALTRACKS:"totaltracks",TOTALDISCS:"totaldiscs",DISCOGS_ARTIST_ID:"discogs_artist_id",DISCOGS_ARTISTS:"artists",DISCOGS_ARTIST_NAME:"artists",DISCOGS_ALBUM_ARTISTS:"albumartist",DISCOGS_CATALOG:"catalognumber",DISCOGS_COUNTRY:"releasecountry",DISCOGS_DATE:"originaldate",DISCOGS_LABEL:"label",DISCOGS_LABEL_ID:"discogs_label_id",DISCOGS_MASTER_RELEASE_ID:"discogs_master_release_id",DISCOGS_RATING:"discogs_rating",DISCOGS_RELEASED:"date",DISCOGS_RELEASE_ID:"discogs_release_id",DISCOGS_VOTES:"discogs_votes",CATALOGID:"catalognumber",STYLE:"genre",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",REPLAYGAIN_ALBUM_GAIN:"replaygain_album_gain",REPLAYGAIN_ALBUM_PEAK:"replaygain_album_peak",REPLAYGAIN_MINMAX:"replaygain_track_minmax",REPLAYGAIN_ALBUM_MINMAX:"replaygain_album_minmax",REPLAYGAIN_UNDO:"replaygain_undo"},R=function(t){n(o,A.CommonTagMapper);var r=a(o);function o(){return e(this,o),r.call(this,["vorbis"],S)}return i(o,[{key:"postMap",value:function(t){if(0===t.id.indexOf("RATING:")){var e=t.id.split(":");t.value=o.toRating(e[1],t.value),t.id=e[0]}}}],[{key:"toRating",value:function(t,e){return{source:t?t.toLowerCase():t,rating:parseFloat(e)*A.CommonTagMapper.maxRatingScore}}}]),o}();exports.VorbisTagMapper=R;
},{"../../common/GenericTagMapper":"hw2z"}],"l25b":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t){var e=i();return function(){var r,n=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?f(e):r}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.RiffInfoTagMapper=exports.riffInfoTagMap=void 0;var a=require("../common/GenericTagMapper");exports.riffInfoTagMap={IART:"artist",ICRD:"date",INAM:"title",TITL:"title",IPRD:"album",ITRK:"track",COMM:"comment",ICMT:"comment",ICNT:"releasecountry",GNRE:"genre",IWRI:"writer",RATE:"rating",YEAR:"year",ISFT:"encodedby",CODE:"encodedby",TURL:"website",IGNR:"genre",IENG:"engineer",ITCH:"technician",IMED:"media",IRPD:"album"};var p=function(t){r(c,a.CommonTagMapper);var n=o(c);function c(){return e(this,c),n.call(this,["exif"],exports.riffInfoTagMap)}return c}();exports.RiffInfoTagMapper=p;
},{"../common/GenericTagMapper":"hw2z"}],"v8PH":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t){var e=a();return function(){var r,n=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?i(e):r}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.MatroskaTagMapper=void 0;var s=require("../common/CaseInsensitiveTagMap"),f={"segment:title":"title","album:ARTIST":"albumartist","album:ARTISTSORT":"albumartistsort","album:TITLE":"album","album:DATE_RECORDED":"originaldate","album:PART_NUMBER":"disk","album:TOTAL_PARTS":"totaltracks","track:ARTIST":"artist","track:ARTISTSORT":"artistsort","track:TITLE":"title","track:PART_NUMBER":"track","track:MUSICBRAINZ_TRACKID":"musicbrainz_recordingid","track:MUSICBRAINZ_ALBUMID":"musicbrainz_albumid","track:MUSICBRAINZ_ARTISTID":"musicbrainz_artistid","track:PUBLISHER":"label","track:GENRE":"genre","track:ENCODER":"encodedby","track:ENCODER_OPTIONS":"encodersettings","edition:TOTAL_PARTS":"totaldiscs",picture:"picture"},l=function(t){r(c,s.CaseInsensitiveTagMap);var n=o(c);function c(){return e(this,c),n.call(this,["matroska"],f)}return c}();exports.MatroskaTagMapper=l;
},{"../common/CaseInsensitiveTagMap":"HvNi"}],"p4tw":[function(require,module,exports) {
"use strict";function e(e,a){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||a&&e&&"number"==typeof e.length){n&&(e=n);var t=0,o=function(){};return{s:o,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,p=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return p=e.done,e},e:function(e){u=!0,i=e},f:function(){try{p||null==n.return||n.return()}finally{if(u)throw i}}}}function r(e,r){if(e){if("string"==typeof e)return a(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,r):void 0}}function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var a=0,n=new Array(r);a<r;a++)n[a]=e[a];return n}function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function t(e,r){for(var a=0;a<r.length;a++){var n=r[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.CombinedTagMapper=void 0;var i=require("../id3v1/ID3v1TagMap"),p=require("../id3v2/ID3v24TagMapper"),u=require("../asf/AsfTagMapper"),f=require("../id3v2/ID3v22TagMapper"),g=require("../apev2/APEv2TagMapper"),s=require("../mp4/MP4TagMapper"),c=require("../ogg/vorbis/VorbisTagMapper"),l=require("../riff/RiffInfoTagMap"),v=require("../matroska/MatroskaTagMapper"),M=function(){function r(){var e=this;n(this,r),this.tagMappers={},[new i.ID3v1TagMapper,new f.ID3v22TagMapper,new p.ID3v24TagMapper,new s.MP4TagMapper,new s.MP4TagMapper,new c.VorbisTagMapper,new g.APEv2TagMapper,new u.AsfTagMapper,new l.RiffInfoTagMapper,new v.MatroskaTagMapper].forEach(function(r){e.registerTagMapper(r)})}return o(r,[{key:"mapTag",value:function(e,r,a){if(this.tagMappers[e])return this.tagMappers[e].mapGenericTag(r,a);throw new Error("No generic tag mapper defined for tag-format: "+e)}},{key:"registerTagMapper",value:function(r){var a,n=e(r.tagTypes);try{for(n.s();!(a=n.n()).done;){var t=a.value;this.tagMappers[t]=r}}catch(o){n.e(o)}finally{n.f()}}}]),r}();exports.CombinedTagMapper=M;
},{"../id3v1/ID3v1TagMap":"ArPV","../id3v2/ID3v24TagMapper":"K0VX","../asf/AsfTagMapper":"acM9","../id3v2/ID3v22TagMapper":"Q9F5","../apev2/APEv2TagMapper":"jBp9","../mp4/MP4TagMapper":"qGcm","../ogg/vorbis/VorbisTagMapper":"lmpr","../riff/RiffInfoTagMap":"l25b","../matroska/MatroskaTagMapper":"v8PH"}],"G1Zt":[function(require,module,exports) {
"use strict";function t(t,e,a,i,r,n,o){try{var s=t[n](o),c=s.value}catch(u){return void a(u)}s.done?e(c):Promise.resolve(c).then(i,r)}function e(e){return function(){var a=this,i=arguments;return new Promise(function(r,n){var o=e.apply(a,i);function s(e){t(o,r,n,s,c,"next",e)}function c(e){t(o,r,n,s,c,"throw",e)}s(void 0)})}}function a(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=i(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return s=t.done,t},e:function(t){c=!0,o=t},f:function(){try{s||null==a.return||a.return()}finally{if(c)throw o}}}}function i(t,e){if(t){if("string"==typeof t)return r(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e,a){return e&&o(t.prototype,e),a&&o(t,a),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.joinArtists=exports.MetadataCollector=void 0;var c=require("../type"),u=require("debug"),l=require("./GenericTagTypes"),m=require("./CombinedTagMapper"),v=require("./GenericTagMapper"),f=require("./Util"),h=require("file-type/core"),p=(0,u.default)("music-metadata:collector"),d=["matroska","APEv2","vorbis","ID3v2.4","ID3v2.3","ID3v2.2","exif","asf","iTunes","ID3v1"],g=function(){function t(e){n(this,t),this.opts=e,this.format={tagTypes:[],trackInfo:[]},this.native={},this.common={track:{no:null,of:null},disk:{no:null,of:null},movementIndex:{}},this.quality={warnings:[]},this.commonOrigin={},this.originPriority={},this.tagMapper=new m.CombinedTagMapper;var i,r=1,o=a(d);try{for(o.s();!(i=o.n()).done;){var s=i.value;this.originPriority[s]=r++}}catch(c){o.e(c)}finally{o.f()}this.originPriority.artificial=500,this.originPriority.id3v1=600}return s(t,[{key:"hasAny",value:function(){return Object.keys(this.native).length>0}},{key:"addStreamInfo",value:function(t){p("streamInfo: type=".concat(c.TrackType[t.type],", codec=").concat(t.codecName)),this.format.trackInfo.push(t)}},{key:"setFormat",value:function(t,e){p("format: ".concat(t," = ").concat(e)),this.format[t]=e,this.opts.observer&&this.opts.observer({metadata:this,tag:{type:"format",id:t,value:e}})}},{key:"addTag",value:function(t,e,a){p("tag ".concat(t,".").concat(e," = ").concat(a)),this.native[t]||(this.format.tagTypes.push(t),this.native[t]=[]),this.native[t].push({id:e,value:a}),this.toCommon(t,e,a)}},{key:"addWarning",value:function(t){this.quality.warnings.push({message:t})}},{key:"postMap",value:function(t,e){var a=this;switch(e.id){case"artist":if(this.commonOrigin.artist===this.originPriority[t])return this.postMap("artificial",{id:"artists",value:e.value});this.common.artists||this.setGenericTag("artificial",{id:"artists",value:e.value});break;case"artists":if(!(this.common.artist&&this.commonOrigin.artist!==this.originPriority.artificial||this.common.artists&&-1!==this.common.artists.indexOf(e.value))){var i={id:"artist",value:y((this.common.artists||[]).concat([e.value]))};this.setGenericTag("artificial",i)}break;case"picture":return void this.postFixPicture(e.value).then(function(i){null!==i&&(e.value=i,a.setGenericTag(t,e))});case"totaltracks":return void(this.common.track.of=v.CommonTagMapper.toIntOrNull(e.value));case"totaldiscs":return void(this.common.disk.of=v.CommonTagMapper.toIntOrNull(e.value));case"movementTotal":return void(this.common.movementIndex.of=v.CommonTagMapper.toIntOrNull(e.value));case"track":case"disk":case"movementIndex":var r=this.common[e.id].of;return this.common[e.id]=v.CommonTagMapper.normalizeTrack(e.value),void(this.common[e.id].of=null!=r?r:this.common[e.id].of);case"bpm":case"year":case"originalyear":e.value=parseInt(e.value,10);break;case"date":var n=parseInt(e.value.substr(0,4),10);isNaN(n)||(this.common.year=n);break;case"discogs_label_id":case"discogs_release_id":case"discogs_master_release_id":case"discogs_artist_id":case"discogs_votes":e.value="string"==typeof e.value?parseInt(e.value,10):e.value;break;case"replaygain_track_gain":case"replaygain_track_peak":case"replaygain_album_gain":case"replaygain_album_peak":e.value=(0,f.toRatio)(e.value);break;case"replaygain_track_minmax":e.value=e.value.split(",").map(function(t){return parseInt(t,10)});break;case"replaygain_undo":var o=e.value.split(",").map(function(t){return parseInt(t,10)});e.value={leftChannel:o[0],rightChannel:o[1]};break;case"gapless":case"compilation":case"podcast":case"showMovement":e.value="1"===e.value||1===e.value;break;case"isrc":if(this.common[e.id]&&-1!==this.common[e.id].indexOf(e.value))return}null!==e.value&&this.setGenericTag(t,e)}},{key:"toCommonMetadata",value:function(){return{format:this.format,native:this.native,quality:this.quality,common:this.common}}},{key:"postFixPicture",value:function(){var t=e(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.data&&e.data.length>0)){t.next=13;break}if(e.format){t.next=10;break}return t.next=4,h.fromBuffer(e.data);case 4:if(!(a=t.sent)){t.next=9;break}e.format=a.mime,t.next=10;break;case 9:return t.abrupt("return",null);case 10:switch(e.format=e.format.toLocaleLowerCase(),e.format){case"image/jpg":e.format="image/jpeg"}return t.abrupt("return",e);case 13:return this.addWarning("Empty picture tag found"),t.abrupt("return",null);case 15:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"toCommon",value:function(t,e,a){var i={id:e,value:a},r=this.tagMapper.mapTag(t,i,this);r&&this.postMap(t,r)}},{key:"setGenericTag",value:function(t,e){p("common.".concat(e.id," = ").concat(e.value));var a=this.commonOrigin[e.id]||1e3,i=this.originPriority[t];if((0,l.isSingleton)(e.id)){if(!(i<=a))return p("Ignore native tag (singleton): ".concat(t,".").concat(e.id," = ").concat(e.value));this.common[e.id]=e.value,this.commonOrigin[e.id]=i}else if(i===a)(0,l.isUnique)(e.id)&&-1!==this.common[e.id].indexOf(e.value)?p("Ignore duplicate value: ".concat(t,".").concat(e.id," = ").concat(e.value)):this.common[e.id].push(e.value);else{if(!(i<a))return p("Ignore native tag (list): ".concat(t,".").concat(e.id," = ").concat(e.value));this.common[e.id]=[e.value],this.commonOrigin[e.id]=i}this.opts.observer&&this.opts.observer({metadata:this,tag:{type:"common",id:e.id,value:e.value}})}}]),t}();function y(t){return t.length>2?t.slice(0,t.length-1).join(", ")+" & "+t[t.length-1]:t.join(" & ")}exports.MetadataCollector=g,exports.joinArtists=y;
},{"../type":"E5wx","debug":"t61f","./GenericTagTypes":"zMc0","./CombinedTagMapper":"p4tw","./GenericTagMapper":"hw2z","./Util":"SkgS","file-type/core":"fUph"}],"b4xq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextEncodingToken=exports.ExtendedHeader=exports.ID3v2Header=exports.UINT32SYNCSAFE=exports.AttachedPictureType=void 0;var e,t=require("token-types"),r=require("../common/Util");!function(e){e[e.Other=0]="Other",e[e["32x32 pixels 'file icon' (PNG only)"]=1]="32x32 pixels 'file icon' (PNG only)",e[e["Other file icon"]=2]="Other file icon",e[e["Cover (front)"]=3]="Cover (front)",e[e["Cover (back)"]=4]="Cover (back)",e[e["Leaflet page"]=5]="Leaflet page",e[e["Media (e.g. label side of CD)"]=6]="Media (e.g. label side of CD)",e[e["Lead artist/lead performer/soloist"]=7]="Lead artist/lead performer/soloist",e[e["Artist/performer"]=8]="Artist/performer",e[e.Conductor=9]="Conductor",e[e["Band/Orchestra"]=10]="Band/Orchestra",e[e.Composer=11]="Composer",e[e["Lyricist/text writer"]=12]="Lyricist/text writer",e[e["Recording Location"]=13]="Recording Location",e[e["During recording"]=14]="During recording",e[e["During performance"]=15]="During performance",e[e["Movie/video screen capture"]=16]="Movie/video screen capture",e[e["A bright coloured fish"]=17]="A bright coloured fish",e[e.Illustration=18]="Illustration",e[e["Band/artist logotype"]=19]="Band/artist logotype",e[e["Publisher/Studio logotype"]=20]="Publisher/Studio logotype"}(e=exports.AttachedPictureType||(exports.AttachedPictureType={})),exports.UINT32SYNCSAFE={get:function(e,t){return 127&e[t+3]|e[t+2]<<7|e[t+1]<<14|e[t]<<21},len:4},exports.ID3v2Header={len:10,get:function(e,o){return{fileIdentifier:new t.StringType(3,"ascii").get(e,o),version:{major:t.INT8.get(e,o+3),revision:t.INT8.get(e,o+4)},flags:{unsynchronisation:r.getBit(e,o+5,7),isExtendedHeader:r.getBit(e,o+5,6),expIndicator:r.getBit(e,o+5,5),footer:r.getBit(e,o+5,4)},size:exports.UINT32SYNCSAFE.get(e,o+6)}}},exports.ExtendedHeader={len:10,get:function(e,o){return{size:t.UINT32_BE.get(e,o),extendedFlags:t.UINT16_BE.get(e,o+4),sizeOfPadding:t.UINT32_BE.get(e,o+6),crcDataPresent:r.getBit(e,o+4,31)}}},exports.TextEncodingToken={len:1,get:function(e,t){switch(e[t]){case 0:return{encoding:"latin1"};case 1:return{encoding:"utf16le",bom:!0};case 2:return{encoding:"utf16le",bom:!1};case 3:default:return{encoding:"utf8",bom:!1}}}};
},{"token-types":"No44","../common/Util":"SkgS"}],"YSvq":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.BasicParser=void 0;var r=function(){function t(){e(this,t)}return n(t,[{key:"init",value:function(e,t,n){return this.metadata=e,this.tokenizer=t,this.options=n,this}}]),t}();exports.BasicParser=r;
},{}],"Rl63":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var r=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.FourCcToken=void 0;var e=require("./Util"),o=/^[\x21-\x7e][\x20-\x7e\x00()]{3}/;exports.FourCcToken={len:4,get:function(r,n){var t=r.toString("binary",n,n+exports.FourCcToken.len);if(!t.match(o))throw new Error("FourCC contains invalid characters: ".concat(e.a2hex(t),' "').concat(t,'"'));return t},put:function(e,o,n){var t=r.from(n,"binary");if(4!==t.length)throw new Error("Invalid length");return t.copy(e,o)}};
},{"./Util":"SkgS","buffer":"fe91"}],"sjTB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isBitSet=exports.parseTagFlags=exports.TagField=exports.TagItemHeader=exports.TagFooter=exports.Header=exports.DescriptorParser=exports.DataType=void 0;var e,t=require("token-types"),r=require("../common/FourCC");!function(e){e[e.text_utf8=0]="text_utf8",e[e.binary=1]="binary",e[e.external_info=2]="external_info",e[e.reserved=3]="reserved"}(e=exports.DataType||(exports.DataType={})),exports.DescriptorParser={len:52,get:function(e,a){return{ID:r.FourCcToken.get(e,a),version:t.UINT32_LE.get(e,a+4)/1e3,descriptorBytes:t.UINT32_LE.get(e,a+8),headerBytes:t.UINT32_LE.get(e,a+12),seekTableBytes:t.UINT32_LE.get(e,a+16),headerDataBytes:t.UINT32_LE.get(e,a+20),apeFrameDataBytes:t.UINT32_LE.get(e,a+24),apeFrameDataBytesHigh:t.UINT32_LE.get(e,a+28),terminatingDataBytes:t.UINT32_LE.get(e,a+32),fileMD5:new t.Uint8ArrayType(16).get(e,a+36)}}},exports.Header={len:24,get:function(e,r){return{compressionLevel:t.UINT16_LE.get(e,r),formatFlags:t.UINT16_LE.get(e,r+2),blocksPerFrame:t.UINT32_LE.get(e,r+4),finalFrameBlocks:t.UINT32_LE.get(e,r+8),totalFrames:t.UINT32_LE.get(e,r+12),bitsPerSample:t.UINT16_LE.get(e,r+16),channel:t.UINT16_LE.get(e,r+18),sampleRate:t.UINT32_LE.get(e,r+20)}}},exports.TagFooter={len:32,get:function(e,r){return{ID:new t.StringType(8,"ascii").get(e,r),version:t.UINT32_LE.get(e,r+8),size:t.UINT32_LE.get(e,r+12),fields:t.UINT32_LE.get(e,r+16),flags:s(t.UINT32_LE.get(e,r+20))}}},exports.TagItemHeader={len:8,get:function(e,r){return{size:t.UINT32_LE.get(e,r),flags:s(t.UINT32_LE.get(e,r+4))}}};var a=function(e){return new t.Uint8ArrayType(e.size-exports.TagFooter.len)};function s(e){return{containsHeader:o(e,31),containsFooter:o(e,30),isHeader:o(e,31),readOnly:o(e,0),dataType:(6&e)>>1}}function o(e,t){return 0!=(e&1<<t)}exports.TagField=a,exports.parseTagFlags=s,exports.isBitSet=o;
},{"token-types":"No44","../common/FourCC":"Rl63"}],"GhZC":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw i}}}}function n(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(c){return void r(c)}s.done?t(u):Promise.resolve(u).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,u,"next",e)}function u(e){o(i,n,a,s,u,"throw",e)}s(void 0)})}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=y();return function(){var r,n=m(e);if(t){var a=m(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?d(e):r}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.APEv2Parser=void 0;var v=require("debug"),g=require("strtok3/lib/core"),b=require("token-types"),k=require("../common/Util"),x=require("../common/BasicParser"),T=require("./APEv2Token"),w=(0,v.default)("music-metadata:parser:APEv2"),z="APEv2",P="APETAGEX",A=function(t){f(a,x.BasicParser);var n=l(a);function a(){var e;return s(this,a),(e=n.apply(this,arguments)).ape={},e}return c(a,[{key:"tryParseApeHeader",value:function(){var t=i(regeneratorRuntime.mark(function t(){var r,n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.tokenizer.fileInfo.size&&this.tokenizer.fileInfo.size-this.tokenizer.position<T.TagFooter.len)){t.next=3;break}return w("No APEv2 header found, end-of-file reached"),t.abrupt("return");case 3:return t.next=5,this.tokenizer.peekToken(T.TagFooter);case 5:if((r=t.sent).ID!==P){t.next=12;break}return t.next=9,this.tokenizer.ignore(T.TagFooter.len);case 9:return t.abrupt("return",this.parseTags(r));case 12:if(w("APEv2 header not found at offset=".concat(this.tokenizer.position)),!this.tokenizer.fileInfo.size){t.next=19;break}return n=this.tokenizer.fileInfo.size-this.tokenizer.position,o=e.alloc(n),t.next=18,this.tokenizer.readBuffer(o);case 18:return t.abrupt("return",a.parseTagFooter(this.metadata,o,this.options));case 19:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"parse",value:function(){var e=i(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.readToken(T.DescriptorParser);case 2:if("MAC "===(t=e.sent).ID){e.next=5;break}throw new Error("Unexpected descriptor ID");case 5:return this.ape.descriptor=t,r=t.descriptorBytes-T.DescriptorParser.len,e.next=9,r>0?this.parseDescriptorExpansion(r):this.parseHeader();case 9:return n=e.sent,e.next=12,this.tokenizer.ignore(n.forwardBytes);case 12:return e.abrupt("return",this.tryParseApeHeader());case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"parseTags",value:function(){var t=i(regeneratorRuntime.mark(function t(n){var a,o,i,s,u,c,f,p,l,h,d,y,m,v;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e.alloc(256),o=n.size-T.TagFooter.len,w("Parse APE tags at offset=".concat(this.tokenizer.position,", size=").concat(o)),i=0;case 4:if(!(i<n.fields)){t.next=56;break}if(!(o<T.TagItemHeader.len)){t.next=8;break}return this.metadata.addWarning("APEv2 Tag-header: ".concat(n.fields-i," items remaining, but no more tag data to read.")),t.abrupt("break",56);case 8:return t.next=10,this.tokenizer.readToken(T.TagItemHeader);case 10:return s=t.sent,o-=T.TagItemHeader.len+s.size,t.next=14,this.tokenizer.peekBuffer(a,{length:Math.min(a.length,o)});case 14:return u=k.findZero(a,0,a.length),t.next=17,this.tokenizer.readToken(new b.StringType(u,"ascii"));case 17:return c=t.sent,t.next=20,this.tokenizer.ignore(1);case 20:o-=c.length+1,t.t0=s.flags.dataType,t.next=t.t0===T.DataType.text_utf8?24:t.t0===T.DataType.binary?31:t.t0===T.DataType.external_info?44:t.t0===T.DataType.reserved?48:53;break;case 24:return t.next=26,this.tokenizer.readToken(new b.StringType(s.size,"utf8"));case 26:f=t.sent,p=f.split(/\x00/g),l=r(p);try{for(l.s();!(h=l.n()).done;)d=h.value,this.metadata.addTag(z,c,d)}catch(g){l.e(g)}finally{l.f()}return t.abrupt("break",53);case 31:if(!this.options.skipCovers){t.next=36;break}return t.next=34,this.tokenizer.ignore(s.size);case 34:t.next=43;break;case 36:return y=e.alloc(s.size),t.next=39,this.tokenizer.readBuffer(y);case 39:u=k.findZero(y,0,y.length),m=y.toString("utf8",0,u),v=e.from(y.slice(u+1)),this.metadata.addTag(z,c,{description:m,data:v});case 43:return t.abrupt("break",53);case 44:return w("Ignore external info ".concat(c)),t.next=47,this.tokenizer.ignore(s.size);case 47:return t.abrupt("break",53);case 48:return w("Ignore external info ".concat(c)),this.metadata.addWarning('APEv2 header declares a reserved datatype for "'.concat(c,'"')),t.next=52,this.tokenizer.ignore(s.size);case 52:return t.abrupt("break",53);case 53:i++,t.next=4;break;case 56:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"parseDescriptorExpansion",value:function(){var e=i(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.ignore(t);case 2:return e.abrupt("return",this.parseHeader());case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"parseHeader",value:function(){var e=i(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.readToken(T.Header);case 2:return t=e.sent,this.metadata.setFormat("lossless",!0),this.metadata.setFormat("container","Monkey's Audio"),this.metadata.setFormat("bitsPerSample",t.bitsPerSample),this.metadata.setFormat("sampleRate",t.sampleRate),this.metadata.setFormat("numberOfChannels",t.channel),this.metadata.setFormat("duration",a.calculateDuration(t)),e.abrupt("return",{forwardBytes:this.ape.descriptor.seekTableBytes+this.ape.descriptor.headerDataBytes+this.ape.descriptor.apeFrameDataBytes+this.ape.descriptor.terminatingDataBytes});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}],[{key:"tryParseApeHeader",value:function(e,t,r){var n=new a;return n.init(e,t,r),n.tryParseApeHeader()}},{key:"calculateDuration",value:function(e){var t=e.totalFrames>1?e.blocksPerFrame*(e.totalFrames-1):0;return(t+=e.finalFrameBlocks)/e.sampleRate}},{key:"findApeFooterOffset",value:function(){var t=i(regeneratorRuntime.mark(function t(r,n){var a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.alloc(T.TagFooter.len),t.next=3,r.randomRead(a,0,T.TagFooter.len,n-T.TagFooter.len);case 3:if("APETAGEX"!==(o=T.TagFooter.get(a,0)).ID){t.next=7;break}return w("APE footer header at offset=".concat(n)),t.abrupt("return",{footer:o,offset:n-o.size});case 7:case"end":return t.stop()}},t)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"parseTagFooter",value:function(e,t,r){var n=T.TagFooter.get(t,t.length-T.TagFooter.len);if(n.ID!==P)throw new Error("Unexpected APEv2 Footer ID preamble value.");g.fromBuffer(t);var o=new a;return o.init(e,g.fromBuffer(t),r),o.parseTags(n)}}]),a}();exports.APEv2Parser=A;
},{"debug":"t61f","strtok3/lib/core":"R0T4","token-types":"No44","../common/Util":"SkgS","../common/BasicParser":"YSvq","./APEv2Token":"sjTB","buffer":"fe91"}],"VHOF":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t,r,n,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void r(s)}u.done?t(c):Promise.resolve(c).then(n,o)}function n(e){return function(){var t=this,n=arguments;return new Promise(function(o,a){var i=e.apply(t,n);function u(e){r(i,o,a,u,c,"next",e)}function c(e){r(i,o,a,u,c,"throw",e)}u(void 0)})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function u(e,t,r){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=c(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=k();return function(){var r,n=d(e);if(t){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?h(e):r}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.hasID3v1Header=exports.ID3v1Parser=exports.Genres=void 0;var y=require("debug"),g=require("token-types"),v=require("../common/Util"),m=require("../common/BasicParser"),b=require("../apev2/APEv2Parser"),R=(0,y.default)("music-metadata:parser:ID3v1");exports.Genres=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","Alt. Rock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk/Rock","National Folk","Swing","Fast-Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Abstract","Art Rock","Baroque","Bhangra","Big Beat","Breakbeat","Chillout","Downtempo","Dub","EBM","Eclectic","Electro","Electroclash","Emo","Experimental","Garage","Global","IDM","Illbient","Industro-Goth","Jam Band","Krautrock","Leftfield","Lounge","Math Rock","New Romantic","Nu-Breakz","Post-Punk","Post-Rock","Psytrance","Shoegaze","Space Rock","Trop Rock","World Music","Neoclassical","Audiobook","Audio Theatre","Neue Deutsche Welle","Podcast","Indie Rock","G-Funk","Dubstep","Garage Rock","Psybient"];var P={len:128,get:function(e,t){var r=new w(3).get(e,t);return"TAG"===r?{header:r,title:new w(30).get(e,t+3),artist:new w(30).get(e,t+33),album:new w(30).get(e,t+63),year:new w(4).get(e,t+93),comment:new w(28).get(e,t+97),zeroByte:g.UINT8.get(e,t+127),track:g.UINT8.get(e,t+126),genre:g.UINT8.get(e,t+127)}:null}},w=function(e){s(r,g.StringType);var t=f(r);function r(e){return o(this,r),t.call(this,e,"binary")}return i(r,[{key:"get",value:function(e,t){var n=u(d(r.prototype),"get",this).call(this,e,t);return(n=(n=v.trimRightNull(n)).trim()).length>0?n:void 0}}]),r}(),S=function(e){s(r,m.BasicParser);var t=f(r);function r(){return o(this,r),t.apply(this,arguments)}return i(r,[{key:"parse",value:function(){var e=n(regeneratorRuntime.mark(function e(){var t,n,o,a,i,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.tokenizer.fileInfo.size){e.next=3;break}return R("Skip checking for ID3v1 because the file-size is unknown"),e.abrupt("return");case 3:if(!this.options.apeHeader){e.next=9;break}return this.tokenizer.ignore(this.options.apeHeader.offset-this.tokenizer.position),(t=new b.APEv2Parser).init(this.metadata,this.tokenizer,this.options),e.next=9,t.parseTags(this.options.apeHeader.footer);case 9:if(n=this.tokenizer.fileInfo.size-P.len,!(this.tokenizer.position>n)){e.next=13;break}return R("Already consumed the last 128 bytes"),e.abrupt("return");case 13:return e.next=15,this.tokenizer.readToken(P,n);case 15:if(o=e.sent){for(R("ID3v1 header found at: pos=%s",this.tokenizer.fileInfo.size-P.len),a=0,i=["title","artist","album","comment","track","year"];a<i.length;a++)o[u=i[a]]&&""!==o[u]&&this.addTag(u,o[u]);(c=r.getGenre(o.genre))&&this.addTag("genre",c)}else R("ID3v1 header not found at: pos=%s",this.tokenizer.fileInfo.size-P.len);case 17:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"addTag",value:function(e,t){this.metadata.addTag("ID3v1",e,t)}}],[{key:"getGenre",value:function(e){if(e<exports.Genres.length)return exports.Genres[e]}}]),r}();function B(e){return T.apply(this,arguments)}function T(){return(T=n(regeneratorRuntime.mark(function t(r){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.fileSize>=128)){t.next=5;break}return n=e.alloc(3),t.next=4,r.randomRead(n,0,n.length,r.fileSize-128);case 4:return t.abrupt("return","TAG"===n.toString("binary"));case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}},t)}))).apply(this,arguments)}exports.ID3v1Parser=S,exports.hasID3v1Header=B;
},{"debug":"t61f","token-types":"No44","../common/Util":"SkgS","../common/BasicParser":"YSvq","../apev2/APEv2Parser":"GhZC","buffer":"fe91"}],"MfIF":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function r(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function t(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function a(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}function n(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=i(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==t.return||t.return()}finally{if(s)throw c}}}}function i(e,r){if(e){if("string"==typeof e)return c(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?c(e,r):void 0}}function c(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.FrameParser=exports.parseGenre=void 0;var o=require("debug"),s=require("token-types"),d=require("../common/Util"),l=require("./ID3v2Token"),u=require("../id3v1/ID3v1Parser"),f=(0,o.default)("music-metadata:id3v2:frame-parser"),g="latin1";function p(e){var r,t,a=[],i="",c=n(e);try{for(c.s();!(t=c.n()).done;){var o=t.value;if("string"==typeof r)if("("===o&&""===r)i+="(",r=void 0;else if(")"===o){""!==i&&(a.push(i),i="");var s=h(r);s&&a.push(s),r=void 0}else r+=o;else"("===o?r="":i+=o}}catch(d){c.e(d)}finally{c.f()}return i&&(0===a.length&&i.match(/^\d*$/)&&(i=u.Genres[i]),a.push(i)),a}function h(e){return"RX"===e?"Remix":"CR"===e?"Cover":e.match(/^\d*$/)?u.Genres[e]:void 0}exports.parseGenre=p;var v=function(){function t(e,a){r(this,t),this.major=e,this.warningCollector=a}return a(t,[{key:"readData",value:function(r,a,n){if(0!==r.length){var i,c=l.TextEncodingToken.get(r,0),o=c.encoding,u=c.bom,h=r.length,v=0,m=[],y=t.getNullTerminatorLength(o),b={};switch(f("Parsing tag type=".concat(a,", encoding=").concat(o,", bom=").concat(u)),"TXXX"!==a&&"T"===a[0]?"T*":a){case"T*":case"IPLS":case"MVIN":case"MVNM":case"PCS":case"PCST":var T;try{T=d.decodeString(r.slice(1),o).replace(/\x00+$/,"")}catch(x){this.warningCollector.addWarning("id3v2.".concat(this.major," type=").concat(a," header has invalid string value: ").concat(x.message))}switch(a){case"TMCL":case"TIPL":case"IPLS":m=this.splitValue(a,T),m=t.functionList(m);break;case"TRK":case"TRCK":case"TPOS":m=T;break;case"TCOM":case"TEXT":case"TOLY":case"TOPE":case"TPE1":case"TSRC":m=this.splitValue(a,T);break;case"TCO":case"TCON":m=this.splitValue(a,T).map(function(e){return p(e)}).reduce(function(e,r){return e.concat(r)},[]);break;case"PCS":case"PCST":m=this.major>=4?this.splitValue(a,T):[T],m=Array.isArray(m)&&""===m[0]?1:0;break;default:m=this.major>=4?this.splitValue(a,T):[T]}break;case"TXXX":m={description:(m=t.readIdentifierAndData(r,v+1,h,o)).id,text:this.splitValue(a,d.decodeString(m.data,o).replace(/\x00+$/,""))};break;case"PIC":case"APIC":if(n){var S={};switch(v+=1,this.major){case 2:S.format=d.decodeString(r.slice(v,v+3),"latin1"),v+=3;break;case 3:case 4:i=d.findZero(r,v,h,g),S.format=d.decodeString(r.slice(v,i),g),v=i+1;break;default:throw new Error("Warning: unexpected major versionIndex: "+this.major)}S.format=t.fixPictureMimeType(S.format),S.type=l.AttachedPictureType[r[v]],v+=1,i=d.findZero(r,v,h,o),S.description=d.decodeString(r.slice(v,i),o),v=i+y,S.data=e.from(r.slice(v,h)),m=S}break;case"CNT":case"PCNT":m=s.UINT32_BE.get(r,0);break;case"SYLT":for(v+=7,m=[];v<h;){var k=r.slice(v,v=d.findZero(r,v,h,o));v+=5,m.push(d.decodeString(k,o))}break;case"ULT":case"USLT":case"COM":case"COMM":v+=1,b.language=d.decodeString(r.slice(v,v+3),g),v+=3,i=d.findZero(r,v,h,o),b.description=d.decodeString(r.slice(v,i),o),v=i+y,b.text=d.decodeString(r.slice(v,h),o).replace(/\x00+$/,""),m=[b];break;case"UFID":m={owner_identifier:(m=t.readIdentifierAndData(r,v,h,g)).id,identifier:m.data};break;case"PRIV":m={owner_identifier:(m=t.readIdentifierAndData(r,v,h,g)).id,data:m.data};break;case"POPM":i=d.findZero(r,v,h,g);var P=d.decodeString(r.slice(v,i),g),C=h-(v=i+1);m={email:P,rating:s.UINT8.get(r,v),counter:C>=5?s.UINT32_BE.get(r,v+1):void 0};break;case"GEOB":i=d.findZero(r,v+1,h,o);var I=d.decodeString(r.slice(v+1,i),g);v=i+1,i=d.findZero(r,v,h-v,o);var w=d.decodeString(r.slice(v,i),g);v=i+1,i=d.findZero(r,v,h-v,o),m={type:I,filename:w,description:d.decodeString(r.slice(v,i),g),data:r.slice(v+1,h)};break;case"WCOM":case"WCOP":case"WOAF":case"WOAR":case"WOAS":case"WORS":case"WPAY":case"WPUB":m=d.decodeString(r.slice(v,i),g);break;case"WXXX":i=d.findZero(r,v+1,h,o);var O=d.decodeString(r.slice(v+1,i),o);v=i+("utf16le"===o?2:1),m={description:O,url:d.decodeString(r.slice(v,h),g)};break;case"WFD":case"WFED":m=d.decodeString(r.slice(v+1,d.findZero(r,v+1,h,o)),o);break;case"MCDI":m=r.slice(0,h);break;default:f("Warning: unsupported id3v2-tag-type: "+a)}return m}this.warningCollector.addWarning("id3v2.".concat(this.major," header has empty tag type=").concat(a))}},{key:"splitValue",value:function(e,r){var a;return this.major<4?(a=r.split(/\x00/g)).length>1?this.warningCollector.addWarning("ID3v2.".concat(this.major," ").concat(e," uses non standard null-separator.")):a=r.split(/\//g):a=r.split(/\x00/g),t.trimArray(a)}}],[{key:"fixPictureMimeType",value:function(e){switch(e=e.toLocaleLowerCase()){case"jpg":return"image/jpeg";case"png":return"image/png"}return e}},{key:"functionList",value:function(e){for(var r={},t=0;t+1<e.length;t+=2){var a=e[t+1].split(",");r[e[t]]=r.hasOwnProperty(e[t])?r[e[t]].concat(a):a}return r}},{key:"trimArray",value:function(e){return e.map(function(e){return e.replace(/\x00+$/,"").trim()})}},{key:"readIdentifierAndData",value:function(e,r,a,n){var i=d.findZero(e,r,a,n),c=d.decodeString(e.slice(r,i),n);return r=i+t.getNullTerminatorLength(n),{id:c,data:e.slice(r,a)}}},{key:"getNullTerminatorLength",value:function(e){return"utf16le"===e?2:1}}]),t}();exports.FrameParser=v;
},{"debug":"t61f","token-types":"No44","../common/Util":"SkgS","./ID3v2Token":"b4xq","../id3v1/ID3v1Parser":"VHOF","buffer":"fe91"}],"fbDe":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function r(e,r){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=t(e))||r&&e&&"number"==typeof e.length){a&&(e=a);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==a.return||a.return()}finally{if(u)throw o}}}}function t(e,r){if(e){if("string"==typeof e)return a(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(e,r):void 0}}function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}function n(e,r,t,a,n,i,o){try{var s=e[i](o),u=s.value}catch(d){return void t(d)}s.done?r(u):Promise.resolve(u).then(a,n)}function i(e){return function(){var r=this,t=arguments;return new Promise(function(a,i){var o=e.apply(r,t);function s(e){n(o,a,i,s,u,"next",e)}function u(e){n(o,a,i,s,u,"throw",e)}s(void 0)})}}function o(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function s(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function u(e,r,t){return r&&s(e.prototype,r),t&&s(e,t),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ID3v2Parser=void 0;var d=require("token-types"),c=require("../common/Util"),l=require("./FrameParser"),f=require("./ID3v2Token"),h=function(){function t(){o(this,t)}return u(t,[{key:"parse",value:function(){var e=i(regeneratorRuntime.mark(function e(r,t,a){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.tokenizer=t,this.metadata=r,this.options=a,e.next=5,this.tokenizer.readToken(f.ID3v2Header);case 5:if("ID3"===(n=e.sent).fileIdentifier){e.next=8;break}throw new Error("expected ID3-header file-identifier 'ID3' was not found");case 8:return this.id3Header=n,this.headerType="ID3v2."+n.version.major,e.abrupt("return",n.flags.isExtendedHeader?this.parseExtendedHeader():this.parseId3Data(n.size));case 11:case"end":return e.stop()}},e,this)}));return function(r,t,a){return e.apply(this,arguments)}}()},{key:"parseExtendedHeader",value:function(){var e=i(regeneratorRuntime.mark(function e(){var r,t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.readToken(f.ExtendedHeader);case 2:return r=e.sent,t=r.size-f.ExtendedHeader.len,e.abrupt("return",t>0?this.parseExtendedHeaderData(t,r.size):this.parseId3Data(this.id3Header.size-r.size));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"parseExtendedHeaderData",value:function(){var e=i(regeneratorRuntime.mark(function e(r,t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.ignore(r);case 2:return e.abrupt("return",this.parseId3Data(this.id3Header.size-t));case 3:case"end":return e.stop()}},e,this)}));return function(r,t){return e.apply(this,arguments)}}()},{key:"parseId3Data",value:function(){var e=i(regeneratorRuntime.mark(function e(a){var n,i,o,s,u,c,l,f,h,v,p,m,g,y,k,w;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.readToken(new d.Uint8ArrayType(a));case 2:n=e.sent,i=r(this.parseMetadata(n));try{for(i.s();!(o=i.n()).done;)if("TXXX"===(s=o.value).id){if(s.value){u=r(s.value.text);try{for(u.s();!(c=u.n()).done;)l=c.value,this.addTag(t.makeDescriptionTagName(s.id,s.value.description),l)}catch(I){u.e(I)}finally{u.f()}}}else if("COM"===s.id){f=r(s.value);try{for(f.s();!(h=f.n()).done;)v=h.value,this.addTag(t.makeDescriptionTagName(s.id,v.description),v.text)}catch(I){f.e(I)}finally{f.f()}}else if("COMM"===s.id){p=r(s.value);try{for(p.s();!(m=p.n()).done;)g=m.value,this.addTag(t.makeDescriptionTagName(s.id,g.description),g)}catch(I){p.e(I)}finally{p.f()}}else if(Array.isArray(s.value)){y=r(s.value);try{for(y.s();!(k=y.n()).done;)w=k.value,this.addTag(s.id,w)}catch(I){y.e(I)}finally{y.f()}}else this.addTag(s.id,s.value)}catch(I){i.e(I)}finally{i.f()}case 5:case"end":return e.stop()}},e,this)}));return function(r){return e.apply(this,arguments)}}()},{key:"addTag",value:function(e,r){this.metadata.addTag(this.headerType,e,r)}},{key:"parseMetadata",value:function(e){for(var r=0,a=[];r!==e.length;){var n=t.getFrameHeaderLength(this.id3Header.version.major);if(r+n>e.length){this.metadata.addWarning("Illegal ID3v2 tag length");break}var i=e.slice(r,r+=n),o=this.readFrameHeader(i,this.id3Header.version.major),s=e.slice(r,r+=o.length),u=t.readFrameData(s,o,this.id3Header.version.major,!this.options.skipCovers,this.metadata);u&&a.push({id:o.id,value:u})}return a}},{key:"readFrameHeader",value:function(r,a){var n;switch(a){case 2:(n={id:e.from(r.slice(0,3)).toString("ascii"),length:d.UINT24_BE.get(r,3)}).id.match(/[A-Z0-9]{3}/g)||this.metadata.addWarning("Invalid ID3v2.".concat(this.id3Header.version.major," frame-header-ID: ").concat(n.id));break;case 3:case 4:(n={id:e.from(r.slice(0,4)).toString("ascii"),length:(4===a?f.UINT32SYNCSAFE:d.UINT32_BE).get(r,4),flags:t.readFrameFlags(r.slice(8,10))}).id.match(/[A-Z0-9]{4}/g)||this.metadata.addWarning("Invalid ID3v2.".concat(this.id3Header.version.major," frame-header-ID: ").concat(n.id));break;default:throw new Error("Unexpected majorVer: "+a)}return n}}],[{key:"removeUnsyncBytes",value:function(e){for(var r=0,t=0;r<e.length-1;)r!==t&&(e[t]=e[r]),r+=255===e[r]&&0===e[r+1]?2:1,t++;return r<e.length&&(e[t++]=e[r]),e.slice(0,t)}},{key:"getFrameHeaderLength",value:function(e){switch(e){case 2:return 6;case 3:case 4:return 10;default:throw new Error("header versionIndex is incorrect")}}},{key:"readFrameFlags",value:function(e){return{status:{tag_alter_preservation:c.getBit(e,0,6),file_alter_preservation:c.getBit(e,0,5),read_only:c.getBit(e,0,4)},format:{grouping_identity:c.getBit(e,1,7),compression:c.getBit(e,1,3),encryption:c.getBit(e,1,2),unsynchronisation:c.getBit(e,1,1),data_length_indicator:c.getBit(e,1,0)}}}},{key:"readFrameData",value:function(e,r,a,n,i){var o=new l.FrameParser(a,i);switch(a){case 2:return o.readData(e,r.id,n);case 3:case 4:return r.flags.format.unsynchronisation&&(e=t.removeUnsyncBytes(e)),r.flags.format.data_length_indicator&&(e=e.slice(4,e.length)),o.readData(e,r.id,n);default:throw new Error("Unexpected majorVer: "+a)}}},{key:"makeDescriptionTagName",value:function(e,r){return e+(r?":"+r:"")}}]),t}();exports.ID3v2Parser=h;
},{"token-types":"No44","../common/Util":"SkgS","./FrameParser":"MfIF","./ID3v2Token":"b4xq","buffer":"fe91"}],"QkHS":[function(require,module,exports) {
"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function r(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Common=void 0;var t=require("token-types"),o=require("../common/FourCC"),a=function(){function n(r,t){e(this,n),this.isAifc=t;var o=t?22:18;if(r.chunkSize<o)throw new Error("COMMON CHUNK size should always be at least ".concat(o));this.len=r.chunkSize}return r(n,[{key:"get",value:function(e,n){var r=e.readUInt16BE(n+8)-16398,a=e.readUInt16BE(n+8+2),i={numChannels:e.readUInt16BE(n),numSampleFrames:e.readUInt32BE(n+2),sampleSize:e.readUInt16BE(n+6),sampleRate:r<0?a>>Math.abs(r):a<<r};if(this.isAifc){if(i.compressionType=o.FourCcToken.get(e,n+18),this.len>22){var s=e.readInt8(n+22);if(23+s+(s+1)%2!==this.len)throw new Error("Illegal pstring length");i.compressionName=new t.StringType(s,"binary").get(e,n+23)}}else i.compressionName="PCM";return i}}]),n}();exports.Common=a;
},{"token-types":"No44","../common/FourCC":"Rl63"}],"TXud":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Header=void 0;var e=require("token-types"),r=require("../common/FourCC");exports.Header={len:8,get:function(t,o){return{chunkID:r.FourCcToken.get(t,o),chunkSize:Number(BigInt(e.UINT32_BE.get(t,o+4)))}}};
},{"token-types":"No44","../common/FourCC":"Rl63"}],"cA0w":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(c){return void r(c)}s.done?t(u):Promise.resolve(u).then(n,a)}function r(e){return function(){var r=this,n=arguments;return new Promise(function(a,o){var i=e.apply(r,n);function s(e){t(i,a,o,s,u,"next",e)}function u(e){t(i,a,o,s,u,"throw",e)}s(void 0)})}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=p();return function(){var r,n=m(e);if(t){var a=m(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return c(this,r)}}function c(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?f(t):r}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AIFFParser=void 0;var h=require("token-types"),l=require("debug"),d=require("strtok3/lib/core"),b=require("../id3v2/ID3v2Parser"),k=require("../common/FourCC"),y=require("../common/BasicParser"),v=require("./AiffToken"),F=require("../iff"),x=(0,l.default)("music-metadata:parser:aiff"),w=function(e){i(a,y.BasicParser);var t=u(a);function a(){return n(this,a),t.apply(this,arguments)}return o(a,[{key:"parse",value:function(){var e=r(regeneratorRuntime.mark(function e(){var t,r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.readToken(F.Header);case 2:if("FORM"===e.sent.chunkID){e.next=5;break}throw new Error("Invalid Chunk-ID, expected 'FORM'");case 5:return e.next=7,this.tokenizer.readToken(k.FourCcToken);case 7:t=e.sent,e.t0=t,e.next="AIFF"===e.t0?11:"AIFC"===e.t0?14:17;break;case 11:return this.metadata.setFormat("container",t),this.isCompressed=!1,e.abrupt("break",18);case 14:return this.metadata.setFormat("container","AIFF-C"),this.isCompressed=!0,e.abrupt("break",18);case 17:throw Error("Unsupported AIFF type: "+t);case 18:this.metadata.setFormat("lossless",!this.isCompressed),e.prev=19;case 20:if(this.tokenizer.fileInfo.size&&!(this.tokenizer.fileInfo.size-this.tokenizer.position>=F.Header.len)){e.next=34;break}return x("Reading AIFF chunk at offset="+this.tokenizer.position),e.next=24,this.tokenizer.readToken(F.Header);case 24:return r=e.sent,x("Chunk id=".concat(r.chunkID)),n=2*Math.round(r.chunkSize/2),e.next=29,this.readData(r);case 29:return a=e.sent,e.next=32,this.tokenizer.ignore(n-a);case 32:e.next=20;break;case 34:e.next=43;break;case 36:if(e.prev=36,e.t1=e.catch(19),!(e.t1 instanceof d.EndOfStreamError)){e.next=42;break}x("End-of-stream"),e.next=43;break;case 42:throw e.t1;case 43:case"end":return e.stop()}},e,this,[[19,36]])}));return function(){return e.apply(this,arguments)}}()},{key:"readData",value:function(){var e=r(regeneratorRuntime.mark(function e(t){var r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.chunkID,e.next="COMM"===e.t0?3:"ID3 "===e.t0?13:"SSND"===e.t0?20:22;break;case 3:return e.next=5,this.tokenizer.readToken(new v.Common(t,this.isCompressed));case 5:return r=e.sent,this.metadata.setFormat("bitsPerSample",r.sampleSize),this.metadata.setFormat("sampleRate",r.sampleRate),this.metadata.setFormat("numberOfChannels",r.numChannels),this.metadata.setFormat("numberOfSamples",r.numSampleFrames),this.metadata.setFormat("duration",r.numSampleFrames/r.sampleRate),this.metadata.setFormat("codec",r.compressionName),e.abrupt("return",t.chunkSize);case 13:return e.next=15,this.tokenizer.readToken(new h.Uint8ArrayType(t.chunkSize));case 15:return n=e.sent,a=d.fromBuffer(n),e.next=19,(new b.ID3v2Parser).parse(this.metadata,a,this.options);case 19:return e.abrupt("return",t.chunkSize);case 20:return this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*t.chunkSize/this.metadata.format.duration),e.abrupt("return",0);case 22:return e.abrupt("return",0);case 23:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),a}();exports.AIFFParser=w;
},{"token-types":"No44","debug":"t61f","strtok3/lib/core":"R0T4","../id3v2/ID3v2Parser":"fbDe","../common/FourCC":"Rl63","../common/BasicParser":"YSvq","./AiffToken":"QkHS","../iff":"TXud"}],"LSyN":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function n(e){t(this,n),this.str=e}return r(n,[{key:"equals",value:function(e){return this.str===e.str}},{key:"toBin",value:function(){return n.encode(this.str)}}],[{key:"fromBin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new n(this.decode(e,t))}},{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(e.readUInt32LE(t).toString(16)+"-"+e.readUInt16LE(t+4).toString(16)+"-"+e.readUInt16LE(t+6).toString(16)+"-"+e.readUInt16BE(t+8).toString(16)+"-"+e.slice(t+10,t+16).toString("hex")).toUpperCase()}},{key:"decodeMediaType",value:function(e){switch(e.str){case n.AudioMedia.str:return"audio";case n.VideoMedia.str:return"video";case n.CommandMedia.str:return"command";case n.Degradable_JPEG_Media.str:return"degradable-jpeg";case n.FileTransferMedia.str:return"file-transfer";case n.BinaryMedia.str:return"binary"}}},{key:"encode",value:function(t){var n=e.alloc(16);return n.writeUInt32LE(parseInt(t.slice(0,8),16),0),n.writeUInt16LE(parseInt(t.slice(9,13),16),4),n.writeUInt16LE(parseInt(t.slice(14,18),16),6),e.from(t.slice(19,23),"hex").copy(n,8),e.from(t.slice(24),"hex").copy(n,10),n}}]),n}();exports.default=a,a.HeaderObject=new a("75B22630-668E-11CF-A6D9-00AA0062CE6C"),a.DataObject=new a("75B22636-668E-11CF-A6D9-00AA0062CE6C"),a.SimpleIndexObject=new a("33000890-E5B1-11CF-89F4-00A0C90349CB"),a.IndexObject=new a("D6E229D3-35DA-11D1-9034-00A0C90349BE"),a.MediaObjectIndexObject=new a("FEB103F8-12AD-4C64-840F-2A1D2F7AD48C"),a.TimecodeIndexObject=new a("3CB73FD0-0C4A-4803-953D-EDF7B6228F0C"),a.FilePropertiesObject=new a("8CABDCA1-A947-11CF-8EE4-00C00C205365"),a.StreamPropertiesObject=new a("B7DC0791-A9B7-11CF-8EE6-00C00C205365"),a.HeaderExtensionObject=new a("5FBF03B5-A92E-11CF-8EE3-00C00C205365"),a.CodecListObject=new a("86D15240-311D-11D0-A3A4-00A0C90348F6"),a.ScriptCommandObject=new a("1EFB1A30-0B62-11D0-A39B-00A0C90348F6"),a.MarkerObject=new a("F487CD01-A951-11CF-8EE6-00C00C205365"),a.BitrateMutualExclusionObject=new a("D6E229DC-35DA-11D1-9034-00A0C90349BE"),a.ErrorCorrectionObject=new a("75B22635-668E-11CF-A6D9-00AA0062CE6C"),a.ContentDescriptionObject=new a("75B22633-668E-11CF-A6D9-00AA0062CE6C"),a.ExtendedContentDescriptionObject=new a("D2D0A440-E307-11D2-97F0-00A0C95EA850"),a.ContentBrandingObject=new a("2211B3FA-BD23-11D2-B4B7-00A0C955FC6E"),a.StreamBitratePropertiesObject=new a("7BF875CE-468D-11D1-8D82-006097C9A2B2"),a.ContentEncryptionObject=new a("2211B3FB-BD23-11D2-B4B7-00A0C955FC6E"),a.ExtendedContentEncryptionObject=new a("298AE614-2622-4C17-B935-DAE07EE9289C"),a.DigitalSignatureObject=new a("2211B3FC-BD23-11D2-B4B7-00A0C955FC6E"),a.PaddingObject=new a("1806D474-CADF-4509-A4BA-9AABCB96AAE8"),a.ExtendedStreamPropertiesObject=new a("14E6A5CB-C672-4332-8399-A96952065B5A"),a.AdvancedMutualExclusionObject=new a("A08649CF-4775-4670-8A16-6E35357566CD"),a.GroupMutualExclusionObject=new a("D1465A40-5A79-4338-B71B-E36B8FD6C249"),a.StreamPrioritizationObject=new a("D4FED15B-88D3-454F-81F0-ED5C45999E24"),a.BandwidthSharingObject=new a("A69609E6-517B-11D2-B6AF-00C04FD908E9"),a.LanguageListObject=new a("7C4346A9-EFE0-4BFC-B229-393EDE415C85"),a.MetadataObject=new a("C5F8CBEA-5BAF-4877-8467-AA8C44FA4CCA"),a.MetadataLibraryObject=new a("44231C94-9498-49D1-A141-1D134E457054"),a.IndexParametersObject=new a("D6E229DF-35DA-11D1-9034-00A0C90349BE"),a.MediaObjectIndexParametersObject=new a("6B203BAD-3F11-48E4-ACA8-D7613DE2CFA7"),a.TimecodeIndexParametersObject=new a("F55E496D-9797-4B5D-8C8B-604DFE9BFB24"),a.CompatibilityObject=new a("26F18B5D-4584-47EC-9F5F-0E651F0452C9"),a.AdvancedContentEncryptionObject=new a("43058533-6981-49E6-9B74-AD12CB86D58C"),a.AudioMedia=new a("F8699E40-5B4D-11CF-A8FD-00805F5C442B"),a.VideoMedia=new a("BC19EFC0-5B4D-11CF-A8FD-00805F5C442B"),a.CommandMedia=new a("59DACFC0-59E6-11D0-A3AC-00A0C90348F6"),a.JFIF_Media=new a("B61BE100-5B4E-11CF-A8FD-00805F5C442B"),a.Degradable_JPEG_Media=new a("35907DE0-E415-11CF-A917-00805F5C442B"),a.FileTransferMedia=new a("91BD222C-F21C-497A-8B6D-5AA86BFC0185"),a.BinaryMedia=new a("3AFB65E2-47EF-40F2-AC2C-70A90D71D343"),a.ASF_Index_Placeholder_Object=new a("D9AADE20-7C17-4F9C-BC28-8555DD98E2A2");
},{"buffer":"fe91"}],"jmc8":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var r=require("buffer").Buffer;function e(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function t(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function n(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AsfUtil=void 0;var a=require("token-types"),o=require("../common/Util"),u=function(){function t(){e(this,t)}return n(t,null,[{key:"getParserForAttr",value:function(r){return t.attributeParsers[r]}},{key:"parseUnicodeAttr",value:function(r){return o.stripNulls(o.decodeString(r,"utf16le"))}},{key:"parseByteArrayAttr",value:function(e){return r.from(e)}},{key:"parseBoolAttr",value:function(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 1===t.parseWordAttr(r,e)}},{key:"parseDWordAttr",value:function(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r.readUInt32LE(e)}},{key:"parseQWordAttr",value:function(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return a.UINT64_LE.get(r,e)}},{key:"parseWordAttr",value:function(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r.readUInt16LE(e)}}]),t}();exports.AsfUtil=u,u.attributeParsers=[u.parseUnicodeAttr,u.parseByteArrayAttr,u.parseBoolAttr,u.parseDWordAttr,u.parseQWordAttr,u.parseWordAttr,u.parseByteArrayAttr];
},{"token-types":"No44","../common/Util":"SkgS","buffer":"fe91"}],"b0dH":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t,r,n,a,o,i){try{var u=e[o](i),c=u.value}catch(s){return void r(s)}u.done?t(c):Promise.resolve(c).then(n,a)}function n(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var i=e.apply(t,n);function u(e){r(i,a,o,u,c,"next",e)}function c(e){r(i,a,o,u,c,"throw",e)}u(void 0)})}}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=s();return function(){var r,n=f(e);if(t){var a=f(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?c(e):r}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WmPictureToken=exports.MetadataLibraryObjectState=exports.MetadataObjectState=exports.ExtendedStreamPropertiesObjectState=exports.ExtendedContentDescriptionObjectState=exports.ContentDescriptionObjectState=exports.readCodecEntries=exports.HeaderExtensionObject=exports.StreamPropertiesObject=exports.FilePropertiesObject=exports.IgnoreObjectState=exports.State=exports.HeaderObjectToken=exports.TopLevelHeaderObjectToken=exports.DataType=void 0;var v,b=require("../common/Util"),m=require("token-types"),y=require("./GUID"),g=require("./AsfUtil"),x=require("../id3v2/ID3v2Token");!function(e){e[e.UnicodeString=0]="UnicodeString",e[e.ByteArray=1]="ByteArray",e[e.Bool=2]="Bool",e[e.DWord=3]="DWord",e[e.QWord=4]="QWord",e[e.Word=5]="Word"}(v=exports.DataType||(exports.DataType={})),exports.TopLevelHeaderObjectToken={len:30,get:function(e,t){return{objectId:y.default.fromBin(new m.BufferType(16).get(e,t)),objectSize:Number(m.UINT64_LE.get(e,t+16)),numberOfHeaderObjects:m.UINT32_LE.get(e,t+24)}}},exports.HeaderObjectToken={len:24,get:function(e,t){return{objectId:y.default.fromBin(new m.BufferType(16).get(e,t)),objectSize:Number(m.UINT64_LE.get(e,t+16))}}};var h=function(){function e(t){l(this,e),this.len=Number(t.objectSize)-exports.HeaderObjectToken.len}return d(e,[{key:"postProcessTag",value:function(e,t,r,n){if("WM/Picture"===t)e.push({id:t,value:z.fromBuffer(n)});else{var a=g.AsfUtil.getParserForAttr(r);if(!a)throw new Error("unexpected value headerType: "+r);e.push({id:t,value:a(n)})}}}]),e}();exports.State=h;var E=function(e){a(r,h);var t=i(r);function r(e){return l(this,r),t.call(this,e)}return d(r,[{key:"get",value:function(e,t){return null}}]),r}();exports.IgnoreObjectState=E;var I=function(e){a(r,h);var t=i(r);function r(e){return l(this,r),t.call(this,e)}return d(r,[{key:"get",value:function(e,t){return{fileId:y.default.fromBin(e,t),fileSize:m.UINT64_LE.get(e,t+16),creationDate:m.UINT64_LE.get(e,t+24),dataPacketsCount:m.UINT64_LE.get(e,t+32),playDuration:m.UINT64_LE.get(e,t+40),sendDuration:m.UINT64_LE.get(e,t+48),preroll:m.UINT64_LE.get(e,t+56),flags:{broadcast:b.getBit(e,t+64,24),seekable:b.getBit(e,t+64,25)},minimumDataPacketSize:m.UINT32_LE.get(e,t+68),maximumDataPacketSize:m.UINT32_LE.get(e,t+72),maximumBitrate:m.UINT32_LE.get(e,t+76)}}}]),r}();exports.FilePropertiesObject=I,I.guid=y.default.FilePropertiesObject;var T=function(e){a(r,h);var t=i(r);function r(e){return l(this,r),t.call(this,e)}return d(r,[{key:"get",value:function(e,t){return{streamType:y.default.decodeMediaType(y.default.fromBin(e,t)),errorCorrectionType:y.default.fromBin(e,t+8)}}}]),r}();exports.StreamPropertiesObject=T,T.guid=y.default.StreamPropertiesObject;var L=function(){function e(){l(this,e),this.len=22}return d(e,[{key:"get",value:function(e,t){return{reserved1:y.default.fromBin(e,t),reserved2:e.readUInt16LE(t+16),extensionDataSize:e.readUInt32LE(t+18)}}}]),e}();exports.HeaderExtensionObject=L,L.guid=y.default.HeaderExtensionObject;var j={len:20,get:function(e,t){return{entryCount:e.readUInt16LE(t+16)}}};function O(e){return U.apply(this,arguments)}function U(){return(U=n(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.readNumber(m.UINT16_LE);case 2:return r=e.sent,e.next=5,t.readToken(new m.StringType(2*r,"utf16le"));case 5:return e.abrupt("return",e.sent.replace("\0",""));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function S(e){return k.apply(this,arguments)}function k(){return(k=n(regeneratorRuntime.mark(function e(t){var r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.readToken(j);case 2:r=e.sent,n=[],a=0;case 5:if(!(a<r.entryCount)){e.next=14;break}return e.t0=n,e.next=9,N(t);case 9:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 11:++a,e.next=5;break;case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function B(e){return P.apply(this,arguments)}function P(){return(P=n(regeneratorRuntime.mark(function t(r){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.readNumber(m.UINT16_LE);case 2:return n=t.sent,a=e.alloc(n),t.next=6,r.readBuffer(a);case 6:return t.abrupt("return",a);case 7:case"end":return t.stop()}},t)}))).apply(this,arguments)}function N(e){return _.apply(this,arguments)}function _(){return(_=n(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.readNumber(m.UINT16_LE);case 2:return r=e.sent,e.t0={videoCodec:1==(1&r),audioCodec:2==(2&r)},e.next=6,O(t);case 6:return e.t1=e.sent,e.next=9,O(t);case 9:return e.t2=e.sent,e.next=12,B(t);case 12:return e.t3=e.sent,e.abrupt("return",{type:e.t0,codecName:e.t1,description:e.t2,information:e.t3});case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}exports.readCodecEntries=S;var w=function(e){a(r,h);var t=i(r);function r(e){return l(this,r),t.call(this,e)}return d(r,[{key:"get",value:function(e,t){for(var n=[],a=t+10,o=0;o<r.contentDescTags.length;++o){var i=e.readUInt16LE(t+2*o);if(i>0){var u=r.contentDescTags[o],c=a+i;n.push({id:u,value:g.AsfUtil.parseUnicodeAttr(e.slice(a,c))}),a=c}}return n}}]),r}();exports.ContentDescriptionObjectState=w,w.guid=y.default.ContentDescriptionObject,w.contentDescTags=["Title","Author","Copyright","Description","Rating"];var D=function(e){a(r,h);var t=i(r);function r(e){return l(this,r),t.call(this,e)}return d(r,[{key:"get",value:function(e,t){for(var r=[],n=e.readUInt16LE(t),a=t+2,o=0;o<n;o+=1){var i=e.readUInt16LE(a);a+=2;var u=g.AsfUtil.parseUnicodeAttr(e.slice(a,a+i));a+=i;var c=e.readUInt16LE(a);a+=2;var s=e.readUInt16LE(a);a+=2;var f=e.slice(a,a+s);a+=s,this.postProcessTag(r,u,c,f)}return r}}]),r}();exports.ExtendedContentDescriptionObjectState=D,D.guid=y.default.ExtendedContentDescriptionObject;var C=function(e){a(r,h);var t=i(r);function r(e){return l(this,r),t.call(this,e)}return d(r,[{key:"get",value:function(e,t){return{startTime:m.UINT64_LE.get(e,t),endTime:m.UINT64_LE.get(e,t+8),dataBitrate:e.readInt32LE(t+12),bufferSize:e.readInt32LE(t+16),initialBufferFullness:e.readInt32LE(t+20),alternateDataBitrate:e.readInt32LE(t+24),alternateBufferSize:e.readInt32LE(t+28),alternateInitialBufferFullness:e.readInt32LE(t+32),maximumObjectSize:e.readInt32LE(t+36),flags:{reliableFlag:b.getBit(e,t+40,0),seekableFlag:b.getBit(e,t+40,1),resendLiveCleanpointsFlag:b.getBit(e,t+40,2)},streamNumber:e.readInt16LE(t+42),streamLanguageId:e.readInt16LE(t+44),averageTimePerFrame:e.readInt32LE(t+52),streamNameCount:e.readInt32LE(t+54),payloadExtensionSystems:e.readInt32LE(t+56),streamNames:[],streamPropertiesObject:null}}}]),r}();exports.ExtendedStreamPropertiesObjectState=C,C.guid=y.default.ExtendedStreamPropertiesObject;var R=function(t){a(n,h);var r=i(n);function n(e){return l(this,n),r.call(this,e)}return d(n,[{key:"get",value:function(t,r){for(var n=[],a=e.from(t),o=a.readUInt16LE(r),i=r+2,u=0;u<o;u+=1){i+=4;var c=a.readUInt16LE(i);i+=2;var s=a.readUInt16LE(i);i+=2;var f=a.readUInt32LE(i);i+=4;var l=g.AsfUtil.parseUnicodeAttr(a.slice(i,i+c));i+=c;var p=a.slice(i,i+f);i+=f,this.postProcessTag(n,l,s,p)}return n}}]),n}();exports.MetadataObjectState=R,R.guid=y.default.MetadataObject;var A=function(e){a(r,R);var t=i(r);function r(e){return l(this,r),t.call(this,e)}return r}();exports.MetadataLibraryObjectState=A,A.guid=y.default.MetadataLibraryObject;var z=function(){function t(e){l(this,t),this.len=e}return d(t,[{key:"get",value:function(e,t){for(var r=e.readUInt8(t++),n=e.readInt32LE(t),a=5;0!==e.readUInt16BE(a);)a+=2;for(var o=e.slice(5,a).toString("utf16le");0!==e.readUInt16BE(a);)a+=2;var i=e.slice(5,a).toString("utf16le");return{type:x.AttachedPictureType[r],format:o,description:i,size:n,data:e.slice(a+4)}}}],[{key:"fromBase64",value:function(t){return this.fromBuffer(e.from(t,"base64"))}},{key:"fromBuffer",value:function(e){return new t(e.length).get(e,0)}}]),t}();exports.WmPictureToken=z;
},{"../common/Util":"SkgS","token-types":"No44","./GUID":"LSyN","./AsfUtil":"jmc8","../id3v2/ID3v2Token":"b4xq","buffer":"fe91"}],"JodZ":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function r(e){return function(){var r=this,n=arguments;return new Promise(function(a,o){var i=e.apply(r,n);function c(e){t(i,a,o,c,s,"next",e)}function s(e){t(i,a,o,c,s,"throw",e)}c(void 0)})}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=b();return function(){var r,n=f(e);if(t){var a=f(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?d(t):r}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AsfParser=void 0;var p=require("debug"),l=require("../type"),k=require("./GUID"),h=require("./AsfObject"),j=require("../common/BasicParser"),m=(0,p.default)("music-metadata:parser:ASF"),y="asf",O=function(e){i(a,j.BasicParser);var t=s(a);function a(){return n(this,a),t.apply(this,arguments)}return o(a,[{key:"parse",value:function(){var e=r(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.readToken(h.TopLevelHeaderObjectToken);case 2:if((t=e.sent).objectId.equals(k.default.HeaderObject)){e.next=5;break}throw new Error("expected asf header; but was not found; got: "+t.objectId.str);case 5:return e.prev=5,e.next=8,this.parseObjectHeader(t.numberOfHeaderObjects);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),m("Error while parsing ASF: %s",e.t0);case 13:case"end":return e.stop()}},e,this,[[5,10]])}));return function(){return e.apply(this,arguments)}}()},{key:"parseObjectHeader",value:function(){var e=r(regeneratorRuntime.mark(function e(t){var r,n,a,o,i,c,s,u=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.readToken(h.HeaderObjectToken);case 2:n=e.sent,m("header GUID=%s",n.objectId.str),e.t0=n.objectId.str,e.next=e.t0===h.FilePropertiesObject.guid.str?7:e.t0===h.StreamPropertiesObject.guid.str?13:e.t0===h.HeaderExtensionObject.guid.str?18:e.t0===h.ContentDescriptionObjectState.guid.str?24:e.t0===h.ExtendedContentDescriptionObjectState.guid.str?29:e.t0===k.default.CodecListObject.str?34:e.t0===k.default.StreamBitratePropertiesObject.str?41:e.t0===k.default.PaddingObject.str?44:48;break;case 7:return e.next=9,this.tokenizer.readToken(new h.FilePropertiesObject(n));case 9:return a=e.sent,this.metadata.setFormat("duration",Number(a.playDuration/BigInt(1e3))/1e4-Number(a.preroll)/1e3),this.metadata.setFormat("bitrate",a.maximumBitrate),e.abrupt("break",52);case 13:return e.next=15,this.tokenizer.readToken(new h.StreamPropertiesObject(n));case 15:return o=e.sent,this.metadata.setFormat("container","ASF/"+o.streamType),e.abrupt("break",52);case 18:return e.next=20,this.tokenizer.readToken(new h.HeaderExtensionObject);case 20:return i=e.sent,e.next=23,this.parseExtensionObject(i.extensionDataSize);case 23:return e.abrupt("break",52);case 24:return e.next=26,this.tokenizer.readToken(new h.ContentDescriptionObjectState(n));case 26:return r=e.sent,this.addTags(r),e.abrupt("break",52);case 29:return e.next=31,this.tokenizer.readToken(new h.ExtendedContentDescriptionObjectState(n));case 31:return r=e.sent,this.addTags(r),e.abrupt("break",52);case 34:return e.next=36,h.readCodecEntries(this.tokenizer);case 36:return(c=e.sent).forEach(function(e){u.metadata.addStreamInfo({type:e.type.videoCodec?l.TrackType.video:l.TrackType.audio,codecName:e.codecName})}),s=c.filter(function(e){return e.type.audioCodec}).map(function(e){return e.codecName}).join("/"),this.metadata.setFormat("codec",s),e.abrupt("break",52);case 41:return e.next=43,this.tokenizer.ignore(n.objectSize-h.HeaderObjectToken.len);case 43:return e.abrupt("break",52);case 44:return m("Padding: %s bytes",n.objectSize-h.HeaderObjectToken.len),e.next=47,this.tokenizer.ignore(n.objectSize-h.HeaderObjectToken.len);case 47:return e.abrupt("break",52);case 48:return this.metadata.addWarning("Ignore ASF-Object-GUID: "+n.objectId.str),m("Ignore ASF-Object-GUID: %s",n.objectId.str),e.next=52,this.tokenizer.readToken(new h.IgnoreObjectState(n));case 52:if(--t){e.next=0;break}case 53:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addTags",value:function(e){var t=this;e.forEach(function(e){t.metadata.addTag(y,e.id,e.value)})}},{key:"parseExtensionObject",value:function(){var e=r(regeneratorRuntime.mark(function e(t){var r,n,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.readToken(h.HeaderObjectToken);case 2:r=e.sent,n=r.objectSize-h.HeaderObjectToken.len,e.t0=r.objectId.str,e.next=e.t0===h.ExtendedStreamPropertiesObjectState.guid.str?7:e.t0===h.MetadataObjectState.guid.str?10:e.t0===h.MetadataLibraryObjectState.guid.str?15:e.t0===k.default.PaddingObject.str?20:e.t0===k.default.CompatibilityObject.str?23:e.t0===k.default.ASF_Index_Placeholder_Object.str?25:28;break;case 7:return e.next=9,this.tokenizer.readToken(new h.ExtendedStreamPropertiesObjectState(r));case 9:return e.abrupt("break",32);case 10:return e.next=12,this.tokenizer.readToken(new h.MetadataObjectState(r));case 12:return a=e.sent,this.addTags(a),e.abrupt("break",32);case 15:return e.next=17,this.tokenizer.readToken(new h.MetadataLibraryObjectState(r));case 17:return o=e.sent,this.addTags(o),e.abrupt("break",32);case 20:return e.next=22,this.tokenizer.ignore(n);case 22:return e.abrupt("break",32);case 23:return this.tokenizer.ignore(n),e.abrupt("break",32);case 25:return e.next=27,this.tokenizer.ignore(n);case 27:return e.abrupt("break",32);case 28:return this.metadata.addWarning("Ignore ASF-Object-GUID: "+r.objectId.str),e.next=31,this.tokenizer.readToken(new h.IgnoreObjectState(r));case 31:return e.abrupt("break",32);case 32:t-=r.objectSize;case 33:if(t>0){e.next=0;break}case 34:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),a}();exports.AsfParser=O;
},{"debug":"t61f","../type":"E5wx","./GUID":"LSyN","./AsfObject":"b0dH","../common/BasicParser":"YSvq"}],"CrJA":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.IdentificationHeader=exports.CommonHeader=exports.VorbisPictureToken=void 0;var i=require("token-types"),o=require("../../id3v2/ID3v2Token"),a=function(){function r(e){t(this,r),this.len=e}return n(r,[{key:"get",value:function(t,r){var n=o.AttachedPictureType[i.UINT32_BE.get(t,r)],a=i.UINT32_BE.get(t,r+=4),u=t.toString("utf-8",r+=4,r+a),f=i.UINT32_BE.get(t,r+=a),c=t.toString("utf-8",r+=4,r+f),s=i.UINT32_BE.get(t,r+=f),g=i.UINT32_BE.get(t,r+=4),l=i.UINT32_BE.get(t,r+=4),p=i.UINT32_BE.get(t,r+=4),d=i.UINT32_BE.get(t,r+=4);return{type:n,format:u,description:c,width:s,height:g,colour_depth:l,indexed_color:p,data:e.from(t.slice(r+=4,r+d))}}}],[{key:"fromBase64",value:function(t){return this.fromBuffer(e.from(t,"base64"))}},{key:"fromBuffer",value:function(e){return new r(e.length).get(e,0)}}]),r}();exports.VorbisPictureToken=a,exports.CommonHeader={len:7,get:function(e,t){return{packetType:e.readUInt8(t),vorbis:new i.StringType(6,"ascii").get(e,t+1)}}},exports.IdentificationHeader={len:23,get:function(e,t){var r=new DataView(e.buffer,e.byteOffset);return{version:r.getUint32(t+0,!0),channelMode:r.getUint8(t+4),sampleRate:r.getUint32(t+5,!0),bitrateMax:r.getUint32(t+9,!0),bitrateNominal:r.getUint32(t+13,!0),bitrateMin:r.getUint32(t+17,!0)}}};
},{"token-types":"No44","../../id3v2/ID3v2Token":"b4xq","buffer":"fe91"}],"b5FX":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,r,n,o,i,a){try{var u=e[i](a),s=u.value}catch(c){return void r(c)}u.done?t(s):Promise.resolve(s).then(n,o)}function r(e){return function(){var r=this,n=arguments;return new Promise(function(o,i){var a=e.apply(r,n);function u(e){t(a,o,i,u,s,"next",e)}function s(e){t(a,o,i,u,s,"throw",e)}u(void 0)})}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=p();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?f(t):r}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AbstractID3Parser=void 0;var h=require("strtok3/lib/core"),v=require("debug"),y=require("./ID3v2Token"),d=require("./ID3v2Parser"),b=require("../id3v1/ID3v1Parser"),m=require("../common/BasicParser"),k=(0,v.default)("music-metadata:parser:ID3"),x=function(e){a(o,m.BasicParser);var t=s(o);function o(){var e;return n(this,o),(e=t.apply(this,arguments)).id3parser=new d.ID3v2Parser,e}return i(o,[{key:"parse",value:function(){var e=r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.parseID3v2();case 3:e.next=12;break;case 5:if(e.prev=5,e.t0=e.catch(0),!(e.t0 instanceof h.EndOfStreamError)){e.next=11;break}k("End-of-stream"),e.next=12;break;case 11:throw e.t0;case 12:case"end":return e.stop()}},e,this,[[0,5]])}));return function(){return e.apply(this,arguments)}}()},{key:"finalize",value:function(){}},{key:"parseID3v2",value:function(){var e=r(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tryReadId3v2Headers();case 2:return k("End of ID3v2 header, go to MPEG-parser: pos=%s",this.tokenizer.position),e.next=5,this.postId3v2Parse();case 5:if(!this.options.skipPostHeaders||!this.metadata.hasAny()){e.next=9;break}this.finalize(),e.next=13;break;case 9:return t=new b.ID3v1Parser,e.next=12,t.init(this.metadata,this.tokenizer,this.options).parse();case 12:this.finalize();case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"tryReadId3v2Headers",value:function(){var e=r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.peekToken(y.ID3v2Header);case 2:if("ID3"!==e.sent.fileIdentifier){e.next=8;break}return k("Found ID3v2 header, pos=%s",this.tokenizer.position),e.next=7,this.id3parser.parse(this.metadata,this.tokenizer,this.options);case 7:return e.abrupt("return",this.tryReadId3v2Headers());case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}],[{key:"startsWithID3v2Header",value:function(){var e=r(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.peekToken(y.ID3v2Header);case 2:return e.t0=e.sent.fileIdentifier,e.abrupt("return","ID3"===e.t0);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}]),o}();exports.AbstractID3Parser=x;
},{"strtok3/lib/core":"R0T4","debug":"t61f","./ID3v2Token":"b4xq","./ID3v2Parser":"fbDe","../id3v1/ID3v1Parser":"VHOF","../common/BasicParser":"YSvq"}],"WXCp":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.VorbisDecoder=void 0;var i=require("token-types"),o=function(){function r(e,n){t(this,r),this.data=e,this.offset=n}return n(r,[{key:"readInt32",value:function(){var e=i.UINT32_LE.get(this.data,this.offset);return this.offset+=4,e}},{key:"readStringUtf8",value:function(){var t=this.readInt32(),r=e.from(this.data).toString("utf-8",this.offset,this.offset+t);return this.offset+=t,r}},{key:"parseUserComment",value:function(){var e=this.offset,t=this.readStringUtf8(),r=t.indexOf("=");return{key:t.slice(0,r).toUpperCase(),value:t.slice(r+1),len:this.offset-e}}}]),r}();exports.VorbisDecoder=o;
},{"token-types":"No44","buffer":"fe91"}],"Y4Cr":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.VorbisParser=void 0;var s=require("token-types"),i=require("debug"),o=require("./VorbisDecoder"),n=require("./Vorbis"),u=(0,i.default)("music-metadata:parser:ogg:vorbis1"),l=function(){function a(e,r){t(this,a),this.metadata=e,this.options=r,this.pageSegments=[]}return r(a,[{key:"parsePage",value:function(t,a){if(t.headerType.firstPage)this.parseFirstPage(t,a);else{if(t.headerType.continued){if(0===this.pageSegments.length)throw new Error("Cannot continue on previous page");this.pageSegments.push(a)}if(t.headerType.lastPage||!t.headerType.continued){if(this.pageSegments.length>0){var r=e.concat(this.pageSegments);this.parseFullPage(r)}this.pageSegments=t.headerType.lastPage?[]:[a]}}t.headerType.lastPage&&this.calculateDuration(t)}},{key:"flush",value:function(){this.parseFullPage(e.concat(this.pageSegments))}},{key:"parseUserComment",value:function(e,t){var a=new o.VorbisDecoder(e,t).parseUserComment();return this.addTag(a.key,a.value),a.len}},{key:"addTag",value:function(e,t){if("METADATA_BLOCK_PICTURE"===e&&"string"==typeof t){if(this.options.skipCovers)return void u("Ignore picture");t=n.VorbisPictureToken.fromBase64(t),u("Push picture: id=".concat(e,", format=").concat(t.format))}else u("Push tag: id=".concat(e,", value=").concat(t));this.metadata.addTag("vorbis",e,t)}},{key:"calculateDuration",value:function(e){this.metadata.format.sampleRate&&e.absoluteGranulePosition>=0&&(this.metadata.setFormat("numberOfSamples",e.absoluteGranulePosition),this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate))}},{key:"parseFirstPage",value:function(e,t){this.metadata.setFormat("codec","Vorbis I"),u("Parse first page");var a=n.CommonHeader.get(t,0);if("vorbis"!==a.vorbis)throw new Error("Metadata does not look like Vorbis");if(1!==a.packetType)throw new Error("First Ogg page should be type 1: the identification header");var r=n.IdentificationHeader.get(t,n.CommonHeader.len);this.metadata.setFormat("sampleRate",r.sampleRate),this.metadata.setFormat("bitrate",r.bitrateNominal),this.metadata.setFormat("numberOfChannels",r.channelMode),u("sample-rate=%s[hz], bitrate=%s[b/s], channel-mode=%s",r.sampleRate,r.bitrateNominal,r.channelMode)}},{key:"parseFullPage",value:function(e){var t=n.CommonHeader.get(e,0);switch(u("Parse full page: type=%s, byteLength=%s",t.packetType,e.byteLength),t.packetType){case 3:return this.parseUserCommentList(e,n.CommonHeader.len)}}},{key:"parseUserCommentList",value:function(e,t){var a=s.UINT32_LE.get(e,t);t+=4,t+=a;var r=s.UINT32_LE.get(e,t);for(t+=4;r-- >0;)t+=this.parseUserComment(e,t)}}]),a}();exports.VorbisParser=l;
},{"token-types":"No44","debug":"t61f","./VorbisDecoder":"WXCp","./Vorbis":"CrJA","buffer":"fe91"}],"OrN4":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(c){return void r(c)}s.done?t(u):Promise.resolve(u).then(n,o)}function r(e){return function(){var r=this,n=arguments;return new Promise(function(o,a){var i=e.apply(r,n);function s(e){t(i,o,a,s,u,"next",e)}function u(e){t(i,o,a,s,u,"throw",e)}s(void 0)})}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function i(e,t,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=s(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function s(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=m();return function(){var r,n=h(e);if(t){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}function f(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?p(t):r}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.FlacParser=void 0;var d,y=require("token-types"),b=require("debug"),g=require("../common/Util"),k=require("../ogg/vorbis/Vorbis"),v=require("../id3v2/AbstractID3Parser"),E=require("../common/FourCC"),P=require("../ogg/vorbis/VorbisParser"),T=require("../ogg/vorbis/VorbisDecoder"),I=(0,b.default)("music-metadata:parser:FLAC");!function(e){e[e.STREAMINFO=0]="STREAMINFO",e[e.PADDING=1]="PADDING",e[e.APPLICATION=2]="APPLICATION",e[e.SEEKTABLE=3]="SEEKTABLE",e[e.VORBIS_COMMENT=4]="VORBIS_COMMENT",e[e.CUESHEET=5]="CUESHEET",e[e.PICTURE=6]="PICTURE"}(d||(d={}));var S=function(e){u(o,v.AbstractID3Parser);var t=l(o);function o(){var e;return n(this,o),(e=t.apply(this,arguments)).padding=0,e}return a(o,[{key:"init",value:function(e,t,r){return i(h(o.prototype),"init",this).call(this,e,t,r),this.vorbisParser=new P.VorbisParser(e,r),this}},{key:"postId3v2Parse",value:function(){var e=r(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.readToken(E.FourCcToken);case 2:if("fLaC"===e.sent.toString()){e.next=5;break}throw new Error("Invalid FLAC preamble");case 5:return e.next=7,this.tokenizer.readToken(B.BlockHeader);case 7:return t=e.sent,e.next=10,this.parseDataBlock(t);case 10:if(!t.lastBlock){e.next=5;break}case 11:this.tokenizer.fileInfo.size&&this.metadata.format.duration&&(r=this.tokenizer.fileInfo.size-this.tokenizer.position,this.metadata.setFormat("bitrate",8*r/this.metadata.format.duration));case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"parseDataBlock",value:function(e){switch(I("blockHeader type=".concat(e.type,", length=").concat(e.length)),e.type){case d.STREAMINFO:return this.parseBlockStreamInfo(e.length);case d.PADDING:this.padding+=e.length;break;case d.APPLICATION:case d.SEEKTABLE:break;case d.VORBIS_COMMENT:return this.parseComment(e.length);case d.CUESHEET:break;case d.PICTURE:return this.parsePicture(e.length).then();default:this.metadata.addWarning("Unknown block type: "+e.type)}return this.tokenizer.ignore(e.length).then()}},{key:"parseBlockStreamInfo",value:function(){var e=r(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t===B.BlockStreamInfo.len){e.next=2;break}throw new Error("Unexpected block-stream-info length");case 2:return e.next=4,this.tokenizer.readToken(B.BlockStreamInfo);case 4:r=e.sent,this.metadata.setFormat("container","FLAC"),this.metadata.setFormat("codec","FLAC"),this.metadata.setFormat("lossless",!0),this.metadata.setFormat("numberOfChannels",r.channels),this.metadata.setFormat("bitsPerSample",r.bitsPerSample),this.metadata.setFormat("sampleRate",r.sampleRate),r.totalSamples>0&&this.metadata.setFormat("duration",r.totalSamples/r.sampleRate);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"parseComment",value:function(){var e=r(regeneratorRuntime.mark(function e(t){var r,n,o,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.readToken(new y.Uint8ArrayType(t));case 2:for(r=e.sent,(n=new T.VorbisDecoder(r,0)).readStringUtf8(),o=n.readInt32(),a=0;a<o;a++)i=n.parseUserComment(),this.vorbisParser.addTag(i.key,i.value);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"parsePicture",value:function(){var e=r(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.options.skipCovers){e.next=4;break}return e.abrupt("return",this.tokenizer.ignore(t));case 4:return e.next=6,this.tokenizer.readToken(new k.VorbisPictureToken(t));case 6:r=e.sent,this.vorbisParser.addTag("METADATA_BLOCK_PICTURE",r);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),o}();exports.FlacParser=S;var B=function e(){n(this,e)};B.BlockHeader={len:4,get:function(e,t){return{lastBlock:g.getBit(e,t,7),type:g.getBitAllignedNumber(e,t,1,7),length:y.UINT24_BE.get(e,t+1)}}},B.BlockStreamInfo={len:34,get:function(e,t){return{minimumBlockSize:y.UINT16_BE.get(e,t),maximumBlockSize:y.UINT16_BE.get(e,t+2)/1e3,minimumFrameSize:y.UINT24_BE.get(e,t+4),maximumFrameSize:y.UINT24_BE.get(e,t+7),sampleRate:y.UINT24_BE.get(e,t+10)>>4,channels:g.getBitAllignedNumber(e,t+12,4,3)+1,bitsPerSample:g.getBitAllignedNumber(e,t+12,7,5)+1,totalSamples:g.getBitAllignedNumber(e,t+13,4,36),fileMD5:new y.Uint8ArrayType(16).get(e,t+18)}}};
},{"token-types":"No44","debug":"t61f","../common/Util":"SkgS","../ogg/vorbis/Vorbis":"CrJA","../id3v2/AbstractID3Parser":"b5FX","../common/FourCC":"Rl63","../ogg/vorbis/VorbisParser":"Y4Cr","../ogg/vorbis/VorbisDecoder":"WXCp"}],"pRTE":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=c();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?s(e):n}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ChapterText=exports.StcoAtom=exports.StszAtom=exports.StscAtom=exports.SampleToChunkToken=exports.SttsAtom=exports.TimeToSampleToken=exports.SoundSampleDescriptionV0=exports.SoundSampleDescriptionVersion=exports.StsdAtom=exports.TrackHeaderAtom=exports.NameAtom=exports.DataAtom=exports.MvhdAtom=exports.MdhdAtom=exports.FixedLengthAtom=exports.mhdr=exports.tkhd=exports.ftyp=exports.ExtendedSize=exports.Header=void 0;var g=require("token-types"),p=require("debug"),T=require("../common/FourCC"),m=(0,p.default)("music-metadata:parser:MP4:atom");exports.Header={len:8,get:function(e,t){var n=g.UINT32_BE.get(e,t);if(n<0)throw new Error("Invalid atom header length");return{length:BigInt(n),name:new g.StringType(4,"binary").get(e,t+4)}},put:function(e,t,n){return g.UINT32_BE.put(e,t,Number(n.length)),T.FourCcToken.put(e,t+4,n.name)}},exports.ExtendedSize=g.UINT64_BE,exports.ftyp={len:4,get:function(e,t){return{type:new g.StringType(4,"ascii").get(e,t)}}},exports.tkhd={len:4,get:function(e,t){return{type:new g.StringType(4,"ascii").get(e,t)}}},exports.mhdr={len:8,get:function(e,t){return{version:g.UINT8.get(e,t),flags:g.UINT24_BE.get(e,t+1),nextItemID:g.UINT32_BE.get(e,t+4)}}};var h=function e(t,n,r){if(l(this,e),this.len=t,t<n)throw new Error("Atom ".concat(r," expected to be ").concat(n,", but specifies ").concat(t," bytes long."));t>n&&m("Warning: atom ".concat(r," expected to be ").concat(n,", but was actually ").concat(t," bytes long."))};exports.FixedLengthAtom=h;var I={len:4,get:function(e,t){var n=g.UINT32_BE.get(e,t)-2082844800;return new Date(1e3*n)}},v=function(e){o(n,h);var t=u(n);function n(e){var r;return l(this,n),(r=t.call(this,e,24,"mdhd")).len=e,r}return r(n,[{key:"get",value:function(e,t){return{version:g.UINT8.get(e,t+0),flags:g.UINT24_BE.get(e,t+1),creationTime:I.get(e,t+4),modificationTime:I.get(e,t+8),timeScale:g.UINT32_BE.get(e,t+12),duration:g.UINT32_BE.get(e,t+16),language:g.UINT16_BE.get(e,t+20),quality:g.UINT16_BE.get(e,t+22)}}}]),n}();exports.MdhdAtom=v;var E=function(e){o(n,h);var t=u(n);function n(e){var r;return l(this,n),(r=t.call(this,e,100,"mvhd")).len=e,r}return r(n,[{key:"get",value:function(e,t){return{version:g.UINT8.get(e,t),flags:g.UINT24_BE.get(e,t+1),creationTime:I.get(e,t+4),modificationTime:I.get(e,t+8),timeScale:g.UINT32_BE.get(e,t+12),duration:g.UINT32_BE.get(e,t+16),preferredRate:g.UINT32_BE.get(e,t+20),preferredVolume:g.UINT16_BE.get(e,t+24),previewTime:g.UINT32_BE.get(e,t+72),previewDuration:g.UINT32_BE.get(e,t+76),posterTime:g.UINT32_BE.get(e,t+80),selectionTime:g.UINT32_BE.get(e,t+84),selectionDuration:g.UINT32_BE.get(e,t+88),currentTime:g.UINT32_BE.get(e,t+92),nextTrackID:g.UINT32_BE.get(e,t+96)}}}]),n}();exports.MvhdAtom=E;var N=function(){function t(e){l(this,t),this.len=e}return r(t,[{key:"get",value:function(t,n){return{type:{set:g.UINT8.get(t,n+0),type:g.UINT24_BE.get(t,n+1)},locale:g.UINT24_BE.get(t,n+4),value:e.from(new g.Uint8ArrayType(this.len-8).get(t,n+8))}}}]),t}();exports.DataAtom=N;var _=function(){function e(t){l(this,e),this.len=t}return r(e,[{key:"get",value:function(e,t){return{version:g.UINT8.get(e,t),flags:g.UINT24_BE.get(e,t+1),name:new g.StringType(this.len-4,"utf-8").get(e,t+4)}}}]),e}();exports.NameAtom=_;var y=function(){function e(t){l(this,e),this.len=t}return r(e,[{key:"get",value:function(e,t){return{version:g.UINT8.get(e,t),flags:g.UINT24_BE.get(e,t+1),creationTime:I.get(e,t+4),modificationTime:I.get(e,t+8),trackId:g.UINT32_BE.get(e,t+12),duration:g.UINT32_BE.get(e,t+20),layer:g.UINT16_BE.get(e,t+24),alternateGroup:g.UINT16_BE.get(e,t+26),volume:g.UINT16_BE.get(e,t+28)}}}]),e}();exports.TrackHeaderAtom=y;var d={len:8,get:function(e,t){return{version:g.UINT8.get(e,t),flags:g.UINT24_BE.get(e,t+1),numberOfEntries:g.UINT32_BE.get(e,t+4)}}},B=function(){function e(t){l(this,e),this.len=t}return r(e,[{key:"get",value:function(e,t){return{dataFormat:T.FourCcToken.get(e,t),dataReferenceIndex:g.UINT16_BE.get(e,t+10),description:new g.Uint8ArrayType(this.len-12).get(e,t+12)}}}]),e}(),x=function(){function e(t){l(this,e),this.len=t}return r(e,[{key:"get",value:function(e,t){var n=d.get(e,t);t+=d.len;for(var r=[],o=0;o<n.numberOfEntries;++o){var i=g.UINT32_BE.get(e,t);t+=g.UINT32_BE.len,r.push(new B(i).get(e,t)),t+=i}return{header:n,table:r}}}]),e}();exports.StsdAtom=x,exports.SoundSampleDescriptionVersion={len:8,get:function(e,t){return{version:g.INT16_BE.get(e,t),revision:g.INT16_BE.get(e,t+2),vendor:g.INT32_BE.get(e,t+4)}}},exports.SoundSampleDescriptionV0={len:12,get:function(e,t){return{numAudioChannels:g.INT16_BE.get(e,t+0),sampleSize:g.INT16_BE.get(e,t+2),compressionId:g.INT16_BE.get(e,t+4),packetSize:g.INT16_BE.get(e,t+6),sampleRate:g.UINT16_BE.get(e,t+8)+g.UINT16_BE.get(e,t+10)/1e4}}};var U=function(){function e(t,n){l(this,e),this.len=t,this.token=n}return r(e,[{key:"get",value:function(e,t){var n=g.INT32_BE.get(e,t+4);return{version:g.INT8.get(e,t+0),flags:g.INT24_BE.get(e,t+1),numberOfEntries:n,entries:O(e,this.token,t+8,this.len-8,n)}}}]),e}();exports.TimeToSampleToken={len:8,get:function(e,t){return{count:g.INT32_BE.get(e,t+0),duration:g.INT32_BE.get(e,t+4)}}};var S=function(e){o(n,U);var t=u(n);function n(e){var r;return l(this,n),(r=t.call(this,e,exports.TimeToSampleToken)).len=e,r}return n}();exports.SttsAtom=S,exports.SampleToChunkToken={len:12,get:function(e,t){return{firstChunk:g.INT32_BE.get(e,t),samplesPerChunk:g.INT32_BE.get(e,t+4),sampleDescriptionId:g.INT32_BE.get(e,t+8)}}};var b=function(e){o(n,U);var t=u(n);function n(e){var r;return l(this,n),(r=t.call(this,e,exports.SampleToChunkToken)).len=e,r}return n}();exports.StscAtom=b;var k=function(){function e(t){l(this,e),this.len=t}return r(e,[{key:"get",value:function(e,t){var n=g.INT32_BE.get(e,t+8);return{version:g.INT8.get(e,t),flags:g.INT24_BE.get(e,t+1),sampleSize:g.INT32_BE.get(e,t+4),numberOfEntries:n,entries:O(e,g.INT32_BE,t+12,this.len-12,n)}}}]),e}();exports.StszAtom=k;var w=function(e){o(n,U);var t=u(n);function n(e){var r;return l(this,n),(r=t.call(this,e,g.INT32_BE)).len=e,r}return n}();exports.StcoAtom=w;var A=function(){function e(t){l(this,e),this.len=t}return r(e,[{key:"get",value:function(e,t){var n=g.INT16_BE.get(e,t+0);return new g.StringType(n,"utf-8").get(e,t+2)}}]),e}();function O(e,t,n,r,o){if(m("remainingLen=".concat(r,", numberOfEntries=").concat(o," * token-len=").concat(t.len)),0===r)return[];if(r!==o*t.len)throw new Error("mismatch number-of-entries with remaining atom-length");for(var i=[],u=0;u<o;++u)i.push(t.get(e,n)),n+=t.len;return i}exports.ChapterText=A;
},{"token-types":"No44","debug":"t61f","../common/FourCC":"Rl63","buffer":"fe91"}],"gGM9":[function(require,module,exports) {
"use strict";function e(e,t,n,r,a,i,o){try{var u=e[i](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,a)}function t(t){return function(){var n=this,r=arguments;return new Promise(function(a,i){var o=t.apply(n,r);function u(t){e(o,a,i,u,s,"next",t)}function s(t){e(o,a,i,u,s,"throw",t)}u(void 0)})}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Atom=void 0;var i=require("debug"),o=require("./AtomToken"),u=(0,i.default)("music-metadata:parser:MP4:Atom"),s=function(){function e(t,r,a){n(this,e),this.header=t,this.extended=r,this.parent=a,this.children=[],this.atomPath=(this.parent?this.parent.atomPath+".":"")+this.header.name}return a(e,[{key:"getHeaderLength",value:function(){return this.extended?16:8}},{key:"getPayloadLength",value:function(e){return(this.header.length===BigInt(0)?e:Number(this.header.length))-this.getHeaderLength()}},{key:"readAtoms",value:function(){var n=t(regeneratorRuntime.mark(function t(n,r,a){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a>0)){t.next=8;break}return t.next=3,e.readAtom(n,r,this,a);case 3:i=t.sent,this.children.push(i),a-=i.header.length===BigInt(0)?a:Number(i.header.length),t.next=0;break;case 8:case"end":return t.stop()}},t,this)}));return function(e,t,r){return n.apply(this,arguments)}}()},{key:"readData",value:function(){var e=t(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.header.name,e.next="moov"===e.t0?3:"udta"===e.t0?3:"trak"===e.t0?3:"mdia"===e.t0?3:"minf"===e.t0?3:"stbl"===e.t0?3:"<id>"===e.t0?3:"ilst"===e.t0?3:"tref"===e.t0?3:"meta"===e.t0?4:"mdhd"===e.t0?7:"mvhd"===e.t0?7:"tkhd"===e.t0?7:"stsz"===e.t0?7:(e.t0,7);break;case 3:return e.abrupt("return",this.readAtoms(t,n,this.getPayloadLength(r)));case 4:return e.next=6,t.ignore(4);case 6:return e.abrupt("return",this.readAtoms(t,n,this.getPayloadLength(r)-4));case 7:return e.abrupt("return",n(this,r));case 8:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()}],[{key:"readAtom",value:function(){var n=t(regeneratorRuntime.mark(function t(n,r,a,i){var s,c,h,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=n.position,t.next=3,n.readToken(o.Header);case 3:if(c=t.sent,!(c.length===BigInt(1))){t.next=9;break}return t.next=8,n.readToken(o.ExtendedSize);case 8:c.length=t.sent;case 9:return h=new e(c,c.length===BigInt(1),a),d=h.getPayloadLength(i),u("parse atom name=".concat(h.atomPath,", extended=").concat(h.extended,", offset=").concat(s,", len=").concat(h.header.length)),t.next=14,h.readData(n,r,d);case 14:return t.abrupt("return",h);case 15:case"end":return t.stop()}},t)}));return function(e,t,r,a){return n.apply(this,arguments)}}()}]),e}();exports.Atom=s;
},{"debug":"t61f","./AtomToken":"pRTE"}],"IoaY":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(c){return void r(c)}s.done?t(u):Promise.resolve(u).then(n,a)}function n(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var i=e.apply(t,n);function s(e){r(i,a,o,s,u,"next",e)}function u(e){r(i,a,o,s,u,"throw",e)}s(void 0)})}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=m();return function(){var r,n=l(e);if(t){var a=l(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?f(e):r}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.MP4Parser=void 0;var d=require("debug"),h=require("token-types"),k=require("../common/BasicParser"),g=require("../id3v1/ID3v1Parser"),v=require("../type"),b=require("./Atom"),y=require("./AtomToken"),T=(0,d.default)("music-metadata:parser:MP4"),x="iTunes",w={raw:{lossy:!1,format:"raw"},MAC3:{lossy:!0,format:"MACE 3:1"},MAC6:{lossy:!0,format:"MACE 6:1"},ima4:{lossy:!0,format:"IMA 4:1"},ulaw:{lossy:!0,format:"uLaw 2:1"},alaw:{lossy:!0,format:"uLaw 2:1"},Qclp:{lossy:!0,format:"QUALCOMM PureVoice"},".mp3":{lossy:!0,format:"MPEG-1 layer 3"},alac:{lossy:!1,format:"ALAC"},"ac-3":{lossy:!0,format:"AC-3"},mp4a:{lossy:!0,format:"MPEG-4/AAC"},mp4s:{lossy:!0,format:"MP4S"},c608:{lossy:!0,format:"CEA-608"},c708:{lossy:!0,format:"CEA-708"}};function S(e,t,r){return r.indexOf(e)===t}var R=function(t){s(o,k.BasicParser);var r=c(o);function o(){var e;return a(this,o),(e=r.apply(this,arguments)).atomParsers={mvhd:function(){var t=n(regeneratorRuntime.mark(function t(r){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.tokenizer.readToken(new y.MvhdAtom(r));case 2:n=t.sent,e.metadata.setFormat("creationTime",n.creationTime),e.metadata.setFormat("modificationTime",n.modificationTime);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),mdhd:function(){var t=n(regeneratorRuntime.mark(function t(r){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.tokenizer.readToken(new y.MdhdAtom(r));case 2:n=t.sent,(a=e.getTrackDescription()).creationTime=n.creationTime,a.modificationTime=n.modificationTime,a.timeScale=n.timeScale,a.duration=n.duration;case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),chap:function(){var t=n(regeneratorRuntime.mark(function t(r){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=e.getTrackDescription(),a=[];case 2:if(!(r>=h.UINT32_BE.len)){t.next=11;break}return t.t0=a,t.next=6,e.tokenizer.readNumber(h.UINT32_BE);case 6:t.t1=t.sent,t.t0.push.call(t.t0,t.t1),r-=h.UINT32_BE.len,t.next=2;break;case 11:n.chapterList=a;case 12:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),tkhd:function(){var t=n(regeneratorRuntime.mark(function t(r){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.tokenizer.readToken(new y.TrackHeaderAtom(r));case 2:n=t.sent,e.tracks.push(n);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),mdat:function(){var t=n(regeneratorRuntime.mark(function t(r){var n,a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.audioLengthInBytes=r,e.calculateBitRate(),!e.options.includeChapters){t.next=9;break}if(1!==(n=e.tracks.filter(function(e){return e.chapterList})).length){t.next=9;break}if(a=n[0].chapterList,1!==(o=e.tracks.filter(function(e){return-1!==a.indexOf(e.trackId)})).length){t.next=9;break}return t.abrupt("return",e.parseChapterTrack(o[0],n[0],r));case 9:return t.next=11,e.tokenizer.ignore(r);case 11:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),ftyp:function(){var t=n(regeneratorRuntime.mark(function t(r){var n,a,o,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=[];case 1:if(!(r>0)){t.next=10;break}return t.next=4,e.tokenizer.readToken(y.ftyp);case 4:a=t.sent,r-=y.ftyp.len,(o=a.type.replace(/\W/g,"")).length>0&&n.push(o),t.next=1;break;case 10:T("ftyp: ".concat(n.join("/"))),i=n.filter(S).join("/"),e.metadata.setFormat("container",i);case 13:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),stsd:function(){var t=n(regeneratorRuntime.mark(function t(r){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.tokenizer.readToken(new y.StsdAtom(r));case 2:n=t.sent,e.getTrackDescription().soundSampleDescription=n.table.map(function(t){return e.parseSoundSampleDescription(t)});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),stsc:function(){var t=n(regeneratorRuntime.mark(function t(r){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.tokenizer.readToken(new y.StscAtom(r));case 2:n=t.sent,e.getTrackDescription().sampleToChunkTable=n.entries;case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),stts:function(){var t=n(regeneratorRuntime.mark(function t(r){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.tokenizer.readToken(new y.SttsAtom(r));case 2:n=t.sent,e.getTrackDescription().timeToSampleTable=n.entries;case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),stsz:function(){var t=n(regeneratorRuntime.mark(function t(r){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.tokenizer.readToken(new y.StszAtom(r));case 2:n=t.sent,(a=e.getTrackDescription()).sampleSize=n.sampleSize,a.sampleSizeTable=n.entries;case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),stco:function(){var t=n(regeneratorRuntime.mark(function t(r){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.tokenizer.readToken(new y.StcoAtom(r));case 2:n=t.sent,e.getTrackDescription().chunkOffsetTable=n.entries;case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),date:function(){var t=n(regeneratorRuntime.mark(function t(r){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.tokenizer.readToken(new h.StringType(r,"utf-8"));case 2:n=t.sent,e.addTag("date",n);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},e}return i(o,[{key:"parse",value:function(){var e=n(regeneratorRuntime.mark(function e(){var t,r,n,a,o,i,s,u,c,p,f=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.tracks=[],t=this.tokenizer.fileInfo.size;case 2:if(this.tokenizer.fileInfo.size&&!(t>0)){e.next=26;break}return e.prev=3,e.next=6,this.tokenizer.peekToken(y.Header);case 6:if("\0\0\0\0"!==e.sent.name){e.next=12;break}return r="Error at offset=".concat(this.tokenizer.position,": box.id=0"),T(r),this.addWarning(r),e.abrupt("break",26);case 12:e.next=20;break;case 14:return e.prev=14,e.t0=e.catch(3),n="Error at offset=".concat(this.tokenizer.position,": ").concat(e.t0.message),T(n),this.addWarning(n),e.abrupt("break",26);case 20:return e.next=22,b.Atom.readAtom(this.tokenizer,function(e,t){return f.handleAtom(e,t)},null,t);case 22:a=e.sent,t-=a.header.length===BigInt(0)?t:Number(a.header.length),e.next=2;break;case 26:o=[],this.tracks.forEach(function(e){var t=[];e.soundSampleDescription.forEach(function(e){var r={},n=w[e.dataFormat];if(n?(t.push(n.format),r.codecName=n.format):r.codecName="<".concat(e.dataFormat,">"),e.description){var a=e.description;a.sampleRate>0&&(r.type=v.TrackType.audio,r.audio={samplingFrequency:a.sampleRate,bitDepth:a.sampleSize,channels:a.numAudioChannels})}f.metadata.addStreamInfo(r)}),t.length>=1&&o.push(t.join("/"))}),o.length>0&&this.metadata.setFormat("codec",o.filter(S).join("+")),(i=this.tracks.filter(function(e){return e.soundSampleDescription.length>=1&&e.soundSampleDescription[0].description&&e.soundSampleDescription[0].description.numAudioChannels>0})).length>=1&&(s=i[0],u=s.duration/s.timeScale,this.metadata.setFormat("duration",u),(c=s.soundSampleDescription[0]).description&&(this.metadata.setFormat("sampleRate",c.description.sampleRate),this.metadata.setFormat("bitsPerSample",c.description.sampleSize),this.metadata.setFormat("numberOfChannels",c.description.numAudioChannels)),(p=w[c.dataFormat])&&this.metadata.setFormat("lossless",!p.lossy),this.calculateBitRate());case 31:case"end":return e.stop()}},e,this,[[3,14]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleAtom",value:function(){var e=n(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.parent){e.next=5;break}e.t0=t.parent.header.name,e.next="ilst"===e.t0?4:"<id>"===e.t0?4:5;break;case 4:return e.abrupt("return",this.parseMetadataItemData(t));case 5:if(!this.atomParsers[t.header.name]){e.next=9;break}return e.abrupt("return",this.atomParsers[t.header.name](r));case 9:return T("No parser for atom path=".concat(t.atomPath,", payload-len=").concat(r,", ignoring atom")),e.next=12,this.tokenizer.ignore(r);case 12:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"getTrackDescription",value:function(){return this.tracks[this.tracks.length-1]}},{key:"calculateBitRate",value:function(){this.audioLengthInBytes&&this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*this.audioLengthInBytes/this.metadata.format.duration)}},{key:"addTag",value:function(e,t){this.metadata.addTag(x,e,t)}},{key:"addWarning",value:function(e){T("Warning: "+e),this.metadata.addWarning(e)}},{key:"parseMetadataItemData",value:function(e){var t=this,r=e.header.name;return e.readAtoms(this.tokenizer,function(){var e=n(regeneratorRuntime.mark(function e(n,a){var o,i,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=n.getPayloadLength(a),e.t0=n.header.name,e.next="data"===e.t0?4:"name"===e.t0?5:"mean"===e.t0?10:15;break;case 4:return e.abrupt("return",t.parseValueAtom(r,n));case 5:return e.next=7,t.tokenizer.readToken(new y.NameAtom(o));case 7:return i=e.sent,r+=":"+i.name,e.abrupt("break",19);case 10:return e.next=12,t.tokenizer.readToken(new y.NameAtom(o));case 12:return s=e.sent,r+=":"+s.name,e.abrupt("break",19);case 15:return e.next=17,t.tokenizer.readToken(new h.BufferType(o));case 17:u=e.sent,t.addWarning("Unsupported meta-item: "+r+"["+n.header.name+"] => value="+u.toString("hex")+" ascii="+u.toString("ascii"));case 19:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}(),e.getPayloadLength(0))}},{key:"parseValueAtom",value:function(){var t=n(regeneratorRuntime.mark(function t(r,n){var a,i,s,u,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.tokenizer.readToken(new y.DataAtom(Number(n.header.length)-y.Header.len));case 2:if(0===(a=t.sent).type.set){t.next=5;break}throw new Error("Unsupported type-set != 0: "+a.type.set);case 5:t.t0=a.type.type,t.next=0===t.t0?8:1===t.t0?20:18===t.t0?20:13===t.t0?22:14===t.t0?26:21===t.t0?30:22===t.t0?32:65===t.t0?34:66===t.t0?36:67===t.t0?38:40;break;case 8:t.t1=r,t.next="trkn"===t.t1?11:"disk"===t.t1?11:"gnre"===t.t1?15:19;break;case 11:return i=h.UINT8.get(a.value,3),s=h.UINT8.get(a.value,5),this.addTag(r,i+"/"+s),t.abrupt("break",19);case 15:return u=h.UINT8.get(a.value,1),c=g.Genres[u-1],this.addTag(r,c),t.abrupt("break",19);case 19:return t.abrupt("break",41);case 20:return this.addTag(r,a.value.toString("utf-8")),t.abrupt("break",41);case 22:if(!this.options.skipCovers){t.next=24;break}return t.abrupt("break",41);case 24:return this.addTag(r,{format:"image/jpeg",data:e.from(a.value)}),t.abrupt("break",41);case 26:if(!this.options.skipCovers){t.next=28;break}return t.abrupt("break",41);case 28:return this.addTag(r,{format:"image/png",data:e.from(a.value)}),t.abrupt("break",41);case 30:return this.addTag(r,o.read_BE_Integer(a.value,!0)),t.abrupt("break",41);case 32:return this.addTag(r,o.read_BE_Integer(a.value,!1)),t.abrupt("break",41);case 34:return this.addTag(r,a.value.readInt8(0)),t.abrupt("break",41);case 36:return this.addTag(r,a.value.readInt16BE(0)),t.abrupt("break",41);case 38:return this.addTag(r,a.value.readInt32BE(0)),t.abrupt("break",41);case 40:this.addWarning("atom key=".concat(r,", has unknown well-known-type (data-type): ").concat(a.type.type));case 41:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"parseSoundSampleDescription",value:function(e){var t={dataFormat:e.dataFormat,dataReferenceIndex:e.dataReferenceIndex},r=0,n=y.SoundSampleDescriptionVersion.get(e.description,r);return r+=y.SoundSampleDescriptionVersion.len,0===n.version||1===n.version?t.description=y.SoundSampleDescriptionV0.get(e.description,r):T("Warning: sound-sample-description ".concat(n," not implemented")),t}},{key:"parseChapterTrack",value:function(){var e=n(regeneratorRuntime.mark(function e(t,r,n){var a,o,i,s,u,c,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.sampleSize){e.next=3;break}if(t.chunkOffsetTable.length===t.sampleSizeTable.length){e.next=3;break}throw new Error("Expected equal chunk-offset-table & sample-size-table length.");case 3:a=[],o=0;case 5:if(!(o<t.chunkOffsetTable.length&&n>0)){e.next=24;break}if(i=t.chunkOffsetTable[o],s=i-this.tokenizer.position,u=t.sampleSize>0?t.sampleSize:t.sampleSizeTable[o],!((n-=s+u)<0)){e.next=12;break}throw new Error("Chapter chunk exceeding token length");case 12:return e.next=14,this.tokenizer.ignore(s);case 14:return e.next=16,this.tokenizer.readToken(new y.ChapterText(u));case 16:c=e.sent,T("Chapter ".concat(o+1,": ").concat(c)),p={title:c,sampleOffset:this.findSampleOffset(r,this.tokenizer.position)},T("Chapter title=".concat(p.title,", offset=").concat(p.sampleOffset,"/").concat(this.tracks[0].duration)),a.push(p);case 21:++o,e.next=5;break;case 24:return this.metadata.setFormat("chapters",a),e.next=27,this.tokenizer.ignore(n);case 27:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"findSampleOffset",value:function(e,t){var r=0;e.timeToSampleTable.forEach(function(e){r+=e.count*e.duration}),T("Total duration=".concat(r));for(var n=0;n<e.chunkOffsetTable.length&&e.chunkOffsetTable[n]<t;)++n;return this.getChunkDuration(n+1,e)}},{key:"getChunkDuration",value:function(e,t){for(var r=0,n=t.timeToSampleTable[r].count,a=t.timeToSampleTable[r].duration,o=1,i=this.getSamplesPerChunk(o,t.sampleToChunkTable),s=0;o<e;){var u=Math.min(n,i);s+=u*a,n-=u,0===(i-=u)?(++o,i=this.getSamplesPerChunk(o,t.sampleToChunkTable)):(++r,n=t.timeToSampleTable[r].count,a=t.timeToSampleTable[r].duration)}return s}},{key:"getSamplesPerChunk",value:function(e,t){for(var r=0;r<t.length-1;++r)if(e>=t[r].firstChunk&&e<t[r+1].firstChunk)return t[r].samplesPerChunk;return t[t.length-1].samplesPerChunk}}],[{key:"read_BE_Integer",value:function(e,t){var r=(t?"INT":"UINT")+8*e.length+(e.length>1?"_BE":""),n=h[r];if(!n)throw new Error('Token for integer type not found: "'+r+'"');return Number(n.get(e,0))}}]),o}();exports.MP4Parser=R;
},{"debug":"t61f","token-types":"No44","../common/BasicParser":"YSvq","../id3v1/ID3v1Parser":"VHOF","../type":"E5wx","./Atom":"gGM9","./AtomToken":"pRTE","buffer":"fe91"}],"CQ3O":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReplayGain=void 0;var e,i,t=require("../common/Util");!function(e){e[e.not_set=0]="not_set",e[e.radio=1]="radio",e[e.audiophile=2]="audiophile"}(e||(e={})),function(e){e[e.unspecified=0]="unspecified",e[e.engineer=1]="engineer",e[e.user=2]="user",e[e.automatic=3]="automatic",e[e.rms_average=4]="rms_average"}(i||(i={})),exports.ReplayGain={len:2,get:function(e,i){var r=t.getBitAllignedNumber(e,i,0,3),n=t.getBitAllignedNumber(e,i,6,1),u=t.getBitAllignedNumber(e,i,7,9)/10;if(r>0)return{type:t.getBitAllignedNumber(e,i,0,3),origin:t.getBitAllignedNumber(e,i,3,3),adjustment:n?-u:u}}};
},{"../common/Util":"SkgS"}],"VCRv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ExtendedLameHeader=void 0;var e=require("token-types"),t=require("../common/Util"),r=require("./ReplayGainDataFormat");exports.ExtendedLameHeader={len:27,get:function(a,i){var n=e.UINT32_BE.get(a,i+2);return{revision:t.getBitAllignedNumber(a,i,0,4),vbr_method:t.getBitAllignedNumber(a,i,4,4),lowpass_filter:100*e.UINT8.get(a,i+1),track_peak:0===n?void 0:n/Math.pow(2,23),track_gain:r.ReplayGain.get(a,6),album_gain:r.ReplayGain.get(a,8),music_length:e.UINT32_BE.get(a,i+20),music_crc:e.UINT8.get(a,i+24),header_crc:e.UINT16_BE.get(a,i+24)}}};
},{"token-types":"No44","../common/Util":"SkgS","./ReplayGainDataFormat":"CQ3O"}],"eqBJ":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function r(e,r,n,t,a,i,s){try{var o=e[i](s),c=o.value}catch(u){return void n(u)}o.done?r(c):Promise.resolve(c).then(t,a)}function n(e){return function(){var n=this,t=arguments;return new Promise(function(a,i){var s=e.apply(n,t);function o(e){r(s,a,i,o,c,"next",e)}function c(e){r(s,a,i,o,c,"throw",e)}o(void 0)})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.readXingHeader=exports.XingHeaderFlags=exports.LameEncoderVersion=exports.InfoTagHeaderTag=void 0;var t=require("token-types"),a=require("../common/Util"),i=require("./ExtendedLameHeader");function s(e){return o.apply(this,arguments)}function o(){return(o=n(regeneratorRuntime.mark(function r(n){var a,s,o,c;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.readToken(exports.XingHeaderFlags);case 2:if(a=r.sent,s={},!a.frames){r.next=8;break}return r.next=7,n.readToken(t.UINT32_BE);case 7:s.numFrames=r.sent;case 8:if(!a.bytes){r.next=12;break}return r.next=11,n.readToken(t.UINT32_BE);case 11:s.streamSize=r.sent;case 12:if(!a.toc){r.next=16;break}return s.toc=e.alloc(100),r.next=16,n.readBuffer(s.toc);case 16:if(!a.vbrScale){r.next=20;break}return r.next=19,n.readToken(t.UINT32_BE);case 19:s.vbrScale=r.sent;case 20:return r.next=22,n.peekToken(new t.StringType(4,"ascii"));case 22:if("LAME"!==r.sent){r.next=38;break}return r.next=26,n.ignore(4);case 26:return r.next=28,n.readToken(new t.StringType(5,"ascii"));case 28:if(r.t0=r.sent,s.lame={version:r.t0},!s.lame.version.match(/\d+.\d+/g)){r.next=38;break}if(o=s.lame.version.match(/\d+.\d+/g)[0],!((c=o.split(".").map(function(e){return parseInt(e,10)}))[0]>=3&&c[1]>=90)){r.next=38;break}return r.next=37,n.readToken(i.ExtendedLameHeader);case 37:s.lame.extended=r.sent;case 38:return r.abrupt("return",s);case 39:case"end":return r.stop()}},r)}))).apply(this,arguments)}exports.InfoTagHeaderTag=new t.StringType(4,"ascii"),exports.LameEncoderVersion=new t.StringType(6,"ascii"),exports.XingHeaderFlags={len:4,get:function(e,r){return{frames:a.isBitSet(e,r,31),bytes:a.isBitSet(e,r,30),toc:a.isBitSet(e,r,29),vbrScale:a.isBitSet(e,r,28)}}},exports.readXingHeader=s;
},{"token-types":"No44","../common/Util":"SkgS","./ExtendedLameHeader":"VCRv","buffer":"fe91"}],"QcJg":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t,r,n,a,i,s){try{var o=e[i](s),u=o.value}catch(c){return void r(c)}o.done?t(u):Promise.resolve(u).then(n,a)}function n(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var s=e.apply(t,n);function o(e){r(s,a,i,o,u,"next",e)}function u(e){r(s,a,i,o,u,"throw",e)}o(void 0)})}}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=c();return function(){var r,n=f(e);if(t){var a=f(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return o(this,r)}}function o(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?u(e):r}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.MpegParser=void 0;var d=require("token-types"),p=require("strtok3/lib/core"),b=require("debug"),g=require("../common/Util"),k=require("../id3v2/AbstractID3Parser"),v=require("./XingTag"),y=(0,b.default)("music-metadata:parser:mpeg"),x=1024,C={AudioObjectTypes:["AAC Main","AAC LC","AAC SSR","AAC LTP"],SamplingFrequencies:[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,void 0,void 0,-1]},F=[void 0,["front-center"],["front-left","front-right"],["front-center","front-left","front-right"],["front-center","front-left","front-right","back-center"],["front-center","front-left","front-right","back-left","back-right"],["front-center","front-left","front-right","back-left","back-right","LFE-channel"],["front-center","front-left","front-right","side-left","side-right","back-left","back-right","LFE-channel"]],P=function(){function e(t,r){h(this,e),this.versionIndex=g.getBitAllignedNumber(t,r+1,3,2),this.layer=e.LayerDescription[g.getBitAllignedNumber(t,r+1,5,2)],this.versionIndex>1&&0===this.layer?this.parseAdtsHeader(t,r):this.parseMpegHeader(t,r),this.isProtectedByCRC=!g.isBitSet(t,r+1,7)}return m(e,[{key:"calcDuration",value:function(e){return e*this.calcSamplesPerFrame()/this.samplingRate}},{key:"calcSamplesPerFrame",value:function(){return e.samplesInFrameTable[1===this.version?0:1][this.layer]}},{key:"calculateSideInfoLength",value:function(){if(3!==this.layer)return 2;if(3===this.channelModeIndex){if(1===this.version)return 17;if(2===this.version||2.5===this.version)return 9}else{if(1===this.version)return 32;if(2===this.version||2.5===this.version)return 17}}},{key:"calcSlotSize",value:function(){return[null,4,1,1][this.layer]}},{key:"parseMpegHeader",value:function(t,r){this.container="MPEG",this.bitrateIndex=g.getBitAllignedNumber(t,r+2,0,4),this.sampRateFreqIndex=g.getBitAllignedNumber(t,r+2,4,2),this.padding=g.isBitSet(t,r+2,6),this.privateBit=g.isBitSet(t,r+2,7),this.channelModeIndex=g.getBitAllignedNumber(t,r+3,0,2),this.modeExtension=g.getBitAllignedNumber(t,r+3,2,2),this.isCopyrighted=g.isBitSet(t,r+3,4),this.isOriginalMedia=g.isBitSet(t,r+3,5),this.emphasis=g.getBitAllignedNumber(t,r+3,7,2),this.version=e.VersionID[this.versionIndex],this.channelMode=e.ChannelMode[this.channelModeIndex],this.codec="MPEG ".concat(this.version," Layer ").concat(this.layer);var n=this.calcBitrate();if(!n)throw new Error("Cannot determine bit-rate");if(this.bitrate=1e3*n,this.samplingRate=this.calcSamplingRate(),null==this.samplingRate)throw new Error("Cannot determine sampling-rate")}},{key:"parseAdtsHeader",value:function(e,t){y("layer=0 => ADTS"),this.version=2===this.versionIndex?4:2,this.container="ADTS/MPEG-"+this.version;var r=g.getBitAllignedNumber(e,t+2,0,2);this.codec="AAC",this.codecProfile=C.AudioObjectTypes[r],y("MPEG-4 audio-codec=".concat(this.codec));var n=g.getBitAllignedNumber(e,t+2,2,4);this.samplingRate=C.SamplingFrequencies[n],y("sampling-rate=".concat(this.samplingRate));var a=g.getBitAllignedNumber(e,t+2,7,3);this.mp4ChannelConfig=F[a],y("channel-config=".concat(this.mp4ChannelConfig.join("+"))),this.frameLength=g.getBitAllignedNumber(e,t+3,6,2)<<11}},{key:"calcBitrate",value:function(){if(0!==this.bitrateIndex&&15!==this.bitrateIndex){var t="".concat(Math.floor(this.version)).concat(this.layer);return e.bitrate_index[this.bitrateIndex][t]}}},{key:"calcSamplingRate",value:function(){return 3===this.sampRateFreqIndex?null:e.sampling_rate_freq_index[this.version][this.sampRateFreqIndex]}}]),e}();P.SyncByte1=255,P.SyncByte2=224,P.VersionID=[2.5,null,2,1],P.LayerDescription=[0,3,2,1],P.ChannelMode=["stereo","joint_stereo","dual_channel","mono"],P.bitrate_index={1:{11:32,12:32,13:32,21:32,22:8,23:8},2:{11:64,12:48,13:40,21:48,22:16,23:16},3:{11:96,12:56,13:48,21:56,22:24,23:24},4:{11:128,12:64,13:56,21:64,22:32,23:32},5:{11:160,12:80,13:64,21:80,22:40,23:40},6:{11:192,12:96,13:80,21:96,22:48,23:48},7:{11:224,12:112,13:96,21:112,22:56,23:56},8:{11:256,12:128,13:112,21:128,22:64,23:64},9:{11:288,12:160,13:128,21:144,22:80,23:80},10:{11:320,12:192,13:160,21:160,22:96,23:96},11:{11:352,12:224,13:192,21:176,22:112,23:112},12:{11:384,12:256,13:224,21:192,22:128,23:128},13:{11:416,12:320,13:256,21:224,22:144,23:144},14:{11:448,12:384,13:320,21:256,22:160,23:160}},P.sampling_rate_freq_index={1:{0:44100,1:48e3,2:32e3},2:{0:22050,1:24e3,2:16e3},2.5:{0:11025,1:12e3,2:8e3}},P.samplesInFrameTable=[[0,384,1152,1152],[0,384,1152,576]];var R={len:4,get:function(e,t){return new P(e,t)}};function S(e){return"V"+Math.floor((100-e)/10)}var _=function(t){a(i,k.AbstractID3Parser);var r=s(i);function i(){var t;return h(this,i),(t=r.apply(this,arguments)).frameCount=0,t.syncFrameCount=-1,t.countSkipFrameData=0,t.totalDataLength=0,t.bitrates=[],t.calculateEofDuration=!1,t.buf_frame_header=e.alloc(4),t.syncPeek={buf:e.alloc(x),len:0},t}return m(i,[{key:"postId3v2Parse",value:function(){var e=n(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.metadata.setFormat("lossless",!1),e.prev=1,t=!1;case 3:if(t){e.next=11;break}return e.next=6,this.sync();case 6:return e.next=8,this.parseCommonMpegHeader();case 8:t=e.sent,e.next=3;break;case 11:e.next=21;break;case 13:if(e.prev=13,e.t0=e.catch(1),!(e.t0 instanceof p.EndOfStreamError)){e.next=20;break}y("End-of-stream"),this.calculateEofDuration&&(r=this.frameCount*this.samplesPerFrame,this.metadata.setFormat("numberOfSamples",r),n=r/this.metadata.format.sampleRate,y("Calculate duration at EOF: ".concat(n," sec."),n),this.metadata.setFormat("duration",n)),e.next=21;break;case 20:throw e.t0;case 21:case"end":return e.stop()}},e,this,[[1,13]])}));return function(){return e.apply(this,arguments)}}()},{key:"finalize",value:function(){var e=this.metadata.format,t=this.metadata.native.hasOwnProperty("ID3v1");if(e.duration&&this.tokenizer.fileInfo.size){var r=this.tokenizer.fileInfo.size-this.mpegOffset-(t?128:0);e.codecProfile&&"V"===e.codecProfile[0]&&this.metadata.setFormat("bitrate",8*r/e.duration)}else if(this.tokenizer.fileInfo.size&&"CBR"===e.codecProfile){var n=this.tokenizer.fileInfo.size-this.mpegOffset-(t?128:0),a=Math.round(n/this.frame_size)*this.samplesPerFrame;this.metadata.setFormat("numberOfSamples",a);var i=a/e.sampleRate;y("Calculate CBR duration based on file size: %s",i),this.metadata.setFormat("duration",i)}}},{key:"sync",value:function(){var e=n(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=!1;case 1:return r=0,e.next=5,this.tokenizer.peekBuffer(this.syncPeek.buf,{length:x,mayBeLess:!0});case 5:if(this.syncPeek.len=e.sent,!(this.syncPeek.len<=163)){e.next=8;break}throw new p.EndOfStreamError;case 8:if(!t||224!=(224&this.syncPeek.buf[r])){e.next=20;break}return this.buf_frame_header[0]=P.SyncByte1,this.buf_frame_header[1]=this.syncPeek.buf[r],e.next=14,this.tokenizer.ignore(r);case 14:return y("Sync at offset=".concat(this.tokenizer.position-1,", frameCount=").concat(this.frameCount)),this.syncFrameCount===this.frameCount&&(y("Re-synced MPEG stream, frameCount=".concat(this.frameCount)),this.frameCount=0,this.frame_size=0),this.syncFrameCount=this.frameCount,e.abrupt("return");case 20:if(t=!1,-1!==(r=this.syncPeek.buf.indexOf(P.SyncByte1,r))){e.next=30;break}if(!(this.syncPeek.len<this.syncPeek.buf.length)){e.next=25;break}throw new p.EndOfStreamError;case 25:return e.next=27,this.tokenizer.ignore(this.syncPeek.len);case 27:return e.abrupt("break",34);case 30:++r,t=!0;case 32:e.next=8;break;case 34:e.next=1;break;case 36:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"parseCommonMpegHeader",value:function(){var e=n(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return 0===this.frameCount&&(this.mpegOffset=this.tokenizer.position-1),e.next=3,this.tokenizer.peekBuffer(this.buf_frame_header,{offset:1,length:3});case 3:e.prev=3,t=R.get(this.buf_frame_header,0),e.next=13;break;case 7:return e.prev=7,e.t0=e.catch(3),e.next=11,this.tokenizer.ignore(1);case 11:return this.metadata.addWarning("Parse error: "+e.t0.message),e.abrupt("return",!1);case 13:return e.next=15,this.tokenizer.ignore(3);case 15:return this.metadata.setFormat("container",t.container),this.metadata.setFormat("codec",t.codec),this.metadata.setFormat("lossless",!1),this.metadata.setFormat("sampleRate",t.samplingRate),this.frameCount++,e.abrupt("return",t.version>=2&&0===t.layer?this.parseAdts(t):this.parseAudioFrameHeader(t));case 21:case"end":return e.stop()}},e,this,[[3,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"parseAudioFrameHeader",value:function(){var e=n(regeneratorRuntime.mark(function e(t){var r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.metadata.setFormat("numberOfChannels","mono"===t.channelMode?1:2),this.metadata.setFormat("bitrate",t.bitrate),this.frameCount<2e5&&y("offset=%s MP%s bitrate=%s sample-rate=%s",this.tokenizer.position-4,t.layer,t.bitrate,t.samplingRate),null!==(r=t.calcSlotSize())){e.next=6;break}throw new Error("invalid slot_size");case 6:if(n=t.calcSamplesPerFrame(),y("samples_per_frame=".concat(n)),a=n/8*t.bitrate/t.samplingRate+(t.padding?r:0),this.frame_size=Math.floor(a),this.audioFrameHeader=t,this.bitrates.push(t.bitrate),1!==this.frameCount){e.next=18;break}return this.offset=R.len,e.next=17,this.skipSideInformation();case 17:return e.abrupt("return",!1);case 18:if(3!==this.frameCount){e.next=30;break}if(!this.areAllSame(this.bitrates)){e.next=26;break}if(this.samplesPerFrame=n,this.metadata.setFormat("codecProfile","CBR"),!this.tokenizer.fileInfo.size){e.next=24;break}return e.abrupt("return",!0);case 24:e.next=28;break;case 26:if(!this.metadata.format.duration){e.next=28;break}return e.abrupt("return",!0);case 28:if(this.options.duration){e.next=30;break}return e.abrupt("return",!0);case 30:if(this.options.duration&&4===this.frameCount&&(this.samplesPerFrame=n,this.calculateEofDuration=!0),this.offset=4,!t.isProtectedByCRC){e.next=38;break}return e.next=35,this.parseCrc();case 35:return e.abrupt("return",!1);case 38:return e.next=40,this.skipSideInformation();case 40:return e.abrupt("return",!1);case 41:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"parseAdts",value:function(){var t=n(regeneratorRuntime.mark(function t(r){var n,a,i,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.alloc(3),t.next=3,this.tokenizer.readBuffer(n);case 3:return r.frameLength+=g.getBitAllignedNumber(n,0,0,11),this.totalDataLength+=r.frameLength,this.samplesPerFrame=1024,a=r.samplingRate/this.samplesPerFrame,i=0===this.frameCount?0:this.totalDataLength/this.frameCount,s=8*i*a+.5,this.metadata.setFormat("bitrate",s),y("frame-count=".concat(this.frameCount,", size=").concat(r.frameLength," bytes, bit-rate=").concat(s)),t.next=13,this.tokenizer.ignore(r.frameLength>7?r.frameLength-7:1);case 13:if(3!==this.frameCount){t.next=21;break}if(this.metadata.setFormat("codecProfile",r.codecProfile),r.mp4ChannelConfig&&this.metadata.setFormat("numberOfChannels",r.mp4ChannelConfig.length),!this.options.duration){t.next=20;break}this.calculateEofDuration=!0,t.next=21;break;case 20:return t.abrupt("return",!0);case 21:return t.abrupt("return",!1);case 22:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"parseCrc",value:function(){var e=n(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.readNumber(d.INT16_BE);case 2:return this.crc=e.sent,this.offset+=2,e.abrupt("return",this.skipSideInformation());case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"skipSideInformation",value:function(){var e=n(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.audioFrameHeader.calculateSideInfoLength(),e.next=3,this.tokenizer.readToken(new d.Uint8ArrayType(t));case 3:return this.offset+=t,e.next=6,this.readXtraInfoHeader();case 6:return e.abrupt("return");case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"readXtraInfoHeader",value:function(){var e=n(regeneratorRuntime.mark(function e(){var t,r,n,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.readToken(v.InfoTagHeaderTag);case 2:t=e.sent,this.offset+=v.InfoTagHeaderTag.len,e.t0=t,e.next="Info"===e.t0?7:"Xing"===e.t0?9:"Xtra"===e.t0?15:"LAME"===e.t0?16:29;break;case 7:return this.metadata.setFormat("codecProfile","CBR"),e.abrupt("return",this.readXingInfoHeader());case 9:return e.next=11,this.readXingInfoHeader();case 11:return r=e.sent,n=S(r.vbrScale),this.metadata.setFormat("codecProfile",n),e.abrupt("return",null);case 15:return e.abrupt("break",29);case 16:return e.next=18,this.tokenizer.readToken(v.LameEncoderVersion);case 18:if(a=e.sent,!(this.frame_size>=this.offset+v.LameEncoderVersion.len)){e.next=27;break}return this.offset+=v.LameEncoderVersion.len,this.metadata.setFormat("tool","LAME "+a),e.next=24,this.skipFrameData(this.frame_size-this.offset);case 24:return e.abrupt("return",null);case 27:return this.metadata.addWarning("Corrupt LAME header"),e.abrupt("break",29);case 29:if(!((i=this.frame_size-this.offset)<0)){e.next=34;break}this.metadata.addWarning("Frame "+this.frameCount+"corrupt: negative frameDataLeft"),e.next=36;break;case 34:return e.next=36,this.skipFrameData(i);case 36:return e.abrupt("return",null);case 37:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"readXingInfoHeader",value:function(){var e=n(regeneratorRuntime.mark(function e(){var t,r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.tokenizer.position,e.next=3,(0,v.readXingHeader)(this.tokenizer);case 3:if(r=e.sent,this.offset+=this.tokenizer.position-t,r.lame&&(this.metadata.setFormat("tool","LAME "+g.stripNulls(r.lame.version)),r.lame.extended&&(this.metadata.setFormat("trackPeakLevel",r.lame.extended.track_peak),r.lame.extended.track_gain&&this.metadata.setFormat("trackGain",r.lame.extended.track_gain.adjustment),r.lame.extended.album_gain&&this.metadata.setFormat("albumGain",r.lame.extended.album_gain.adjustment),this.metadata.setFormat("duration",r.lame.extended.music_length/1e3))),!r.streamSize){e.next=11;break}return n=this.audioFrameHeader.calcDuration(r.numFrames),this.metadata.setFormat("duration",n),y("Get duration from Xing header: %s",this.metadata.format.duration),e.abrupt("return",r);case 11:return a=this.frame_size-this.offset,e.next=14,this.skipFrameData(a);case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"skipFrameData",value:function(){var e=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t<0)){e.next=2;break}throw new Error("frame-data-left cannot be negative");case 2:return e.next=4,this.tokenizer.ignore(t);case 4:this.countSkipFrameData+=t;case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"areAllSame",value:function(e){var t=e[0];return e.every(function(e){return e===t})}}]),i}();exports.MpegParser=_;
},{"token-types":"No44","strtok3/lib/core":"R0T4","debug":"t61f","../common/Util":"SkgS","../id3v2/AbstractID3Parser":"b5FX","./XingTag":"eqBJ","buffer":"fe91"}],"mQNZ":[function(require,module,exports) {
"use strict";function e(e,r,t,n,a,i,u){try{var o=e[i](u),s=o.value}catch(c){return void t(c)}o.done?r(s):Promise.resolve(s).then(n,a)}function r(r){return function(){var t=this,n=arguments;return new Promise(function(a,i){var u=r.apply(t,n);function o(r){e(u,a,i,o,s,"next",r)}function s(r){e(u,a,i,o,s,"throw",r)}o(void 0)})}}function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function n(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.StreamReader=void 0;var i=require("token-types"),u=require("debug"),o=require("../../common/Util"),s=(0,u.default)("music-metadata:parser:musepack:sv8"),c=new i.StringType(2,"binary"),l={len:5,get:function(e,r){return{crc:i.UINT32_LE.get(e,r),streamVersion:i.UINT8.get(e,r+4)}}},d={len:2,get:function(e,r){return{sampleFrequency:[44100,48e3,37800,32e3][o.getBitAllignedNumber(e,r,0,3)],maxUsedBands:o.getBitAllignedNumber(e,r,3,5),channelCount:o.getBitAllignedNumber(e,r+1,0,4)+1,msUsed:o.isBitSet(e,r+1,4),audioBlockFrames:o.getBitAllignedNumber(e,r+1,5,3)}}},f=function(){function e(r){t(this,e),this.tokenizer=r}return a(e,[{key:"readPacketHeader",value:function(){var e=r(regeneratorRuntime.mark(function e(){var r,t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.readToken(c);case 2:return r=e.sent,e.next=5,this.readVariableSizeField();case 5:return t=e.sent,e.abrupt("return",{key:r,payloadLength:t.value-2-t.len});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"readStreamHeader",value:function(){var e=r(regeneratorRuntime.mark(function e(r){var t,n,a,i,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},s("Reading SH at offset=".concat(this.tokenizer.position)),e.next=4,this.tokenizer.readToken(l);case 4:return n=e.sent,r-=l.len,Object.assign(t,n),s("SH.streamVersion = ".concat(n.streamVersion)),e.next=10,this.readVariableSizeField();case 10:return a=e.sent,r-=a.len,t.sampleCount=a.value,e.next=15,this.readVariableSizeField();case 15:return i=e.sent,r-=i.len,t.beginningOfSilence=i.value,e.next=20,this.tokenizer.readToken(d);case 20:return u=e.sent,r-=d.len,Object.assign(t,u),e.next=25,this.tokenizer.ignore(r);case 25:return e.abrupt("return",t);case 26:case"end":return e.stop()}},e,this)}));return function(r){return e.apply(this,arguments)}}()},{key:"readVariableSizeField",value:function(){var e=r(regeneratorRuntime.mark(function e(){var r,t,n,a=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:1,t=a.length>1&&void 0!==a[1]?a[1]:0,e.next=4,this.tokenizer.readNumber(i.UINT8);case 4:if(0!=(128&(n=e.sent))){e.next=7;break}return e.abrupt("return",{len:r,value:t+n});case 7:return n&=127,n+=t,e.abrupt("return",this.readVariableSizeField(r+1,n<<7));case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}();exports.StreamReader=f;
},{"token-types":"No44","debug":"t61f","../../common/Util":"SkgS"}],"BwFs":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,r,n,a,o,u){try{var i=e[o](u),c=i.value}catch(s){return void r(s)}i.done?t(c):Promise.resolve(c).then(n,a)}function r(e){return function(){var r=this,n=arguments;return new Promise(function(a,o){var u=e.apply(r,n);function i(e){t(u,a,o,i,c,"next",e)}function c(e){t(u,a,o,i,c,"throw",e)}i(void 0)})}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=p();return function(){var r,n=l(e);if(t){var a=l(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return s(this,r)}}function s(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?f(t):r}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.MpcSv8Parser=void 0;var h=require("debug"),m=require("../../common/BasicParser"),y=require("../../apev2/APEv2Parser"),d=require("../../common/FourCC"),b=require("./StreamVersion8"),v=(0,h.default)("music-metadata:parser:musepack"),k=function(e){u(a,m.BasicParser);var t=c(a);function a(){var e;return n(this,a),(e=t.apply(this,arguments)).audioLength=0,e}return o(a,[{key:"parse",value:function(){var e=r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.readToken(d.FourCcToken);case 2:if("MPCK"===e.sent){e.next=5;break}throw new Error("Invalid Magic number");case 5:return this.metadata.setFormat("container","Musepack, SV8"),e.abrupt("return",this.parsePacket());case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"parsePacket",value:function(){var e=r(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=new b.StreamReader(this.tokenizer);case 1:return e.next=3,t.readPacketHeader();case 3:r=e.sent,v("packet-header key=".concat(r.key,", payloadLength=").concat(r.payloadLength)),e.t0=r.key,e.next="SH"===e.t0?8:"AP"===e.t0?16:"RG"===e.t0?20:"EI"===e.t0?20:"SO"===e.t0?20:"ST"===e.t0?20:"CT"===e.t0?20:"SE"===e.t0?23:25;break;case 8:return e.next=10,t.readStreamHeader(r.payloadLength);case 10:return n=e.sent,this.metadata.setFormat("numberOfSamples",n.sampleCount),this.metadata.setFormat("sampleRate",n.sampleFrequency),this.metadata.setFormat("duration",n.sampleCount/n.sampleFrequency),this.metadata.setFormat("numberOfChannels",n.channelCount),e.abrupt("break",26);case 16:return this.audioLength+=r.payloadLength,e.next=19,this.tokenizer.ignore(r.payloadLength);case 19:return e.abrupt("break",26);case 20:return e.next=22,this.tokenizer.ignore(r.payloadLength);case 22:return e.abrupt("break",26);case 23:return this.metadata.setFormat("bitrate",8*this.audioLength/this.metadata.format.duration),e.abrupt("return",y.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options));case 25:throw new Error("Unexpected header: ".concat(r.key));case 26:e.next=1;break;case 27:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),a}();exports.MpcSv8Parser=k;
},{"debug":"t61f","../../common/BasicParser":"YSvq","../../apev2/APEv2Parser":"GhZC","../../common/FourCC":"Rl63","./StreamVersion8":"mQNZ"}],"gbbA":[function(require,module,exports) {
"use strict";function e(e,r,t,n,i,o,s){try{var a=e[o](s),u=a.value}catch(c){return void t(c)}a.done?r(u):Promise.resolve(u).then(n,i)}function r(r){return function(){var t=this,n=arguments;return new Promise(function(i,o){var s=r.apply(t,n);function a(r){e(s,i,o,a,u,"next",r)}function u(r){e(s,i,o,a,u,"throw",r)}a(void 0)})}}function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function n(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.BitReader=void 0;var o=require("token-types"),s=function(){function e(r){t(this,e),this.tokenizer=r,this.pos=0,this.dword=void 0}return i(e,[{key:"read",value:function(){var e=r(regeneratorRuntime.mark(function e(r){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.dword){e.next=6;break}return e.next=3,this.tokenizer.readToken(o.UINT32_LE);case 3:this.dword=e.sent,e.next=0;break;case 6:if(t=this.dword,this.pos+=r,!(this.pos<32)){e.next=13;break}return t>>>=32-this.pos,e.abrupt("return",t&(1<<r)-1);case 13:if(this.pos-=32,0!==this.pos){e.next=19;break}return this.dword=void 0,e.abrupt("return",t&(1<<r)-1);case 19:return e.next=21,this.tokenizer.readToken(o.UINT32_LE);case 21:return this.dword=e.sent,this.pos&&(t<<=this.pos,t|=this.dword>>>32-this.pos),e.abrupt("return",t&(1<<r)-1);case 24:case"end":return e.stop()}},e,this)}));return function(r){return e.apply(this,arguments)}}()},{key:"ignore",value:function(){var e=r(regeneratorRuntime.mark(function e(r){var t,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.pos>0&&(t=32-this.pos,this.dword=void 0,r-=t,this.pos=0),i=(r-(n=r%32))/32,e.next=5,this.tokenizer.ignore(4*i);case 5:return e.abrupt("return",this.read(n));case 6:case"end":return e.stop()}},e,this)}));return function(r){return e.apply(this,arguments)}}()}]),e}();exports.BitReader=s;
},{"token-types":"No44"}],"o6ZM":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Header=void 0;var t=require("token-types"),r=require("../../common/Util");exports.Header={len:24,get:function(i,l){var n={signature:e.from(i).toString("latin1",l,l+3),streamMinorVersion:r.getBitAllignedNumber(i,l+3,0,4),streamMajorVersion:r.getBitAllignedNumber(i,l+3,4,4),frameCount:t.UINT32_LE.get(i,l+4),maxLevel:t.UINT16_LE.get(i,l+8),sampleFrequency:[44100,48e3,37800,32e3][r.getBitAllignedNumber(i,l+10,0,2)],link:r.getBitAllignedNumber(i,l+10,2,2),profile:r.getBitAllignedNumber(i,l+10,4,4),maxBand:r.getBitAllignedNumber(i,l+11,0,6),intensityStereo:r.isBitSet(i,l+11,6),midSideStereo:r.isBitSet(i,l+11,7),titlePeak:t.UINT16_LE.get(i,l+12),titleGain:t.UINT16_LE.get(i,l+14),albumPeak:t.UINT16_LE.get(i,l+16),albumGain:t.UINT16_LE.get(i,l+18),lastFrameLength:t.UINT32_LE.get(i,l+20)>>>20&2047,trueGapless:r.isBitSet(i,l+23,0)};return n.lastFrameLength=n.trueGapless?t.UINT32_LE.get(i,20)>>>20&2047:0,n}};
},{"token-types":"No44","../../common/Util":"SkgS","buffer":"fe91"}],"jI0M":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,r,n,o,a,i){try{var u=e[a](i),s=u.value}catch(c){return void r(c)}u.done?t(s):Promise.resolve(s).then(n,o)}function r(e){return function(){var r=this,n=arguments;return new Promise(function(o,a){var i=e.apply(r,n);function u(e){t(i,o,a,u,s,"next",e)}function s(e){t(i,o,a,u,s,"throw",e)}u(void 0)})}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=p();return function(){var r,n=h(e);if(t){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?f(t):r}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.MpcSv7Parser=void 0;var m=require("debug"),d=require("../../common/BasicParser"),l=require("../../apev2/APEv2Parser"),y=require("./BitReader"),b=require("./StreamVersion7"),v=(0,m.default)("music-metadata:parser:musepack"),P=function(e){i(o,d.BasicParser);var t=s(o);function o(){var e;return n(this,o),(e=t.apply(this,arguments)).audioLength=0,e}return a(o,[{key:"parse",value:function(){var e=r(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.readToken(b.Header);case 2:if("MP+"===(t=e.sent).signature){e.next=5;break}throw new Error("Unexpected magic number");case 5:return v("stream-version=".concat(t.streamMajorVersion,".").concat(t.streamMinorVersion)),this.metadata.setFormat("container","Musepack, SV7"),this.metadata.setFormat("sampleRate",t.sampleFrequency),r=1152*(t.frameCount-1)+t.lastFrameLength,this.metadata.setFormat("numberOfSamples",r),this.duration=r/t.sampleFrequency,this.metadata.setFormat("duration",this.duration),this.bitreader=new y.BitReader(this.tokenizer),this.metadata.setFormat("numberOfChannels",t.midSideStereo||t.intensityStereo?2:1),e.next=16,this.bitreader.read(8);case 16:return n=e.sent,this.metadata.setFormat("codec",(n/100).toFixed(2)),e.next=20,this.skipAudioData(t.frameCount);case 20:return v("End of audio stream, switching to APEv2, offset=".concat(this.tokenizer.position)),e.abrupt("return",l.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options));case 22:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"skipAudioData",value:function(){var e=r(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t-- >0)){e.next=9;break}return e.next=3,this.bitreader.read(20);case 3:return r=e.sent,this.audioLength+=20+r,e.next=7,this.bitreader.ignore(r);case 7:e.next=0;break;case 9:return e.next=11,this.bitreader.read(11);case 11:n=e.sent,this.audioLength+=n,this.metadata.setFormat("bitrate",this.audioLength/this.duration);case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),o}();exports.MpcSv7Parser=P;
},{"debug":"t61f","../../common/BasicParser":"YSvq","../../apev2/APEv2Parser":"GhZC","./BitReader":"gbbA","./StreamVersion7":"o6ZM"}],"YrLg":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,r,n,o,u,i){try{var c=e[u](i),a=c.value}catch(s){return void r(s)}c.done?t(a):Promise.resolve(a).then(n,o)}function r(e){return function(){var r=this,n=arguments;return new Promise(function(o,u){var i=e.apply(r,n);function c(e){t(i,o,u,c,a,"next",e)}function a(e){t(i,o,u,c,a,"throw",e)}c(void 0)})}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=p();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?f(t):r}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0});var y=require("debug"),b=require("token-types"),v=require("../id3v2/AbstractID3Parser"),h=require("./sv8/MpcSv8Parser"),m=require("./sv7/MpcSv7Parser"),d=(0,y.default)("music-metadata:parser:musepack"),P=function(e){i(o,v.AbstractID3Parser);var t=a(o);function o(){return n(this,o),t.apply(this,arguments)}return u(o,[{key:"postId3v2Parse",value:function(){var e=r(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.peekToken(new b.StringType(3,"binary"));case 2:t=e.sent,e.t0=t,e.next="MP+"===e.t0?6:"MPC"===e.t0?9:12;break;case 6:return d("Musepack stream-version 7"),r=new m.MpcSv7Parser,e.abrupt("break",13);case 9:return d("Musepack stream-version 8"),r=new h.MpcSv8Parser,e.abrupt("break",13);case 12:throw new Error("Invalid Musepack signature prefix");case 13:return r.init(this.metadata,this.tokenizer,this.options),e.abrupt("return",r.parse());case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),o}();exports.default=P;
},{"debug":"t61f","token-types":"No44","../id3v2/AbstractID3Parser":"b5FX","./sv8/MpcSv8Parser":"BwFs","./sv7/MpcSv7Parser":"jI0M"}],"vHP2":[function(require,module,exports) {
"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.IdHeader=void 0;var r=require("token-types"),a=function(){function n(t){if(e(this,n),this.len=t,t<19)throw new Error("ID-header-page 0 should be at least 19 bytes long")}return t(n,[{key:"get",value:function(e,n){return{magicSignature:new r.StringType(8,"ascii").get(e,n+0),version:e.readUInt8(n+8),channelCount:e.readUInt8(n+9),preSkip:e.readInt16LE(n+10),inputSampleRate:e.readInt32LE(n+12),outputGain:e.readInt16LE(n+16),channelMapping:e.readUInt8(n+18)}}}]),n}();exports.IdHeader=a;
},{"token-types":"No44"}],"dw3O":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function o(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),t}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){var e=c();return function(){var r,o=f(t);if(e){var n=f(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return s(this,r)}}function s(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?u(e):r}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.OpusParser=void 0;var l=require("token-types"),p=require("../vorbis/VorbisParser"),h=require("./Opus"),m=function(t){n(a,p.VorbisParser);var r=i(a);function a(t,o,n){var i;return e(this,a),(i=r.call(this,t,o)).tokenizer=n,i.lastPos=-1,i}return o(a,[{key:"parseFirstPage",value:function(t,e){if(this.metadata.setFormat("codec","Opus"),this.idHeader=new h.IdHeader(e.length).get(e,0),"OpusHead"!==this.idHeader.magicSignature)throw new Error("Illegal ogg/Opus magic-signature");this.metadata.setFormat("sampleRate",this.idHeader.inputSampleRate),this.metadata.setFormat("numberOfChannels",this.idHeader.channelCount)}},{key:"parseFullPage",value:function(t){switch(new l.StringType(8,"ascii").get(t,0)){case"OpusTags":this.parseUserCommentList(t,8),this.lastPos=this.tokenizer.position-t.length}}},{key:"calculateDuration",value:function(t){if(this.metadata.format.sampleRate&&t.absoluteGranulePosition>=0){var e=t.absoluteGranulePosition-this.idHeader.preSkip;if(this.metadata.setFormat("numberOfSamples",e),this.metadata.setFormat("duration",e/48e3),-1!==this.lastPos&&this.tokenizer.fileInfo.size&&this.metadata.format.duration){var r=this.tokenizer.fileInfo.size-this.lastPos;this.metadata.setFormat("bitrate",8*r/this.metadata.format.duration)}}}}]),a}();exports.OpusParser=m;
},{"token-types":"No44","../vorbis/VorbisParser":"Y4Cr","./Opus":"vHP2"}],"BeCc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Header=void 0;var e=require("token-types"),r=require("../../common/Util");exports.Header={len:80,get:function(t,n){return{speex:new e.StringType(8,"ascii").get(t,n+0),version:r.trimRightNull(new e.StringType(20,"ascii").get(t,n+8)),version_id:t.readInt32LE(n+28),header_size:t.readInt32LE(n+32),rate:t.readInt32LE(n+36),mode:t.readInt32LE(n+40),mode_bitstream_version:t.readInt32LE(n+44),nb_channels:t.readInt32LE(n+48),bitrate:t.readInt32LE(n+52),frame_size:t.readInt32LE(n+56),vbr:t.readInt32LE(n+60),frames_per_packet:t.readInt32LE(n+64),extra_headers:t.readInt32LE(n+68),reserved1:t.readInt32LE(n+72),reserved2:t.readInt32LE(n+76)}}};
},{"token-types":"No44","../../common/Util":"SkgS"}],"Dfnp":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=f();return function(){var r,n=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?c(t):r}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeexParser=void 0;var l=require("debug"),p=require("../vorbis/VorbisParser"),y=require("./Speex"),b=(0,l.default)("music-metadata:parser:ogg:speex"),m=function(e){o(a,p.VorbisParser);var r=i(a);function a(e,n,o){var i;return t(this,a),(i=r.call(this,e,n)).tokenizer=o,i}return n(a,[{key:"parseFirstPage",value:function(e,t){b("First Ogg/Speex page");var r=y.Header.get(t,0);this.metadata.setFormat("codec","Speex ".concat(r.version)),this.metadata.setFormat("numberOfChannels",r.nb_channels),this.metadata.setFormat("sampleRate",r.rate),-1!==r.bitrate&&this.metadata.setFormat("bitrate",r.bitrate)}}]),a}();exports.SpeexParser=m;
},{"debug":"t61f","../vorbis/VorbisParser":"Y4Cr","./Speex":"BeCc"}],"gxtY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IdentificationHeader=void 0;var e=require("token-types");exports.IdentificationHeader={len:42,get:function(t,r){return{id:new e.StringType(7,"ascii").get(t,r),vmaj:t.readUInt8(r+7),vmin:t.readUInt8(r+8),vrev:t.readUInt8(r+9),vmbw:t.readUInt16BE(r+10),vmbh:t.readUInt16BE(r+17),nombr:e.UINT24_BE.get(t,r+37),nqual:t.readUInt8(r+40)}}};
},{"token-types":"No44"}],"dPVn":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.TheoraParser=void 0;var r=require("debug"),n=require("./Theora"),o=(0,r.default)("music-metadata:parser:ogg:theora"),i=function(){function t(a,r,n){e(this,t),this.metadata=a,this.tokenizer=n}return a(t,[{key:"parsePage",value:function(e,t){e.headerType.firstPage&&this.parseFirstPage(e,t)}},{key:"flush",value:function(){o("flush")}},{key:"calculateDuration",value:function(e){o("duration calculation not implemented")}},{key:"parseFirstPage",value:function(e,t){o("First Ogg/Theora page"),this.metadata.setFormat("codec","Theora");var a=n.IdentificationHeader.get(t,0);this.metadata.setFormat("bitrate",a.nombr)}}]),t}();exports.TheoraParser=i;
},{"debug":"t61f","./Theora":"gxtY"}],"O3gk":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(c){return void r(c)}s.done?t(u):Promise.resolve(u).then(n,a)}function n(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var i=e.apply(t,n);function s(e){r(i,a,o,s,u,"next",e)}function u(e){r(i,a,o,s,u,"throw",e)}s(void 0)})}}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=c();return function(){var r,n=p(e);if(t){var a=p(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?u(e):r}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,r){return t&&g(e.prototype,t),r&&g(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.OggParser=exports.SegmentTable=void 0;var l=require("token-types"),m=require("strtok3/lib/core"),d=require("debug"),b=require("../common/Util"),y=require("../common/FourCC"),P=require("../common/BasicParser"),v=require("./vorbis/VorbisParser"),k=require("./opus/OpusParser"),O=require("./speex/SpeexParser"),w=require("./theora/TheoraParser"),S=(0,d.default)("music-metadata:parser:ogg"),x=function(){function e(t){f(this,e),this.len=t.page_segments}return h(e,[{key:"get",value:function(t,r){return{totalPageSize:e.sum(t,r,this.len)}}}],[{key:"sum",value:function(e,t,r){for(var n=0,a=t;a<t+r;++a)n+=e[a];return n}}]),e}();exports.SegmentTable=x;var T=function(t){a(o,P.BasicParser);var r=i(o);function o(){return f(this,o),r.apply(this,arguments)}return h(o,[{key:"parse",value:function(){var t=n(regeneratorRuntime.mark(function t(){var r,n,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:S("pos=%s, parsePage()",this.tokenizer.position),t.prev=1;case 2:return t.next=4,this.tokenizer.readToken(o.Header);case 4:if("OggS"===(r=t.sent).capturePattern){t.next=7;break}throw new Error("Invalid Ogg capture pattern");case 7:return this.metadata.setFormat("container","Ogg"),this.header=r,this.pageNumber=r.pageSequenceNo,S("page#=%s, Ogg.id=%s",r.pageSequenceNo,r.capturePattern),t.next=13,this.tokenizer.readToken(new x(r));case 13:return n=t.sent,S("totalPageSize=%s",n.totalPageSize),t.next=17,this.tokenizer.readToken(new l.Uint8ArrayType(n.totalPageSize));case 17:if(a=t.sent,S("firstPage=%s, lastPage=%s, continued=%s",r.headerType.firstPage,r.headerType.lastPage,r.headerType.continued),!r.headerType.firstPage){t.next=37;break}i=new l.StringType(7,"ascii").get(e.from(a),0),t.t0=i,t.next="vorbis"===t.t0?24:"OpusHea"===t.t0?27:"Speex  "===t.t0?30:"fishead"===t.t0?33:"\0theora"===t.t0?33:36;break;case 24:return S("Set page consumer to Ogg/Vorbis"),this.pageConsumer=new v.VorbisParser(this.metadata,this.options),t.abrupt("break",37);case 27:return S("Set page consumer to Ogg/Opus"),this.pageConsumer=new k.OpusParser(this.metadata,this.options,this.tokenizer),t.abrupt("break",37);case 30:return S("Set page consumer to Ogg/Speex"),this.pageConsumer=new O.SpeexParser(this.metadata,this.options,this.tokenizer),t.abrupt("break",37);case 33:return S("Set page consumer to Ogg/Theora"),this.pageConsumer=new w.TheoraParser(this.metadata,this.options,this.tokenizer),t.abrupt("break",37);case 36:throw new Error("gg audio-codec not recognized (id="+i+")");case 37:this.pageConsumer.parsePage(r,a);case 38:if(!r.headerType.lastPage){t.next=2;break}case 39:t.next=55;break;case 41:if(t.prev=41,t.t1=t.catch(1),!(t.t1 instanceof m.EndOfStreamError)){t.next=50;break}this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),S("End-of-stream"),this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),this.header&&this.pageConsumer.calculateDuration(this.header),t.next=55;break;case 50:if(!t.t1.message.startsWith("FourCC")){t.next=54;break}this.pageNumber>0&&(this.metadata.addWarning("Invalid FourCC ID, maybe last OGG-page is not marked with last-page flag"),this.pageConsumer.flush()),t.next=55;break;case 54:throw t.t1;case 55:case"end":return t.stop()}},t,this,[[1,41]])}));return function(){return t.apply(this,arguments)}}()}]),o}();exports.OggParser=T,T.Header={len:27,get:function(e,t){return{capturePattern:y.FourCcToken.get(e,t),version:l.UINT8.get(e,t+4),headerType:{continued:b.getBit(e,t+5,0),firstPage:b.getBit(e,t+5,1),lastPage:b.getBit(e,t+5,2)},absoluteGranulePosition:Number(l.UINT64_LE.get(e,t+6)),streamSerialNumber:l.UINT32_LE.get(e,t+14),pageSequenceNo:l.UINT32_LE.get(e,t+18),pageChecksum:l.UINT32_LE.get(e,t+22),page_segments:l.UINT8.get(e,t+26)}}};
},{"token-types":"No44","strtok3/lib/core":"R0T4","debug":"t61f","../common/Util":"SkgS","../common/FourCC":"Rl63","../common/BasicParser":"YSvq","./vorbis/VorbisParser":"Y4Cr","./opus/OpusParser":"dw3O","./speex/SpeexParser":"Dfnp","./theora/TheoraParser":"dPVn","buffer":"fe91"}],"NoUO":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListInfoTagValue=exports.Header=void 0;var r=require("token-types");exports.Header={len:8,get:function(e,t){return{chunkID:e.toString("binary",t,t+4),chunkSize:r.UINT32_LE.get(e,4)}}};var i=function(){function t(n){e(this,t),this.tagHeader=n,this.len=n.chunkSize,this.len+=1&this.len}return n(t,[{key:"get",value:function(e,t){return new r.StringType(this.tagHeader.chunkSize,"ascii").get(e,t)}}]),t}();exports.ListInfoTagValue=i;
},{"token-types":"No44"}],"nthu":[function(require,module,exports) {
"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}var r;Object.defineProperty(exports,"__esModule",{value:!0}),exports.FactChunk=exports.Format=exports.WaveFormat=void 0,function(e){e[e.PCM=1]="PCM",e[e.ADPCM=2]="ADPCM",e[e.IEEE_FLOAT=3]="IEEE_FLOAT",e[e.MPEG_ADTS_AAC=5632]="MPEG_ADTS_AAC",e[e.MPEG_LOAS=5634]="MPEG_LOAS",e[e.RAW_AAC1=255]="RAW_AAC1",e[e.DOLBY_AC3_SPDIF=146]="DOLBY_AC3_SPDIF",e[e.DVM=8192]="DVM",e[e.RAW_SPORT=576]="RAW_SPORT",e[e.ESST_AC3=577]="ESST_AC3",e[e.DRM=9]="DRM",e[e.DTS2=8193]="DTS2",e[e.MPEG=80]="MPEG"}(r=exports.WaveFormat||(exports.WaveFormat={}));var a=function(){function n(t){if(e(this,n),t.chunkSize<16)throw new Error("Invalid chunk size");this.len=t.chunkSize}return t(n,[{key:"get",value:function(e,n){return{wFormatTag:e.readUInt16LE(n),nChannels:e.readUInt16LE(n+2),nSamplesPerSec:e.readUInt32LE(n+4),nAvgBytesPerSec:e.readUInt32LE(n+8),nBlockAlign:e.readUInt16LE(n+12),wBitsPerSample:e.readUInt16LE(n+14)}}}]),n}();exports.Format=a;var o=function(){function n(t){if(e(this,n),t.chunkSize<4)throw new Error("Invalid fact chunk size.");this.len=t.chunkSize}return t(n,[{key:"get",value:function(e,n){return{dwSampleLength:e.readUInt32LE(n)}}}]),n}();exports.FactChunk=o;
},{}],"yBAF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BroadcastAudioExtensionChunk=void 0;var e=require("token-types");exports.BroadcastAudioExtensionChunk={len:420,get:function(t,i){return{description:new e.StringType(256,"ascii").get(t,i).trim(),originator:new e.StringType(32,"ascii").get(t,i+256).trim(),originatorReference:new e.StringType(32,"ascii").get(t,i+288).trim(),originationDate:new e.StringType(10,"ascii").get(t,i+320).trim(),originationTime:new e.StringType(8,"ascii").get(t,i+330).trim(),timeReferenceLow:e.UINT32_LE.get(t,i+338),timeReferenceHigh:e.UINT32_LE.get(t,i+342),version:e.UINT16_LE.get(t,i+346),umid:new e.Uint8ArrayType(64).get(t,i+348),loudnessValue:e.UINT16_LE.get(t,i+412),maxTruePeakLevel:e.UINT16_LE.get(t,i+414),maxMomentaryLoudness:e.UINT16_LE.get(t,i+416),maxShortTermLoudness:e.UINT16_LE.get(t,i+418)}}};
},{"token-types":"No44"}],"c0jC":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,r,n,a,o,i){try{var u=e[o](i),c=u.value}catch(s){return void r(s)}u.done?t(c):Promise.resolve(c).then(n,a)}function r(e){return function(){var r=this,n=arguments;return new Promise(function(a,o){var i=e.apply(r,n);function u(e){t(i,a,o,u,c,"next",e)}function c(e){t(i,a,o,u,c,"throw",e)}u(void 0)})}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=p();return function(){var r,n=h(e);if(t){var a=h(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return s(this,r)}}function s(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?f(t):r}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WaveParser=void 0;var k=require("strtok3/lib/core"),d=require("token-types"),l=require("debug"),m=require("../riff/RiffChunk"),b=require("./../wav/WaveChunk"),g=require("../id3v2/ID3v2Parser"),y=require("../common/Util"),v=require("../common/FourCC"),x=require("../common/BasicParser"),F=require("../wav/BwfChunk"),I=(0,l.default)("music-metadata:parser:RIFF"),w=function(e){i(a,x.BasicParser);var t=c(a);function a(){return n(this,a),t.apply(this,arguments)}return o(a,[{key:"parse",value:function(){var e=r(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.readToken(m.Header);case 2:if(t=e.sent,I("pos=".concat(this.tokenizer.position,", parse: chunkID=").concat(t.chunkID)),"RIFF"===t.chunkID){e.next=6;break}return e.abrupt("return");case 6:return e.abrupt("return",this.parseRiffChunk(t.chunkSize).catch(function(e){if(!(e instanceof k.EndOfStreamError))throw e}));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"parseRiffChunk",value:function(){var e=r(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.readToken(v.FourCcToken);case 2:r=e.sent,this.metadata.setFormat("container",r),e.t0=r,e.next="WAVE"===e.t0?7:8;break;case 7:return e.abrupt("return",this.readWaveChunk(t-v.FourCcToken.len));case 8:throw new Error("Unsupported RIFF format: RIFF/".concat(r));case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"readWaveChunk",value:function(){var e=r(regeneratorRuntime.mark(function e(t){var r,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t>=m.Header.len)){e.next=15;break}return e.next=3,this.tokenizer.readToken(m.Header);case 3:return r=e.sent,t-=m.Header.len+r.chunkSize,r.chunkSize>t&&this.metadata.addWarning("Data chunk size exceeds file size"),this.header=r,I("pos=".concat(this.tokenizer.position,", readChunk: chunkID=RIFF/WAVE/").concat(r.chunkID)),e.delegateYield(regeneratorRuntime.mark(function e(){var t,a,o,i,u,c,s,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=r.chunkID,e.next="LIST"===e.t0?3:"fact"===e.t0?6:"fmt "===e.t0?11:"id3 "===e.t0?23:"ID3 "===e.t0?23:"data"===e.t0?30:"bext"===e.t0?39:"\0\0\0\0"===e.t0?44:49;break;case 3:return e.next=5,n.parseListTag(r);case 5:return e.abrupt("break",53);case 6:return n.metadata.setFormat("lossless",!1),e.next=9,n.tokenizer.readToken(new b.FactChunk(r));case 9:return n.fact=e.sent,e.abrupt("break",53);case 11:return e.next=13,n.tokenizer.readToken(new b.Format(r));case 13:return t=e.sent,(a=b.WaveFormat[t.wFormatTag])||(I("WAVE/non-PCM format="+t.wFormatTag),a="non-PCM ("+t.wFormatTag+")"),n.metadata.setFormat("codec",a),n.metadata.setFormat("bitsPerSample",t.wBitsPerSample),n.metadata.setFormat("sampleRate",t.nSamplesPerSec),n.metadata.setFormat("numberOfChannels",t.nChannels),n.metadata.setFormat("bitrate",t.nBlockAlign*t.nSamplesPerSec*8),n.blockAlign=t.nBlockAlign,e.abrupt("break",53);case 23:return e.next=25,n.tokenizer.readToken(new d.Uint8ArrayType(r.chunkSize));case 25:return o=e.sent,i=k.fromBuffer(o),e.next=29,(new g.ID3v2Parser).parse(n.metadata,i,n.options);case 29:return e.abrupt("break",53);case 30:return!1!==n.metadata.format.lossless&&n.metadata.setFormat("lossless",!0),u=r.chunkSize,n.tokenizer.fileInfo.size&&(c=n.tokenizer.fileInfo.size-n.tokenizer.position)<u&&(n.metadata.addWarning("data chunk length exceeding file length"),u=c),(s=n.fact?n.fact.dwSampleLength:4294967295===u?void 0:u/n.blockAlign)&&(n.metadata.setFormat("numberOfSamples",s),n.metadata.setFormat("duration",s/n.metadata.format.sampleRate)),n.metadata.setFormat("bitrate",n.metadata.format.numberOfChannels*n.blockAlign*n.metadata.format.sampleRate),e.next=38,n.tokenizer.ignore(r.chunkSize);case 38:return e.abrupt("break",53);case 39:return e.next=41,n.tokenizer.readToken(F.BroadcastAudioExtensionChunk);case 41:return f=e.sent,Object.keys(f).forEach(function(e){n.metadata.addTag("exif","bext."+e,f[e])}),e.abrupt("break",53);case 44:return I("Ignore padding chunk: RIFF/".concat(r.chunkID," of ").concat(r.chunkSize," bytes")),n.metadata.addWarning("Ignore chunk: RIFF/"+r.chunkID),e.next=48,n.tokenizer.ignore(r.chunkSize);case 48:return e.abrupt("break",53);case 49:return I("Ignore chunk: RIFF/".concat(r.chunkID," of ").concat(r.chunkSize," bytes")),n.metadata.addWarning("Ignore chunk: RIFF/"+r.chunkID),e.next=53,n.tokenizer.ignore(r.chunkSize);case 53:case"end":return e.stop()}},e)})(),"t0",9);case 9:if(this.header.chunkSize%2!=1){e.next=13;break}return I("Read odd padding byte"),e.next=13,this.tokenizer.ignore(1);case 13:e.next=0;break;case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"parseListTag",value:function(){var e=r(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.readToken(new d.StringType(4,"binary"));case 2:r=e.sent,I("pos=%s, parseListTag: chunkID=RIFF/WAVE/LIST/%s",this.tokenizer.position,r),e.t0=r,e.next="INFO"===e.t0?7:(e.t0,8);break;case 7:return e.abrupt("return",this.parseRiffInfoTags(t.chunkSize-4));case 8:return this.metadata.addWarning("Ignore chunk: RIFF/WAVE/LIST/"+r),I("Ignoring chunkID=RIFF/WAVE/LIST/"+r),e.abrupt("return",this.tokenizer.ignore(t.chunkSize-4).then());case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"parseRiffInfoTags",value:function(){var e=r(regeneratorRuntime.mark(function e(t){var r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t>=8)){e.next=12;break}return e.next=3,this.tokenizer.readToken(m.Header);case 3:return r=e.sent,n=new m.ListInfoTagValue(r),e.next=7,this.tokenizer.readToken(n);case 7:a=e.sent,this.addTag(r.chunkID,y.stripNulls(a)),t-=8+n.len,e.next=0;break;case 12:if(0===t){e.next=14;break}throw Error("Illegal remaining size: "+t);case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addTag",value:function(e,t){this.metadata.addTag("exif",e,t)}}]),a}();exports.WaveParser=w;
},{"strtok3/lib/core":"R0T4","token-types":"No44","debug":"t61f","../riff/RiffChunk":"NoUO","./../wav/WaveChunk":"nthu","../id3v2/ID3v2Parser":"fbDe","../common/Util":"SkgS","../common/FourCC":"Rl63","../common/BasicParser":"YSvq","../wav/BwfChunk":"yBAF"}],"L88I":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WavPack=void 0;var n=require("token-types"),r=require("../common/FourCC"),o=[6e3,8e3,9600,11025,12e3,16e3,22050,24e3,32e3,44100,48e3,64e3,88200,96e3,192e3,-1],l=function(){function t(){e(this,t)}return i(t,null,[{key:"isBitSet",value:function(e,i){return 1===t.getBitAllignedNumber(e,i,1)}},{key:"getBitAllignedNumber",value:function(e,t,i){return e>>>t&4294967295>>>32-i}}]),t}();exports.WavPack=l,l.BlockHeaderToken={len:32,get:function(e,t){var i=n.UINT32_LE.get(e,t+24),a={BlockID:r.FourCcToken.get(e,t),blockSize:n.UINT32_LE.get(e,t+4),version:n.UINT16_LE.get(e,t+8),totalSamples:n.UINT32_LE.get(e,t+12),blockIndex:n.UINT32_LE.get(e,t+16),blockSamples:n.UINT32_LE.get(e,t+20),flags:{bitsPerSample:8*(1+l.getBitAllignedNumber(i,0,2)),isMono:l.isBitSet(i,2),isHybrid:l.isBitSet(i,3),isJointStereo:l.isBitSet(i,4),crossChannel:l.isBitSet(i,5),hybridNoiseShaping:l.isBitSet(i,6),floatingPoint:l.isBitSet(i,7),samplingRate:o[l.getBitAllignedNumber(i,23,4)],isDSD:l.isBitSet(i,31)},crc:new n.Uint8ArrayType(4).get(e,t+28)};return a.flags.isDSD&&(a.totalSamples*=8),a}},l.MetadataIdToken={len:1,get:function(e,t){return{functionId:l.getBitAllignedNumber(e[t],0,6),isOptional:l.isBitSet(e[t],5),isOddSize:l.isBitSet(e[t],6),largeBlock:l.isBitSet(e[t],7)}}};
},{"token-types":"No44","../common/FourCC":"Rl63"}],"hYXK":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t,r,a,n,o,i){try{var s=e[o](i),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(a,n)}function a(e){return function(){var t=this,a=arguments;return new Promise(function(n,o){var i=e.apply(t,a);function s(e){r(i,n,o,s,c,"next",e)}function c(e){r(i,n,o,s,c,"throw",e)}s(void 0)})}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=p();return function(){var r,a=k(e);if(t){var n=k(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return l(this,r)}}function l(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?f(e):r}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WavPackParser=void 0;var d=require("token-types"),m=require("../apev2/APEv2Parser"),b=require("../common/FourCC"),h=require("../common/BasicParser"),v=require("./WavPackToken"),y=require("debug"),g=(0,y.default)("music-metadata:parser:WavPack"),P=function(t){s(o,h.BasicParser);var r=u(o);function o(){return n(this,o),r.apply(this,arguments)}return i(o,[{key:"parse",value:function(){var e=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.audioDataSize=0,e.next=3,this.parseWavPackBlocks();case 3:return e.abrupt("return",m.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"parseWavPackBlocks",value:function(){var e=a(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.peekToken(b.FourCcToken);case 2:if("wvpk"===e.sent){e.next=5;break}return e.abrupt("break",17);case 5:return e.next=7,this.tokenizer.readToken(v.WavPack.BlockHeaderToken);case 7:if("wvpk"===(t=e.sent).BlockID){e.next=10;break}throw new Error("Invalid WavPack Block-ID");case 10:return g("WavPack header blockIndex=".concat(t.blockIndex,", len=").concat(v.WavPack.BlockHeaderToken.len)),0!==t.blockIndex||this.metadata.format.container||(this.metadata.setFormat("container","WavPack"),this.metadata.setFormat("lossless",!t.flags.isHybrid),this.metadata.setFormat("bitsPerSample",t.flags.bitsPerSample),t.flags.isDSD||(this.metadata.setFormat("sampleRate",t.flags.samplingRate),this.metadata.setFormat("duration",t.totalSamples/t.flags.samplingRate)),this.metadata.setFormat("numberOfChannels",t.flags.isMono?1:2),this.metadata.setFormat("numberOfSamples",t.totalSamples),this.metadata.setFormat("codec",t.flags.isDSD?"DSD":"PCM")),r=t.blockSize-(v.WavPack.BlockHeaderToken.len-8),e.next=15,0===t.blockIndex?this.parseMetadataSubBlock(t,r):this.tokenizer.ignore(r);case 15:t.blockSamples>0&&(this.audioDataSize+=t.blockSize);case 16:if(!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=v.WavPack.BlockHeaderToken.len){e.next=0;break}case 17:this.metadata.setFormat("bitrate",8*this.audioDataSize/this.metadata.format.duration);case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"parseMetadataSubBlock",value:function(){var t=a(regeneratorRuntime.mark(function t(r,a){var n,o,i,s,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a>v.WavPack.MetadataIdToken.len)){t.next=36;break}return t.next=3,this.tokenizer.readToken(v.WavPack.MetadataIdToken);case 3:return n=t.sent,t.next=6,this.tokenizer.readNumber(n.largeBlock?d.UINT24_LE:d.UINT8);case 6:return o=t.sent,i=e.alloc(2*o-(n.isOddSize?1:0)),t.next=10,this.tokenizer.readBuffer(i);case 10:g("Metadata Sub-Blocks functionId=0x".concat(n.functionId.toString(16),", id.largeBlock=").concat(n.largeBlock,",data-size=").concat(i.length)),t.t0=n.functionId,t.next=0===t.t0?14:14===t.t0?15:36===t.t0?23:38===t.t0?25:47===t.t0?27:29;break;case 14:return t.abrupt("break",31);case 15:if(g("ID_DSD_BLOCK"),s=1<<i.readUInt8(0),c=r.flags.samplingRate*s*8,r.flags.isDSD){t.next=20;break}throw new Error("Only expect DSD block if DSD-flag is set");case 20:return this.metadata.setFormat("sampleRate",c),this.metadata.setFormat("duration",r.totalSamples/c),t.abrupt("break",31);case 23:return g("ID_ALT_TRAILER: trailer for non-wav files"),t.abrupt("break",31);case 25:return this.metadata.setFormat("audioMD5",i),t.abrupt("break",31);case 27:return g("ID_BLOCK_CHECKSUM: checksum=".concat(i.toString("hex"))),t.abrupt("break",31);case 29:return g("Ignore unsupported meta-sub-block-id functionId=0x".concat(n.functionId.toString(16))),t.abrupt("break",31);case 31:a-=v.WavPack.MetadataIdToken.len+(n.largeBlock?d.UINT24_LE.len:d.UINT8.len)+2*o,g("remainingLength=".concat(a)),n.isOddSize&&this.tokenizer.ignore(1),t.next=0;break;case 36:if(0===a){t.next=38;break}throw new Error("metadata-sub-block should fit it remaining length");case 38:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()}]),o}();exports.WavPackParser=P;
},{"token-types":"No44","../apev2/APEv2Parser":"GhZC","../common/FourCC":"Rl63","../common/BasicParser":"YSvq","./WavPackToken":"L88I","debug":"t61f","buffer":"fe91"}],"Z6qt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FormatChunk=exports.ChannelType=exports.DsdChunk=exports.ChunkHeader=void 0;var e,n=require("token-types"),t=require("../common/FourCC");exports.ChunkHeader={len:12,get:function(e,r){return{id:t.FourCcToken.get(e,r),size:n.UINT64_LE.get(e,r+4)}}},exports.DsdChunk={len:16,get:function(e,t){return{fileSize:n.INT64_LE.get(e,t),metadataPointer:n.INT64_LE.get(e,t+8)}}},function(e){e[e.mono=1]="mono",e[e.stereo=2]="stereo",e[e.channels=3]="channels",e[e.quad=4]="quad",e[e["4 channels"]=5]="4 channels",e[e["5 channels"]=6]="5 channels",e[e["5.1 channels"]=7]="5.1 channels"}(e=exports.ChannelType||(exports.ChannelType={})),exports.FormatChunk={len:40,get:function(e,t){return{formatVersion:n.INT32_LE.get(e,t),formatID:n.INT32_LE.get(e,t+4),channelType:n.INT32_LE.get(e,t+8),channelNum:n.INT32_LE.get(e,t+12),samplingFrequency:n.INT32_LE.get(e,t+16),bitsPerSample:n.INT32_LE.get(e,t+20),sampleCount:n.INT64_LE.get(e,t+24),blockSizePerChannel:n.INT32_LE.get(e,t+32)}}};
},{"token-types":"No44","../common/FourCC":"Rl63"}],"seRs":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,r,n,a,o,i){try{var u=e[o](i),s=u.value}catch(c){return void r(c)}u.done?t(s):Promise.resolve(s).then(n,a)}function r(e){return function(){var r=this,n=arguments;return new Promise(function(a,o){var i=e.apply(r,n);function u(e){t(i,a,o,u,s,"next",e)}function s(e){t(i,a,o,u,s,"throw",e)}u(void 0)})}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=p();return function(){var r,n=l(e);if(t){var a=l(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return c(this,r)}}function c(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?f(t):r}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DsfParser=void 0;var m=require("debug"),h=require("../id3v2/AbstractID3Parser"),b=require("./DsfChunk"),d=require("../id3v2/ID3v2Parser"),y=(0,m.default)("music-metadata:parser:DSF"),k=function(e){i(a,h.AbstractID3Parser);var t=s(a);function a(){return n(this,a),t.apply(this,arguments)}return o(a,[{key:"postId3v2Parse",value:function(){var e=r(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.tokenizer.position,e.next=3,this.tokenizer.readToken(b.ChunkHeader);case 3:if("DSD "===(r=e.sent).id){e.next=6;break}throw new Error("Invalid chunk signature");case 6:return this.metadata.setFormat("container","DSF"),this.metadata.setFormat("lossless",!0),e.next=10,this.tokenizer.readToken(b.DsdChunk);case 10:if((n=e.sent).metadataPointer!==BigInt(0)){e.next=15;break}y("No ID3v2 tag present"),e.next=21;break;case 15:return y("expect ID3v2 at offset=".concat(n.metadataPointer)),e.next=18,this.parseChunks(n.fileSize-r.size);case 18:return e.next=20,this.tokenizer.ignore(Number(n.metadataPointer)-this.tokenizer.position-t);case 20:return e.abrupt("return",(new d.ID3v2Parser).parse(this.metadata,this.tokenizer,this.options));case 21:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"parseChunks",value:function(){var e=r(regeneratorRuntime.mark(function e(t){var r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t>=b.ChunkHeader.len)){e.next=24;break}return e.next=3,this.tokenizer.readToken(b.ChunkHeader);case 3:r=e.sent,y("Parsing chunk name=".concat(r.id," size=").concat(r.size)),e.t0=r.id,e.next="fmt "===e.t0?8:19;break;case 8:return e.next=10,this.tokenizer.readToken(b.FormatChunk);case 10:return n=e.sent,this.metadata.setFormat("numberOfChannels",n.channelNum),this.metadata.setFormat("sampleRate",n.samplingFrequency),this.metadata.setFormat("bitsPerSample",n.bitsPerSample),this.metadata.setFormat("numberOfSamples",n.sampleCount),this.metadata.setFormat("duration",Number(n.sampleCount)/n.samplingFrequency),a=n.bitsPerSample*n.samplingFrequency*n.channelNum,this.metadata.setFormat("bitrate",a),e.abrupt("return");case 19:return this.tokenizer.ignore(Number(r.size)-b.ChunkHeader.len),e.abrupt("break",21);case 21:t-=r.size,e.next=0;break;case 24:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),a}();exports.DsfParser=k;
},{"debug":"t61f","../id3v2/AbstractID3Parser":"b5FX","./DsfChunk":"Z6qt","../id3v2/ID3v2Parser":"fbDe"}],"FrB2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ChunkHeader64=void 0;var e=require("token-types"),r=require("../common/FourCC");exports.ChunkHeader64={len:12,get:function(t,o){return{chunkID:r.FourCcToken.get(t,o),chunkSize:e.INT64_BE.get(t,o+4)}}};
},{"token-types":"No44","../common/FourCC":"Rl63"}],"Sk3L":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,n,r,a,o,i){try{var s=e[o](i),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}function n(e){return function(){var n=this,r=arguments;return new Promise(function(a,o){var i=e.apply(n,r);function s(e){t(i,a,o,s,u,"next",e)}function u(e){t(i,a,o,s,u,"throw",e)}s(void 0)})}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=k();return function(){var n,r=f(e);if(t){var a=f(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,n){return!n||"object"!==e(n)&&"function"!=typeof n?h(t):n}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DsdiffParser=void 0;var p=require("token-types"),m=require("debug"),l=require("strtok3/lib/core"),d=require("../common/FourCC"),b=require("../common/BasicParser"),y=require("../id3v2/ID3v2Parser"),x=require("./DsdiffToken"),z=(0,m.default)("music-metadata:parser:aiff"),S=function(e){i(a,b.BasicParser);var t=u(a);function a(){return r(this,a),t.apply(this,arguments)}return o(a,[{key:"parse",value:function(){var e=n(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.readToken(x.ChunkHeader64);case 2:if("FRM8"===(t=e.sent).chunkID){e.next=5;break}throw new Error("Unexpected chunk-ID");case 5:return e.next=7,this.tokenizer.readToken(d.FourCcToken);case 7:n=e.sent.trim(),e.t0=n,e.next="DSD"===e.t0?11:14;break;case 11:return this.metadata.setFormat("container","DSDIFF/".concat(n)),this.metadata.setFormat("lossless",!0),e.abrupt("return",this.readFmt8Chunks(t.chunkSize-BigInt(d.FourCcToken.len)));case 14:throw Error("Unsupported DSDIFF type: ".concat(n));case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"readFmt8Chunks",value:function(){var e=n(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t>=x.ChunkHeader64.len)){e.next=10;break}return e.next=3,this.tokenizer.readToken(x.ChunkHeader64);case 3:return n=e.sent,z("Chunk id=".concat(n.chunkID)),e.next=7,this.readData(n);case 7:t-=BigInt(x.ChunkHeader64.len)+n.chunkSize,e.next=0;break;case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"readData",value:function(){var e=n(regeneratorRuntime.mark(function e(t){var n,r,a,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:z("Reading data of chunk[ID=".concat(t.chunkID,", size=").concat(t.chunkSize,"]")),n=this.tokenizer.position,e.t0=t.chunkID.trim(),e.next="FVER"===e.t0?5:"PROP"===e.t0?10:"ID3"===e.t0?18:"DSD"===e.t0?27:25;break;case 5:return e.next=7,this.tokenizer.readToken(p.UINT32_LE);case 7:return r=e.sent,z("DSDIFF version=".concat(r)),e.abrupt("break",30);case 10:return e.next=12,this.tokenizer.readToken(d.FourCcToken);case 12:if("SND "===e.sent){e.next=15;break}throw new Error("Unexpected PROP-chunk ID");case 15:return e.next=17,this.handleSoundPropertyChunks(t.chunkSize-BigInt(d.FourCcToken.len));case 17:return e.abrupt("break",30);case 18:return e.next=20,this.tokenizer.readToken(new p.Uint8ArrayType(Number(t.chunkSize)));case 20:return a=e.sent,o=l.fromBuffer(a),e.next=24,(new y.ID3v2Parser).parse(this.metadata,o,this.options);case 24:return e.abrupt("break",30);case 25:return z("Ignore chunk[ID=".concat(t.chunkID,", size=").concat(t.chunkSize,"]")),e.abrupt("break",30);case 27:return this.metadata.setFormat("numberOfSamples",Number(t.chunkSize*BigInt(8)/BigInt(this.metadata.format.numberOfChannels))),this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate),e.abrupt("break",30);case 30:if(!((i=t.chunkSize-BigInt(this.tokenizer.position-n))>0)){e.next=35;break}return z("After Parsing chunk, remaining ".concat(i," bytes")),e.next=35,this.tokenizer.ignore(Number(i));case 35:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleSoundPropertyChunks",value:function(){var e=n(regeneratorRuntime.mark(function e(t){var n,r,a,o,i,s,u,c,h,k,f,m,l,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:z("Parsing sound-property-chunks, remainingSize=".concat(t));case 1:if(!(t>0)){e.next=65;break}return e.next=4,this.tokenizer.readToken(x.ChunkHeader64);case 4:n=e.sent,z("Sound-property-chunk[ID=".concat(n.chunkID,", size=").concat(n.chunkSize,"]")),r=this.tokenizer.position,e.t0=n.chunkID.trim(),e.next="FS"===e.t0?10:"CHNL"===e.t0?15:"CMPR"===e.t0?22:"ABSS"===e.t0?34:"LSCO"===e.t0?48:(e.t0,53);break;case 10:return e.next=12,this.tokenizer.readToken(p.UINT32_BE);case 12:return a=e.sent,this.metadata.setFormat("sampleRate",a),e.abrupt("break",56);case 15:return e.next=17,this.tokenizer.readToken(p.UINT16_BE);case 17:return o=e.sent,this.metadata.setFormat("numberOfChannels",o),e.next=21,this.handleChannelChunks(n.chunkSize-BigInt(p.UINT16_BE.len));case 21:return e.abrupt("break",56);case 22:return e.next=24,this.tokenizer.readToken(d.FourCcToken);case 24:return i=e.sent.trim(),e.next=27,this.tokenizer.readToken(p.UINT8);case 27:return s=e.sent,e.next=30,this.tokenizer.readToken(new p.StringType(s,"ascii"));case 30:return u=e.sent,"DSD"===i&&(this.metadata.setFormat("lossless",!0),this.metadata.setFormat("bitsPerSample",1)),this.metadata.setFormat("codec","".concat(i," (").concat(u,")")),e.abrupt("break",56);case 34:return e.next=36,this.tokenizer.readToken(p.UINT16_BE);case 36:return c=e.sent,e.next=39,this.tokenizer.readToken(p.UINT8);case 39:return h=e.sent,e.next=42,this.tokenizer.readToken(p.UINT8);case 42:return k=e.sent,e.next=45,this.tokenizer.readToken(p.UINT32_BE);case 45:return f=e.sent,z("ABSS ".concat(c,":").concat(h,":").concat(k,".").concat(f)),e.abrupt("break",56);case 48:return e.next=50,this.tokenizer.readToken(p.UINT16_BE);case 50:return m=e.sent,z("LSCO lsConfig=".concat(m)),e.abrupt("break",56);case 53:return z("Unknown sound-property-chunk[ID=".concat(n.chunkID,", size=").concat(n.chunkSize,"]")),e.next=56,this.tokenizer.ignore(Number(n.chunkSize));case 56:if(!((l=n.chunkSize-BigInt(this.tokenizer.position-r))>0)){e.next=61;break}return z("After Parsing sound-property-chunk ".concat(n.chunkSize,", remaining ").concat(l," bytes")),e.next=61,this.tokenizer.ignore(Number(l));case 61:t-=BigInt(x.ChunkHeader64.len)+n.chunkSize,z("Parsing sound-property-chunks, remainingSize=".concat(t)),e.next=1;break;case 65:this.metadata.format.lossless&&this.metadata.format.sampleRate&&this.metadata.format.numberOfChannels&&this.metadata.format.bitsPerSample&&(b=this.metadata.format.sampleRate*this.metadata.format.numberOfChannels*this.metadata.format.bitsPerSample,this.metadata.setFormat("bitrate",b));case 66:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleChannelChunks",value:function(){var e=n(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:z("Parsing channel-chunks, remainingSize=".concat(t)),n=[];case 2:if(!(t>=d.FourCcToken.len)){e.next=11;break}return e.next=5,this.tokenizer.readToken(d.FourCcToken);case 5:r=e.sent,z("Channel[ID=".concat(r,"]")),n.push(r),t-=BigInt(d.FourCcToken.len),e.next=2;break;case 11:return z("Channels: ".concat(n.join(", "))),e.abrupt("return",n);case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),a}();exports.DsdiffParser=S;
},{"token-types":"No44","debug":"t61f","strtok3/lib/core":"R0T4","../common/FourCC":"Rl63","../common/BasicParser":"YSvq","../id3v2/ID3v2Parser":"fbDe","./DsdiffToken":"FrB2"}],"iCtK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.elements=void 0;var a=require("./types");exports.elements={440786851:{name:"ebml",container:{17030:{name:"ebmlVersion",value:a.DataType.uint},17143:{name:"ebmlReadVersion",value:a.DataType.uint},17138:{name:"ebmlMaxIDWidth",value:a.DataType.uint},17139:{name:"ebmlMaxSizeWidth",value:a.DataType.uint},17026:{name:"docType",value:a.DataType.string},17031:{name:"docTypeVersion",value:a.DataType.uint},17029:{name:"docTypeReadVersion",value:a.DataType.uint}}},408125543:{name:"segment",container:{290298740:{name:"seekHead",container:{19899:{name:"seek",container:{21419:{name:"seekId",value:a.DataType.binary},21420:{name:"seekPosition",value:a.DataType.uint}}}}},357149030:{name:"info",container:{29604:{name:"uid",value:a.DataType.uid},29572:{name:"filename",value:a.DataType.string},3979555:{name:"prevUID",value:a.DataType.uid},3965867:{name:"prevFilename",value:a.DataType.string},4110627:{name:"nextUID",value:a.DataType.uid},4096955:{name:"nextFilename",value:a.DataType.string},2807729:{name:"timecodeScale",value:a.DataType.uint},17545:{name:"duration",value:a.DataType.float},17505:{name:"dateUTC",value:a.DataType.uint},31657:{name:"title",value:a.DataType.string},19840:{name:"muxingApp",value:a.DataType.string},22337:{name:"writingApp",value:a.DataType.string}}},524531317:{name:"cluster",multiple:!0,container:{231:{name:"timecode",value:a.DataType.uid},163:{name:"unknown",value:a.DataType.binary},167:{name:"position",value:a.DataType.uid},171:{name:"prevSize",value:a.DataType.uid}}},374648427:{name:"tracks",container:{174:{name:"entries",multiple:!0,container:{215:{name:"trackNumber",value:a.DataType.uint},29637:{name:"uid",value:a.DataType.uid},131:{name:"trackType",value:a.DataType.uint},185:{name:"flagEnabled",value:a.DataType.bool},136:{name:"flagDefault",value:a.DataType.bool},21930:{name:"flagForced",value:a.DataType.bool},156:{name:"flagLacing",value:a.DataType.bool},28135:{name:"minCache",value:a.DataType.uint},28136:{name:"maxCache",value:a.DataType.uint},2352003:{name:"defaultDuration",value:a.DataType.uint},2306383:{name:"timecodeScale",value:a.DataType.float},21358:{name:"name",value:a.DataType.string},2274716:{name:"language",value:a.DataType.string},134:{name:"codecID",value:a.DataType.string},25506:{name:"codecPrivate",value:a.DataType.binary},2459272:{name:"codecName",value:a.DataType.string},3839639:{name:"codecSettings",value:a.DataType.string},3883072:{name:"codecInfoUrl",value:a.DataType.string},2536000:{name:"codecDownloadUrl",value:a.DataType.string},170:{name:"codecDecodeAll",value:a.DataType.bool},28587:{name:"trackOverlay",value:a.DataType.uint},224:{name:"video",container:{154:{name:"flagInterlaced",value:a.DataType.bool},21432:{name:"stereoMode",value:a.DataType.uint},176:{name:"pixelWidth",value:a.DataType.uint},186:{name:"pixelHeight",value:a.DataType.uint},21680:{name:"displayWidth",value:a.DataType.uint},21690:{name:"displayHeight",value:a.DataType.uint},21683:{name:"aspectRatioType",value:a.DataType.uint},3061028:{name:"colourSpace",value:a.DataType.uint},3126563:{name:"gammaValue",value:a.DataType.float}}},225:{name:"audio",container:{181:{name:"samplingFrequency",value:a.DataType.float},30901:{name:"outputSamplingFrequency",value:a.DataType.float},159:{name:"channels",value:a.DataType.uint},148:{name:"channels",value:a.DataType.uint},32123:{name:"channelPositions",value:a.DataType.binary},25188:{name:"bitDepth",value:a.DataType.uint}}},28032:{name:"contentEncodings",container:{25152:{name:"contentEncoding",container:{20529:{name:"order",value:a.DataType.uint},20530:{name:"scope",value:a.DataType.bool},20531:{name:"type",value:a.DataType.uint},20532:{name:"contentEncoding",container:{16980:{name:"contentCompAlgo",value:a.DataType.uint},16981:{name:"contentCompSettings",value:a.DataType.binary}}},20533:{name:"contentEncoding",container:{18401:{name:"contentEncAlgo",value:a.DataType.uint},18402:{name:"contentEncKeyID",value:a.DataType.binary},18403:{name:"contentSignature ",value:a.DataType.binary},18404:{name:"ContentSigKeyID  ",value:a.DataType.binary},18405:{name:"contentSigAlgo ",value:a.DataType.uint},18406:{name:"contentSigHashAlgo ",value:a.DataType.uint}}},25188:{name:"bitDepth",value:a.DataType.uint}}}}}}}}},475249515:{name:"cues",container:{187:{name:"cuePoint",container:{179:{name:"cueTime",value:a.DataType.uid},183:{name:"positions",container:{247:{name:"track",value:a.DataType.uint},241:{name:"clusterPosition",value:a.DataType.uint},21368:{name:"blockNumber",value:a.DataType.uint},234:{name:"codecState",value:a.DataType.uint},219:{name:"reference",container:{150:{name:"time",value:a.DataType.uint},151:{name:"cluster",value:a.DataType.uint},21343:{name:"number",value:a.DataType.uint},235:{name:"codecState",value:a.DataType.uint}}},240:{name:"relativePosition",value:a.DataType.uint}}}}}}},423732329:{name:"attachments",container:{24999:{name:"attachedFiles",multiple:!0,container:{18046:{name:"description",value:a.DataType.string},18030:{name:"name",value:a.DataType.string},18016:{name:"mimeType",value:a.DataType.string},18012:{name:"data",value:a.DataType.binary},18094:{name:"uid",value:a.DataType.uid}}}}},272869232:{name:"chapters",container:{17849:{name:"editionEntry",container:{182:{name:"chapterAtom",container:{29636:{name:"uid",value:a.DataType.uid},145:{name:"timeStart",value:a.DataType.uint},146:{name:"timeEnd",value:a.DataType.uid},152:{name:"hidden",value:a.DataType.bool},17816:{name:"enabled",value:a.DataType.uid},143:{name:"track",container:{137:{name:"trackNumber",value:a.DataType.uid},128:{name:"display",container:{133:{name:"string",value:a.DataType.string},17276:{name:"language ",value:a.DataType.string},17278:{name:"country ",value:a.DataType.string}}}}}}}}}}},307544935:{name:"tags",container:{29555:{name:"tag",multiple:!0,container:{25536:{name:"target",container:{25541:{name:"tagTrackUID",value:a.DataType.uid},25540:{name:"tagChapterUID",value:a.DataType.uint},25542:{name:"tagAttachmentUID",value:a.DataType.uid},25546:{name:"targetType",value:a.DataType.string},26826:{name:"targetTypeValue",value:a.DataType.uint},25545:{name:"tagEditionUID",value:a.DataType.uid}}},26568:{name:"simpleTags",multiple:!0,container:{17827:{name:"name",value:a.DataType.string},17543:{name:"string",value:a.DataType.string},17541:{name:"binary",value:a.DataType.binary},17530:{name:"language",value:a.DataType.string},17531:{name:"languageIETF",value:a.DataType.string},17540:{name:"default",value:a.DataType.bool}}}}}}}}}};
},{"./types":"Jv4E"}],"CgXN":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t,r,n,a,i,u){try{var o=e[i](u),c=o.value}catch(s){return void r(s)}o.done?t(c):Promise.resolve(c).then(n,a)}function n(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var u=e.apply(t,n);function o(e){r(u,a,i,o,c,"next",e)}function c(e){r(u,a,i,o,c,"throw",e)}o(void 0)})}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function o(e,t,r){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=c(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=d();return function(){var r,n=h(e);if(t){var a=h(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?m(e):r}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.MatroskaParser=void 0;var g=require("token-types"),y=require("debug"),v=require("../common/BasicParser"),b=require("./types"),k=require("./MatroskaDtd"),x=(0,y.default)("music-metadata:parser:matroska"),w=function(t){s(i,v.BasicParser);var r=p(i);function i(){var e;return a(this,i),(e=r.call(this)).padding=0,e.parserMap=new Map,e.ebmlMaxIDLength=4,e.ebmlMaxSizeLength=8,e.parserMap.set(b.DataType.uint,function(t){return e.readUint(t)}),e.parserMap.set(b.DataType.string,function(t){return e.readString(t)}),e.parserMap.set(b.DataType.binary,function(t){return e.readBuffer(t)}),e.parserMap.set(b.DataType.uid,function(){var t=n(regeneratorRuntime.mark(function t(r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.readUint(r);case 2:return t.t0=t.sent,t.abrupt("return",1===t.t0);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),e.parserMap.set(b.DataType.bool,function(t){return e.readFlag(t)}),e.parserMap.set(b.DataType.float,function(t){return e.readFloat(t)}),e}return u(i,[{key:"init",value:function(e,t,r){return o(h(i.prototype),"init",this).call(this,e,t,r),this}},{key:"parse",value:function(){var e=n(regeneratorRuntime.mark(function e(){var t,r,n,a,i,u,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.parseContainer(k.elements,this.tokenizer.fileInfo.size,[]);case 2:t=e.sent,this.metadata.setFormat("container","EBML/".concat(t.ebml.docType)),t.segment&&((r=t.segment.info)&&(n=r.timecodeScale?r.timecodeScale:1e6,a=r.duration*n/1e9,this.addTag("segment:title",r.title),this.metadata.setFormat("duration",a)),(i=t.segment.tracks)&&i.entries&&(i.entries.forEach(function(e){var t={codecName:e.codecID.replace("A_","").replace("V_",""),codecSettings:e.codecSettings,flagDefault:e.flagDefault,flagLacing:e.flagLacing,flagEnabled:e.flagEnabled,language:e.language,name:e.name,type:e.trackType,audio:e.audio,video:e.video};o.metadata.addStreamInfo(t)}),(u=i.entries.filter(function(e){return e.trackType===b.TrackType.audio.valueOf()}).reduce(function(e,t){return e?!e.flagDefault&&t.flagDefault?t:t.trackNumber&&t.trackNumber<e.trackNumber?t:e:t},null))&&(this.metadata.setFormat("codec",u.codecID.replace("A_","")),this.metadata.setFormat("sampleRate",u.audio.samplingFrequency),this.metadata.setFormat("numberOfChannels",u.audio.channels)),t.segment.tags&&t.segment.tags.tag.forEach(function(e){var t=e.target,r=(null==t?void 0:t.targetTypeValue)?b.TargetType[t.targetTypeValue]:(null==t?void 0:t.targetType)?t.targetType:"track";e.simpleTags.forEach(function(e){var t=e.string?e.string:e.binary;o.addTag("".concat(r,":").concat(e.name),t)})}),t.segment.attachments&&t.segment.attachments.attachedFiles.filter(function(e){return e.mimeType.startsWith("image/")}).map(function(e){return{data:e.data,format:e.mimeType,description:e.description,name:e.name}}).forEach(function(e){o.addTag("picture",e)})));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"parseContainer",value:function(){var e=n(regeneratorRuntime.mark(function e(t,r,n){var a,i,u,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a={};case 1:if(!(this.tokenizer.position<r)){e.next=42;break}return i=void 0,e.prev=3,e.next=6,this.readElement();case 6:i=e.sent,e.next=14;break;case 9:if(e.prev=9,e.t0=e.catch(3),"End-Of-Stream"!==e.t0.message){e.next=13;break}return e.abrupt("break",42);case 13:throw e.t0;case 14:if(!(u=t[i.id])){e.next=29;break}if(x("Element: name=".concat(u.name,", container=").concat(!!u.container)),!u.container){e.next=24;break}return e.next=20,this.parseContainer(u.container,i.len>=0?this.tokenizer.position+i.len:-1,n.concat([u.name]));case 20:o=e.sent,u.multiple?(a[u.name]||(a[u.name]=[]),a[u.name].push(o)):a[u.name]=o,e.next=27;break;case 24:return e.next=26,this.parserMap.get(u.value)(i);case 26:a[u.name]=e.sent;case 27:e.next=40;break;case 29:e.t1=i.id,e.next=236===e.t1?32:36;break;case 32:return this.padding+=i.len,e.next=35,this.tokenizer.ignore(i.len);case 35:return e.abrupt("break",40);case 36:return x("parseEbml: path=".concat(n.join("/"),", unknown element: id=").concat(i.id.toString(16))),this.padding+=i.len,e.next=40,this.tokenizer.ignore(i.len);case 40:e.next=1;break;case 42:return e.abrupt("return",a);case 43:case"end":return e.stop()}},e,this,[[3,9]])}));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"readVintData",value:function(){var t=n(regeneratorRuntime.mark(function t(r){var n,a,i,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.tokenizer.peekNumber(g.UINT8);case 2:n=t.sent,a=128,i=1;case 5:if(0!=(n&a)){t.next=12;break}if(!(i>r)){t.next=8;break}throw new Error("VINT value exceeding maximum size");case 8:++i,a>>=1,t.next=5;break;case 12:return u=e.alloc(i),t.next=15,this.tokenizer.readBuffer(u);case 15:return t.abrupt("return",u);case 16:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"readElement",value:function(){var e=n(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.readVintData(this.ebmlMaxIDLength);case 2:return t=e.sent,e.next=5,this.readVintData(this.ebmlMaxSizeLength);case 5:return(r=e.sent)[0]^=128>>r.length-1,n=Math.min(6,r.length),e.abrupt("return",{id:t.readUIntBE(0,t.length),len:r.readUIntBE(r.length-n,n)});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"isMaxValue",value:function(e){if(e.length===this.ebmlMaxSizeLength){for(var t=1;t<this.ebmlMaxSizeLength;++t)if(255!==e[t])return!1;return!0}return!1}},{key:"readFloat",value:function(){var e=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.len,e.next=0===e.t0?3:4===e.t0?4:8===e.t0?5:10===e.t0?6:7;break;case 3:return e.abrupt("return",0);case 4:return e.abrupt("return",this.tokenizer.readNumber(g.Float32_BE));case 5:case 6:return e.abrupt("return",this.tokenizer.readNumber(g.Float64_BE));case 7:throw new Error("Invalid IEEE-754 float length: ".concat(t.len));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"readFlag",value:function(){var e=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.readUint(t);case 2:return e.t0=e.sent,e.abrupt("return",1===e.t0);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"readUint",value:function(){var e=n(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.readBuffer(t);case 2:return r=e.sent,n=Math.min(6,t.len),e.abrupt("return",r.readUIntBE(t.len-n,n));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"readString",value:function(){var e=n(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenizer.readToken(new g.StringType(t.len,"utf-8"));case 2:return r=e.sent,e.abrupt("return",r.replace(/\00.*$/g,""));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"readBuffer",value:function(){var t=n(regeneratorRuntime.mark(function t(r){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.alloc(r.len),t.next=3,this.tokenizer.readBuffer(n);case 3:return t.abrupt("return",n);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"addTag",value:function(e,t){this.metadata.addTag("matroska",e,t)}}]),i}();exports.MatroskaParser=w;
},{"token-types":"No44","debug":"t61f","../common/BasicParser":"YSvq","./types":"Jv4E","./MatroskaDtd":"iCtK","buffer":"fe91"}],"xBbI":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function r(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function a(e,r){for(var a=0;a<r.length;a++){var t=r[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function t(e,r,t){return r&&a(e.prototype,r),t&&a(e,t),e}function n(e,r,a,t,n,s,u){try{var c=e[s](u),o=c.value}catch(i){return void a(i)}c.done?r(o):Promise.resolve(o).then(t,n)}function s(e){return function(){var r=this,a=arguments;return new Promise(function(t,s){var u=e.apply(r,a);function c(e){n(u,t,s,c,o,"next",e)}function o(e){n(u,t,s,c,o,"throw",e)}c(void 0)})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ParserFactory=exports.parseHttpContentType=void 0;var u=require("file-type/core"),c=require("content-type"),o=require("media-typer"),i=require("debug"),p=require("./common/MetadataCollector"),f=require("./aiff/AiffParser"),m=require("./apev2/APEv2Parser"),v=require("./asf/AsfParser"),d=require("./flac/FlacParser"),w=require("./mp4/MP4Parser"),l=require("./mpeg/MpegParser"),g=require("./musepack"),y=require("./ogg/OggParser"),k=require("./wav/WaveParser"),P=require("./wavpack/WavPackParser"),b=require("./dsf/DsfParser"),x=require("./dsdiff/DsdiffParser"),h=require("./matroska/MatroskaParser"),q=(0,i.default)("music-metadata:parser:factory");function M(e){var r=c.parse(e),a=o.parse(r.type);return{type:a.type,subtype:a.subtype,suffix:a.suffix,parameters:r.parameters}}function I(e,r){return E.apply(this,arguments)}function E(){return(E=s(regeneratorRuntime.mark(function e(r,a){var t,n,s,u=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>2&&void 0!==u[2]?u[2]:{},e.next=3,F.loadParser(a);case 3:return n=e.sent,s=new p.MetadataCollector(t),e.next=7,n.init(s,r,t).parse();case 7:return e.abrupt("return",s.toCommonMetadata());case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}exports.parseHttpContentType=M;var F=function(){function a(){r(this,a)}return t(a,null,[{key:"parseOnContentType",value:function(){var e=s(regeneratorRuntime.mark(function e(r,t){var n,s,u,c,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.fileInfo;case 2:return n=e.sent,s=n.mimeType,u=n.path,c=n.url,(o=a.getParserIdForMimeType(s)||a.getParserIdForExtension(u)||a.getParserIdForExtension(c))||q("No parser found for MIME-type / extension: "+s),e.abrupt("return",this.parse(r,o,t));case 9:case"end":return e.stop()}},e,this)}));return function(r,a){return e.apply(this,arguments)}}()},{key:"parse",value:function(){var r=s(regeneratorRuntime.mark(function r(t,n,s){var c,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n){r.next=16;break}return q("Guess parser on content..."),c=e.alloc(4100),r.next=5,t.peekBuffer(c,{mayBeLess:!0});case 5:if(t.fileInfo.path&&(n=this.getParserIdForExtension(t.fileInfo.path)),n){r.next=16;break}return r.next=9,u.fromBuffer(c);case 9:if(o=r.sent){r.next=12;break}throw new Error("Failed to determine audio format");case 12:if(q("Guessed file type is mime=".concat(o.mime,", extension=").concat(o.ext)),n=a.getParserIdForMimeType(o.mime)){r.next=16;break}throw new Error("Guessed MIME-type not supported: "+o.mime);case 16:return r.abrupt("return",I(t,n,s));case 17:case"end":return r.stop()}},r,this)}));return function(e,a,t){return r.apply(this,arguments)}}()},{key:"getParserIdForExtension",value:function(e){if(e)switch(this.getExtension(e).toLocaleLowerCase()||e){case".mp2":case".mp3":case".m2a":case".aac":return"mpeg";case".ape":return"apev2";case".mp4":case".m4a":case".m4b":case".m4pa":case".m4v":case".m4r":case".3gp":return"mp4";case".wma":case".wmv":case".asf":return"asf";case".flac":return"flac";case".ogg":case".ogv":case".oga":case".ogm":case".ogx":case".opus":case".spx":return"ogg";case".aif":case".aiff":case".aifc":return"aiff";case".wav":case".bwf":return"riff";case".wv":case".wvp":return"wavpack";case".mpc":return"musepack";case".dsf":return"dsf";case".dff":return"dsdiff";case".mka":case".mkv":case".mk3d":case".mks":case".webm":return"matroska"}}},{key:"loadParser",value:function(){var e=s(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=r,e.next="aiff"===e.t0?3:"adts"===e.t0?4:"mpeg"===e.t0?4:"apev2"===e.t0?5:"asf"===e.t0?6:"dsf"===e.t0?7:"dsdiff"===e.t0?8:"flac"===e.t0?9:"mp4"===e.t0?10:"musepack"===e.t0?11:"ogg"===e.t0?12:"riff"===e.t0?13:"wavpack"===e.t0?14:"matroska"===e.t0?15:16;break;case 3:return e.abrupt("return",new f.AIFFParser);case 4:return e.abrupt("return",new l.MpegParser);case 5:return e.abrupt("return",new m.APEv2Parser);case 6:return e.abrupt("return",new v.AsfParser);case 7:return e.abrupt("return",new b.DsfParser);case 8:return e.abrupt("return",new x.DsdiffParser);case 9:return e.abrupt("return",new d.FlacParser);case 10:return e.abrupt("return",new w.MP4Parser);case 11:return e.abrupt("return",new g.default);case 12:return e.abrupt("return",new y.OggParser);case 13:return e.abrupt("return",new k.WaveParser);case 14:return e.abrupt("return",new P.WavPackParser);case 15:return e.abrupt("return",new h.MatroskaParser);case 16:throw new Error("Unknown parser type: ".concat(r));case 17:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}()},{key:"getExtension",value:function(e){var r=e.lastIndexOf(".");return-1===r?"":e.slice(r)}},{key:"getParserIdForMimeType",value:function(e){var r;try{r=M(e)}catch(t){return void q("Invalid HTTP Content-Type header value: ".concat(e))}var a=0===r.subtype.indexOf("x-")?r.subtype.substring(2):r.subtype;switch(r.type){case"audio":switch(a){case"mp3":case"mpeg":return"mpeg";case"aac":case"aacp":return"adts";case"flac":return"flac";case"ape":case"monkeys-audio":return"apev2";case"mp4":case"m4a":return"mp4";case"ogg":case"opus":case"speex":return"ogg";case"ms-wma":case"ms-wmv":case"ms-asf":return"asf";case"aiff":case"aif":case"aifc":return"aiff";case"vnd.wave":case"wav":case"wave":return"riff";case"wavpack":return"wavpack";case"musepack":return"musepack";case"matroska":case"webm":return"matroska";case"dsf":return"dsf"}break;case"video":switch(a){case"ms-asf":case"ms-wmv":return"asf";case"m4v":case"mp4":return"mp4";case"ogg":return"ogg";case"matroska":case"webm":return"matroska"}break;case"application":switch(a){case"vnd.ms-asf":return"asf";case"ogg":return"ogg"}}}}]),a}();exports.ParserFactory=F;
},{"file-type/core":"fUph","content-type":"U2cM","media-typer":"hVwv","debug":"t61f","./common/MetadataCollector":"G1Zt","./aiff/AiffParser":"cA0w","./apev2/APEv2Parser":"GhZC","./asf/AsfParser":"JodZ","./flac/FlacParser":"OrN4","./mp4/MP4Parser":"IoaY","./mpeg/MpegParser":"QcJg","./musepack":"YrLg","./ogg/OggParser":"O3gk","./wav/WaveParser":"c0jC","./wavpack/WavPackParser":"hYXK","./dsf/DsfParser":"seRs","./dsdiff/DsdiffParser":"Sk3L","./matroska/MatroskaParser":"CgXN","buffer":"fe91"}],"vlys":[function(require,module,exports) {
"use strict";function r(r,e,n,t,a,i,o){try{var u=r[i](o),c=u.value}catch(s){return void n(s)}u.done?e(c):Promise.resolve(c).then(t,a)}function e(e){return function(){var n=this,t=arguments;return new Promise(function(a,i){var o=e.apply(n,t);function u(e){r(o,a,i,u,c,"next",e)}function c(e){r(o,a,i,u,c,"throw",e)}u(void 0)})}}function n(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function t(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function a(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.RandomUint8ArrayReader=void 0;var i=function(){function r(e){n(this,r),this.uint8Array=e,this.fileSize=e.length}return a(r,[{key:"randomRead",value:function(){var r=e(regeneratorRuntime.mark(function r(e,n,t,a){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e.set(this.uint8Array.subarray(a,a+t),n),r.abrupt("return",t);case 2:case"end":return r.stop()}},r,this)}));return function(e,n,t,a){return r.apply(this,arguments)}}()}]),r}();exports.RandomUint8ArrayReader=i;
},{}],"q7US":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function r(e,r,t,n,a,u,i){try{var o=e[u](i),s=o.value}catch(c){return void t(c)}o.done?r(s):Promise.resolve(s).then(n,a)}function t(e){return function(){var t=this,n=arguments;return new Promise(function(a,u){var i=e.apply(t,n);function o(e){r(i,a,u,o,s,"next",e)}function s(e){r(i,a,u,o,s,"throw",e)}o(void 0)})}}function n(e){return a.apply(this,arguments)}function a(){return(a=t(regeneratorRuntime.mark(function r(t){var n,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(t.fileSize>=143)){r.next=8;break}return n=e.alloc(15),r.next=4,t.randomRead(n,0,n.length,t.fileSize-143);case 4:if(a=n.toString("binary"),a.substr(6)!==exports.endTag2){r.next=8;break}return r.abrupt("return",parseInt(a.substr(0,6),10)+15);case 8:return r.abrupt("return",0);case 9:case"end":return r.stop()}},r)}))).apply(this,arguments)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLyricsHeaderLength=exports.endTag2=void 0,exports.endTag2="LYRICS200",exports.getLyricsHeaderLength=n;
},{"buffer":"fe91"}],"rTLS":[function(require,module,exports) {
"use strict";function r(r,t){var n="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!n){if(Array.isArray(r)||(n=e(r))||t&&r&&"number"==typeof r.length){n&&(r=n);var o=0,a=function(){};return{s:a,n:function(){return o>=r.length?{done:!0}:{done:!1,value:r[o++]}},e:function(r){throw r},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,s=!1;return{s:function(){n=n.call(r)},n:function(){var r=n.next();return u=r.done,r},e:function(r){s=!0,i=r},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw i}}}}function e(r,e){if(r){if("string"==typeof r)return t(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(r,e):void 0}}function t(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function n(r,e,t,n,o,a,i){try{var u=r[a](i),s=u.value}catch(c){return void t(c)}u.done?e(s):Promise.resolve(s).then(n,o)}function o(r){return function(){var e=this,t=arguments;return new Promise(function(o,a){var i=r.apply(e,t);function u(r){n(i,o,a,u,s,"next",r)}function s(r){n(i,o,a,u,s,"throw",r)}u(void 0)})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.scanAppendingHeaders=exports.selectCover=exports.ratingToStars=exports.orderTags=exports.parseFromTokenizer=exports.parseBuffer=exports.parseStream=void 0;var a=require("strtok3/lib/core"),i=require("./ParserFactory"),u=require("./common/RandomUint8ArrayReader"),s=require("./apev2/APEv2Parser"),c=require("./id3v1/ID3v1Parser"),f=require("./lyrics3/Lyrics3");function p(r,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return d(a.fromStream(r,"string"==typeof e?{mimeType:e}:e),t)}function l(r,e){return v.apply(this,arguments)}function v(){return(v=o(regeneratorRuntime.mark(function r(e,t){var n,o,i,s=arguments;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:{},o=new u.RandomUint8ArrayReader(e),r.next=4,g(o,n);case 4:return i=a.fromBuffer(e,"string"==typeof t?{mimeType:t}:t),r.abrupt("return",d(i,n));case 6:case"end":return r.stop()}},r)}))).apply(this,arguments)}function d(r,e){return i.ParserFactory.parseOnContentType(r,e)}function y(e){var t,n={},o=r(e);try{for(o.s();!(t=o.n()).done;){var a=t.value;(n[a.id]=n[a.id]||[]).push(a.value)}}catch(i){o.e(i)}finally{o.f()}return n}function m(r){return void 0===r?0:1+Math.round(4*r)}function h(r){return r?r.reduce(function(r,e){return e.name&&e.name.toLowerCase()in["front","cover","cover (front)"]?e:r}):null}function g(r){return x.apply(this,arguments)}function x(){return(x=o(regeneratorRuntime.mark(function r(e){var t,n,o,a=arguments;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=a.length>1&&void 0!==a[1]?a[1]:{},n=e.fileSize,r.next=4,(0,c.hasID3v1Header)(e);case 4:if(!r.sent){r.next=10;break}return n-=128,r.next=8,(0,f.getLyricsHeaderLength)(e);case 8:o=r.sent,n-=o;case 10:return r.next=12,s.APEv2Parser.findApeFooterOffset(e,n);case 12:t.apeHeader=r.sent;case 13:case"end":return r.stop()}},r)}))).apply(this,arguments)}exports.parseStream=p,exports.parseBuffer=l,exports.parseFromTokenizer=d,exports.orderTags=y,exports.ratingToStars=m,exports.selectCover=h,exports.scanAppendingHeaders=g;
},{"strtok3/lib/core":"R0T4","./ParserFactory":"xBbI","./common/RandomUint8ArrayReader":"vlys","./apev2/APEv2Parser":"GhZC","./id3v1/ID3v1Parser":"VHOF","./lyrics3/Lyrics3":"q7US"}],"QyKk":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.AudioFileParser=void 0;var r=n(require("music-metadata/lib/core"));function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:r})(e)}function n(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=t(r);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(a,i,u):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}function a(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=o(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return u=e.done,e},e:function(e){c=!0,i=e},f:function(){try{u||null==t.return||t.return()}finally{if(c)throw i}}}}function o(e,r){if(e){if("string"==typeof e)return i(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,r):void 0}}function i(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function u(e,r,t,n,a,o,i){try{var u=e[o](i),c=u.value}catch(s){return void t(s)}u.done?r(c):Promise.resolve(c).then(n,a)}function c(e){return function(){var r=this,t=arguments;return new Promise(function(n,a){var o=e.apply(r,t);function i(e){u(o,n,a,i,c,"next",e)}function c(e){u(o,n,a,i,c,"throw",e)}i(void 0)})}}function s(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function l(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var f=function e(){s(this,e)};exports.AudioFileParser=f,l(f,"parseAudioMeta",function(){var t=c(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=r,t.t1=e,t.next=4,n.arrayBuffer();case 4:return t.t2=t.sent,t.t3=t.t1.from.call(t.t1,t.t2),t.next=8,t.t0.parseBuffer.call(t.t0,t.t3);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),l(f,"parseAudioFile",function(){var e=c(regeneratorRuntime.mark(function e(r){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,f.parseAudioMeta(r);case 3:return n=e.sent,t.title=(n.common.title||r.name.split(".mp3")[0]).replace(/(?:downloadming|mahamp3)\.?[\w]*/gim,"Audiofy"),t.duration=n.format.duration,t.year=n.common.year||"NOT AVAILABLE",t.album=(n.common.album||"NOT AVAILABLE").replace(/(?:downloadming|mahamp3)\.?[\w]*/gim,""),t.artists=(n.common.artist||"NOT AVAILABLE").replace(/(?:downloadming|mahamp3)\.?[\w]*/gim,""),t.genre=void 0!==n.common.genre?n.common.genre.toString().replace(/(?:downloadming|mahamp3)\.?[\w]*/gim,"Bollywood"):"Bollywood",(n.common.picture||n.common.picture.length>0)&&(t.cover=n.common.picture[0].data),t.sourceFile=r,e.abrupt("return",t);case 14:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}()),l(f,"parseAllAudioFiles",function(){var e=c(regeneratorRuntime.mark(function e(r){var t,n,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=a(r),e.prev=2,n.s();case 4:if((o=n.n()).done){e.next=13;break}return i=o.value,e.t0=t,e.next=9,f.parseAudioFile(i);case 9:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 11:e.next=4;break;case 13:e.next=18;break;case 15:e.prev=15,e.t2=e.catch(2),n.e(e.t2);case 18:return e.prev=18,n.f(),e.finish(18);case 21:return e.abrupt("return",t);case 22:case"end":return e.stop()}},e,null,[[2,15,18,21]])}));return function(r){return e.apply(this,arguments)}}()),l(f,"filterFiles",function(e){for(var r=[],t=0;t<e.length;t++)if(e[t]){var n={};n.name=e[t].album,n.year=e[t].year,n.genre=e[t].genre,n.cover=e[t].cover,n.contributingArtists=[],n.tracks=[],n.tracks.push({title:e[t].title,duration:e[t].duration,artists:e[t].artists,sourceFile:e[t].sourceFile}),n.contributingArtists.push(e[t].artists);for(var a=t+1;a<e.length;a++)e[a]&&e[t].album===e[a].album&&(n.tracks.push({title:e[a].title,duration:e[a].duration,artists:e[a].artists,sourceFile:e[a].sourceFile}),n.contributingArtists.push(e[a].artists),e[a]=void 0);r.push(n)}return r});
},{"music-metadata/lib/core":"rTLS","buffer":"fe91"}],"tbdy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Views=void 0;var n=require("./utils");function t(n,t){return c(n)||i(n,t)||e(n,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function e(n,t){if(n){if("string"==typeof n)return r(n,t);var a=Object.prototype.toString.call(n).slice(8,-1);return"Object"===a&&n.constructor&&(a=n.constructor.name),"Map"===a||"Set"===a?Array.from(n):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?r(n,t):void 0}}function r(n,t){(null==t||t>n.length)&&(t=n.length);for(var a=0,e=new Array(t);a<t;a++)e[a]=n[a];return e}function i(n,t){var a=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=a){var e,r,i=[],c=!0,l=!1;try{for(a=a.call(n);!(c=(e=a.next()).done)&&(i.push(e.value),!t||i.length!==t);c=!0);}catch(s){l=!0,r=s}finally{try{c||null==a.return||a.return()}finally{if(l)throw r}}return i}}function c(n){if(Array.isArray(n))return n}function l(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function s(n,t){for(var a=0;a<t.length;a++){var e=t[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function o(n,t,a){return t&&s(n.prototype,t),a&&s(n,a),n}function d(n,t,a){return t in n?Object.defineProperty(n,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[t]=a,n}var u=function(){function t(){l(this,t)}return o(t,null,[{key:"renderTrackListItemView",value:function(t,a){return"<a style='cursor: pointer' class='list-group-item list-group-item-action ".concat(a?"active":""," trackItem' data-uid='").concat(t._id,"'>\n                    <div class='d-flex w-100 justify-content-between'>\n                        <div>\n                            <p class='mb-1'><strong>").concat(t.title,"</strong></p>\n                            <p class='mb-1'>").concat(t.artists,"</p>\n                            <small>").concat(n.Utils.parseDuration(t.duration),"</small>\n                        </div>\n                        <button class='btn btn-transparent align-self-center optionsBtn'><i class='fas fa-ellipsis-v'></i></button>\n                    </div>   \n                </a>")}},{key:"renderTrackListView",value:function(n){return"<div class='row cc-animation-slideIn-1x tracksView mb-4'>\n                    <div class='col-12'>\n                        <button class='btn btn-transparent text-light mb-2' id='tracksViewBackBtn'>\n                            <i class='fas fa-chevron-left'></i> Back\n                        </button>\n                    </div>\n                    <div class='col-12 col-sm-6 col-md-4'>\n                        <div class='card text-center cc-rounded'>\n                            <div class='card-body text-secondary'>\n                                <img src='".concat(n.cover,"' alt='").concat(n.name,"-cover' class='cc-rounded' style='max-width: 100%;'>\n                                <h5 class='card-title mt-3 mb-1'>").concat(n.name,"</h5>\n                                <p class='card-text mb-1'>").concat(n.genre,"</p>\n                                <p class='card-text mb-0'>").concat(n.year,"</p>\n                            </div>\n                        </div>\n                    </div>\n                    <div class='col-12 col-sm-6 mt-3 mt-sm-0'>\n                         <div class=\"list-group cc-rounded\">\n                            ").concat(n.tracks.map(function(n){return t.renderTrackListItemView(n)}).join(""),"\n                        </div>\n                    </div>\n                </div>")}},{key:"renderPlayerView",value:function(t,a,e,r){return'<div class="playerView cc-animation-slideUp-1x">\n                    <div class="playerView__info">\n                        <div class="playerView__info-thumbnail">\n                            <img src="'.concat(t,'" alt="').concat(a,'-cover" id="playerView__info-thumbnail-pic">\n                            <div class="img-backdrop">\n                                <div class="spinner-border text-primary" role="status">\n                                    <span class="sr-only">Loading...</span>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="playerView__infometa ml-3 text-secondary">\n                            <p class="mb-0"><strong id="playerView__infometa-title">').concat(n.Utils.formatTrackTitleString(e),'</strong></p>\n                            <p class="small mb-0" id="playerView__infometa-artist">').concat(n.Utils.formatArtistString(r),'</p>\n                        </div>\n                    </div>\n                    <div class="playerView__content text-center">\n                        <div class="btn-group" role="group">\n                            <button type="button" class="btn btn-transparent"><i id="prevTrackBtn" class="fas fa-step-backward"></i></button>\n                            <button type="button" class="btn btn-transparent"><i id="playPauseBtn" class="fas fa-play"></i></button>\n                            <button type="button" class="btn btn-transparent"><i id="nextTrackBtn" class="fas fa-step-forward"></i></button>\n                            <button type="button" class="btn btn-transparent"><i id="likeSongBtn" class="far fa-heart"></i></button>\n                        </div>\n                        <div class="playerView__content-seekbarView text-dark d-flex">\n                            <span class="small mr-2" id="curTimeView">00:00</span>\n                            <input type="range" class="form-range" id="seekbar">\n                            <span class="small ml-2" id="totalTimeView">00:00</span>\n                        </div>\n                    </div>\n                </div>')}}]),t}();exports.Views=u,d(u,"activePage",void 0),d(u,"activeTrack",0),d(u,"renderHeadingView",function(n){return"<div class='row'>\n                    <div class='col-12'>\n                        <h5 class='display-4 mb-2 ml-2'>".concat(n,"</h5>\n                        <hr class='bg-light mt-0 mb-4'>\n                    </div>\n                </div>")}),d(u,"renderAlbumCardView",function(n){return"<a href='#' class='list-group-item list-group-item-action albumItem' data-uid='".concat(n._id,"'>\n                    <div class='d-flex w-100 justify-content-start'>\n                        <img class='mr-3 align-self-center' src='").concat(n.cover,"' alt='").concat(n.name,"-cover' style='max-width: 60px; max-height: 60px'>\n                        <div>\n                            <h5 class='card-title mb-1'>").concat(n.name,"</h5>\n                            <p class='mb-0'>").concat(n.year," | ").concat(n.tracks.length," Songs</p>\n                            <p class='mb-0'>").concat(n.genre,"</p>\n                        </div>\n                    </div>\n                </a>")}),d(u,"renderAlbumView",function(n){if(0===n.length)return u.renderNoContentView();var t="<div class='list-group mb-4 albumsView cc-animation-slideIn-1x'>";return n.forEach(function(n){t+=u.renderAlbumCardView(n)}),t+="</div>"}),d(u,"renderNoContentView",function(){return"<div class='row pl-1 pr-1 pl-md-3 pr-md-3 cc-animation-slideIn-1x'>\n                    <div class='col-12 text-center'>\n                        <i class='fas fa-sad-tear fa-4x mb-1'></i>\n                        <p class='display-4'> Nothing Found! </p>\n                    </div>\n                </div>"}),d(u,"renderPaginationEl",function(n,t){return"<li class='page-item c-link".concat(t?" active":"","' id='").concat(n,"'>\n                    <a class='page-link' tabindex='-1'>").concat(n,"</a>\n                </li>")}),d(u,"renderPaginationGroup",function(n,t,a){for(var e="",r=t;r<=a;r++)e+=r===n?u.renderPaginationEl(r,!0):u.renderPaginationEl(r,!1);return e}),d(u,"renderPaginationView",function(a,e){var r="";if(a%5==1)r+=u.renderPaginationGroup(a,a,Math.min(a+4,e));else{var i=t(n.Utils.getPaginationRange(a),2),c=i[0],l=i[1];r+=u.renderPaginationGroup(a,c,Math.min(l,e))}return"<nav>\n                    <ul class='pagination pagination-sm justify-content-center pagination__main'>\n                        <li class='page-item".concat(1===a?" disabled":" c-link","' id='prev'>\n                            <a class='page-link' tabindex='-1'>Previous</a>\n                        </li>\n                        ").concat(r,"\n                        <li class='page-item").concat(a===e?" disabled":" c-link","' id='next'>\n                            <a class='page-link' tabindex='-1'>Next</a>\n                        </li>\n                    </ul>\n                </nav>")}),d(u,"renderSearchBarView",function(){return"<div class='row mb-3 cc-animation-slideIn-1x'>\n                    <div class='col-12'>\n                        <div class='input-group'>\n                            <input class='form-control no-inset-outline' type='text' placeholder='Search' id='main__search-input'>\n                            <div class='input-group-append'>\n                                <select class='form-control c-form-control no-inset-outline' id='main__search-select'>\n                                    <option value='0'>By Album</option>\n                                    <option value='1'>By Artist</option>\n                                    <option value='2'>By Year</option>\n                                </select>\n                                <button class='btn btn-primary text-light main__search-btn type='button'>\n                                    <span class='fas fa-search'></span>\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>"}),d(u,"renderAlbumSearchView",function(n){return"<div id='searchView'>\n                    <div class='row".concat(0===n.length?" mb-5":"","'>\n                        <div class='col-12'>\n                            <button class='btn btn-transparent text-light mb-2' id='searchViewBackBtn'>\n                                <i class='fas fa-chevron-left'></i> Albums\n                            </button>\n                        </div>\n                    </div>\n                    ").concat(0===n.length?u.renderNoContentView():u.renderAlbumView(n),"\n                </div>")}),d(u,"renderUploadTrackView",function(n){return n.map(function(n,t){return'<div class="form-group">\n                                <label for="trackDetails">Track #'.concat(t+1,'</label>\n                                <div id="trackDetails">\n                                    <input type="text" class="form-control r-bl-0 r-br-0 bb-0 trackTitleInput" value="').concat(n.title,'" required>\n                                    <input type="text" class="form-control r-tl-0 r-tr-0 trackArtistsInput" value="').concat(n.artists,'" required>\n                                </div>\n                            </div>')}).join("")}),d(u,"renderUploadAlbumView",function(n){return'<div class=\'col-12 col-md-6 col-lg-4\'>\n                    <div class="card mb-2">\n                        <div class="card-body">\n                            <form class="text-dark">\n                                <img id="albumUpload__cover" class="img-thumbnail bb-0 r-bl-0 r-br-0" src="data:image/jpg;base64,'.concat(n.cover.toString("base64"),'" alt="').concat(n.name,'-cover">\n                                <div class="custom-file mb-3">\n                                    <input type="file" class="custom-file-input" id="albumCoverSelector" accept=\'image/*\'>\n                                    <label class="custom-file-label r-tl-0 r-tr-0" for="albumCoverSelector">Choose album cover</label>\n                                </div>\n                                <div class="form-group">\n                                    <label for="albumName">Name: </label>\n                                    <input type="text" class="form-control" id="albumName" value="').concat(n.name,'" required>\n                                </div>\n                                <div class="form-group">\n                                    <label for="albumGenre">Genre: </label>\n                                    <input type="text" class="form-control" id="albumGenre" value="').concat(n.genre,'" required>\n                                </div>\n                                <div class="form-group">\n                                    <label for="albumYear">Released In: </label>\n                                    <input type="text" class="form-control" id="albumYear" value="').concat(n.year,'" required>\n                                </div>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n                <div class="col-12 col-md-6 col-lg-4 mt-2 mt-md-0">\n                    <div class="card">\n                        <div class="card-body">\n                            <form class="text-dark">\n                                ').concat(u.renderUploadTrackView(n.tracks),'\n                                <input class="btn btn-primary btn-sm btn-block mt-3 form__upload-final--btn bg-primary" type="button" value="Upload"> \n                                <input class="btn btn-primary btn-sm btn-block mt-2 form__upload-cancel--btn bg-primary" type="button" value="Cancel">\n                            </form>\n                        </div>\n                    </div>\n                </div>')});
},{"./utils":"FOZT"}],"EYbI":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Strings=void 0;var a=function t(){e(this,t)};exports.Strings=a,t(a,"multipleSelectInputStr","You can also upload multiple albums at once. Now since Javascript\n        doesn't allow to select folders simply select all the tracks of all \n        the albums that you want to upload, system will automatically filter \n        all the albums and upload it at once. Please note that you cannot change \n        the metadata of the files in case of multiple uploads."),t(a,"singleSelectInputStr","\n        Select all the audio files that belong to the album and press next to \n        move to the next step where you can change all of its metadata if necessary \n        and then click upload to upload the album. You can cancel the process by \n        clicking on the cancel button.");
},{}],"sfHE":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer,r=require("./api"),t=require("./utils"),n=require("./loader"),a=require("./alert"),o=require("./progressBar"),c=require("./audioFileParser"),s=require("./views"),l=require("./strings");function u(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=i(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return c=e.done,e},e:function(e){s=!0,o=e},f:function(){try{c||null==t.return||t.return()}finally{if(s)throw o}}}}function i(e,r){if(e){if("string"==typeof e)return d(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?d(e,r):void 0}}function d(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function f(e,r,t,n,a,o,c){try{var s=e[o](c),l=s.value}catch(u){return void t(u)}s.done?r(l):Promise.resolve(l).then(n,a)}function m(e){return function(){var r=this,t=arguments;return new Promise(function(n,a){var o=e.apply(r,t);function c(e){f(o,n,a,c,s,"next",e)}function s(e){f(o,n,a,c,s,"throw",e)}c(void 0)})}}var p=document.querySelector(".sidebar__main--toggler > i"),g=document.querySelector(".sidebar__main"),v=document.querySelector(".sidebar__main--text"),h=document.querySelector(".content__main"),b=document.querySelector(".form__upload-btn"),y=document.querySelector("#fileSelector"),A=document.querySelector(".album__info"),S=document.querySelector("#fileSelectOne"),L=document.querySelector("#fileSelectMultiple"),x=function(){return location.assign("/admin")},q=function(e){A.innerHTML="",y.value="",n.Loader.hideLoader(),a.Alert.showAlert("error",e.message),console.log(e)},w=function(e){y.value="",hideProgress(),showAlert("error",e.message),console.log(e)},_=function(){var r=m(regeneratorRuntime.mark(function r(t){var n,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t.preventDefault(),t.target.files&&0!==t.target.files.length){r.next=3;break}return r.abrupt("return");case 3:return r.t0=e,r.next=6,t.target.files[0].arrayBuffer();case 6:r.t1=r.sent,n=r.t0.from.call(r.t0,r.t1).toString("base64"),a="data:image/jpg;base64,".concat(n),document.querySelector("#albumUpload__cover").setAttribute("src",a);case 10:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}(),k=function(){var e,r=u(Array.from(document.querySelectorAll("input[type='text']")).map(function(e){return""===e.value}));try{for(r.s();!(e=r.n()).done;){if(e.value)return!1}}catch(t){r.e(t)}finally{r.f()}return!0},P=function(e){return function(){var t=m(regeneratorRuntime.mark(function t(o){var c,s,l,u,i,d,f,m;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(k()){t.next=3;break}return a.Alert.showAlert("error","All fields are mandatory! You can enter your own values or leave the fields with its own default value."),t.abrupt("return");case 3:return c=document.querySelector("#albumName").value,s=document.querySelector("#albumGenre").value,l=document.querySelector("#albumYear").value,0!==(u=document.querySelector("#albumCoverSelector")).files.length&&(e.cover=u.files[0]),i=Array.from(document.querySelectorAll(".trackTitleInput")).map(function(e){return e.value}),d=Array.from(document.querySelectorAll(".trackArtistsInput")).map(function(e){return e.value}),e.name=c,e.year=l,e.genre=s,e.tracks.forEach(function(e,r){e.title=i[r],e.artists=d[r]}),t.prev=14,n.Loader.showLoader("Uploading album cover..."),t.next=18,r.API.getSignAndUpload(e.cover,"".concat(e.name,".jpg"),"image/jpeg");case 18:e.cover=t.sent,t.next=24;break;case 21:t.prev=21,t.t0=t.catch(14),q(t.t0);case 24:f=y.files,m=0;case 26:if(!(m<f.length)){t.next=40;break}return t.prev=27,n.Loader.showLoader("Uploading tracks (".concat(m+1,"/").concat(f.length,")...")),t.next=31,r.API.getSignAndUpload(f[m],f[m].name,f[m].type);case 31:e.tracks[m].sourceFile=t.sent,t.next=37;break;case 34:t.prev=34,t.t1=t.catch(27),q(t.t1);case 37:m++,t.next=26;break;case 40:return n.Loader.showLoader("Updating the database..."),t.prev=41,t.next=44,r.API.getUploadAlbum(e);case 44:createAlbumReq=t.sent,"success"===createAlbumReq.data.status&&(A.innerHTML="",y.value="",n.Loader.hideLoader(),a.Alert.showAlert("success","Album uploaded successfully!")),t.next=51;break;case 48:t.prev=48,t.t2=t.catch(41),q(t.t2);case 51:case"end":return t.stop()}},t,null,[[14,21],[27,34],[41,48]])}));return function(e){return t.apply(this,arguments)}}()},U=function(){var e=m(regeneratorRuntime.mark(function e(n,c){var s,l,i,d,f,m,p,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=0,l=c.length+2*n.length,o.ProgressBar.showProgress("Uploading albums...",t.Utils.calcPercent(s,l)),i=u(n),e.prev=4,i.s();case 6:if((d=i.n()).done){e.next=56;break}return f=d.value,e.prev=8,e.next=11,r.API.getSignAndUpload(f.cover,"".concat(f.name,".jpg"),"image/jpeg");case 11:f.cover=e.sent,o.ProgressBar.showProgress("Uploading albums...",t.Utils.calcPercent(++s,l)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),w(e.t0);case 18:m=u(f.tracks),e.prev=19,m.s();case 21:if((p=m.n()).done){e.next=35;break}return g=p.value,e.prev=23,e.next=26,r.API.getSignAndUpload(g.sourceFile,g.sourceFile.name,g.sourceFile.type);case 26:g.sourceFile=e.sent,o.ProgressBar.showProgress("Uploading albums...",t.Utils.calcPercent(++s,l)),e.next=33;break;case 30:e.prev=30,e.t1=e.catch(23),w(e.t1);case 33:e.next=21;break;case 35:e.next=40;break;case 37:e.prev=37,e.t2=e.catch(19),m.e(e.t2);case 40:return e.prev=40,m.f(),e.finish(40);case 43:return e.prev=43,e.next=46,r.API.getUploadAlbum(f);case 46:createAlbumReq=e.sent,"success"===createAlbumReq.data.status&&o.ProgressBar.showProgress("Uploading albums...",t.Utils.calcPercent(++s,l)),e.next=53;break;case 50:e.prev=50,e.t3=e.catch(43),w(e.t3);case 53:t.Utils.dispatchTimer(function(){y.value="",o.ProgressBar.hideProgress(),a.Alert.showAlert("success","All albums uploaded successfully!")},2e3);case 54:e.next=6;break;case 56:e.next=61;break;case 58:e.prev=58,e.t4=e.catch(4),i.e(e.t4);case 61:return e.prev=61,i.f(),e.finish(61);case 64:case"end":return e.stop()}},e,null,[[4,58,61,64],[8,15],[19,37,40,43],[23,30],[43,50]])}));return function(r,t){return e.apply(this,arguments)}}();L&&L.addEventListener("change",function(e){A.innerHTML="",y.value="",document.querySelector(".upload__album-h1").textContent="Multiple Upload",document.querySelector(".upload__album-p").textContent=l.Strings.multipleSelectInputStr,b.value="Upload"}),S&&S.addEventListener("change",function(e){A.innerHTML="",y.value="",document.querySelector(".upload__album-h1").textContent="Single Upload",document.querySelector(".upload__album-p").textContent=l.Strings.singleSelectInputStr,b.value="Next"}),y&&y.addEventListener("change",function(e){e.target.files&&0!==e.target.files.length||(A.innerHTML="",y.value="")}),b&&b.addEventListener("click",m(regeneratorRuntime.mark(function e(){var r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(y.files&&0!==y.files.length){e.next=3;break}return a.Alert.showAlert("error","First select the files to be processed!"),e.abrupt("return");case 3:return n.Loader.showLoader("Processing files..."),r=y.files,e.prev=5,e.t0=c.AudioFileParser,e.next=9,c.AudioFileParser.parseAllAudioFiles(r);case 9:e.t1=e.sent,o=e.t0.filterFiles.call(e.t0,e.t1),e.next=16;break;case 13:return e.prev=13,e.t2=e.catch(5),e.abrupt("return",t.Utils.dispatchTimer(function(){y.value="",n.Loader.hideLoader(),a.Alert.showAlert("error",e.t2.message),console.log(e.t2)},2e3));case 16:S.checked?t.Utils.dispatchTimer(function(){n.Loader.hideLoader();var e=o[0];A.innerHTML="",A.insertAdjacentHTML("beforeend",s.Views.renderUploadAlbumView(e)),document.querySelector("#albumCoverSelector").addEventListener("change",_),document.querySelector(".form__upload-cancel--btn").addEventListener("click",x),document.querySelector(".form__upload-final--btn").addEventListener("click",P(e))},2e3):t.Utils.dispatchTimer(function(){n.Loader.hideLoader(),U(o,r)},2e3);case 17:case"end":return e.stop()}},e,null,[[5,13]])}))),p&&p.addEventListener("click",function(e){e.preventDefault(),g.classList.toggle("sidebar__main--slide"),v.classList.toggle("sidebar__main--text-slide"),e.target.parentElement.classList.toggle("sidebar__main--toggler-slide"),h.classList.toggle("content__main--slide"),e.target.classList.contains("fa-bars")?(e.target.classList.remove("fa-bars"),e.target.classList.add("fa-times")):(e.target.classList.remove("fa-times"),e.target.classList.add("fa-bars"))});
},{"./api":"LVu9","./utils":"FOZT","./loader":"cGmI","./alert":"acK6","./progressBar":"guJX","./audioFileParser":"QyKk","./views":"tbdy","./strings":"EYbI","buffer":"fe91"}]},{},["sfHE"], null)
//# sourceMappingURL=/adminBundle.js.map